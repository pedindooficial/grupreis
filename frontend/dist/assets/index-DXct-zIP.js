function wp(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const l=Object.getOwnPropertyDescriptor(a,n);l&&Object.defineProperty(e,n,l.get?l:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();function yp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zc={exports:{}},Gn={},eu={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=Symbol.for("react.element"),jp=Symbol.for("react.portal"),Np=Symbol.for("react.fragment"),Cp=Symbol.for("react.strict_mode"),Sp=Symbol.for("react.profiler"),kp=Symbol.for("react.provider"),Ep=Symbol.for("react.context"),Tp=Symbol.for("react.forward_ref"),Pp=Symbol.for("react.suspense"),Ap=Symbol.for("react.memo"),Ip=Symbol.for("react.lazy"),fd=Symbol.iterator;function Lp(e){return e===null||typeof e!="object"?null:(e=fd&&e[fd]||e["@@iterator"],typeof e=="function"?e:null)}var tu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ru=Object.assign,su={};function Cs(e,t,s){this.props=e,this.context=t,this.refs=su,this.updater=s||tu}Cs.prototype.isReactComponent={};Cs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function au(){}au.prototype=Cs.prototype;function ei(e,t,s){this.props=e,this.context=t,this.refs=su,this.updater=s||tu}var ti=ei.prototype=new au;ti.constructor=ei;ru(ti,Cs.prototype);ti.isPureReactComponent=!0;var gd=Array.isArray,nu=Object.prototype.hasOwnProperty,ri={current:null},lu={key:!0,ref:!0,__self:!0,__source:!0};function ou(e,t,s){var a,n={},l=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)nu.call(t,a)&&!lu.hasOwnProperty(a)&&(n[a]=t[a]);var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){for(var d=Array(c),m=0;m<c;m++)d[m]=arguments[m+2];n.children=d}if(e&&e.defaultProps)for(a in c=e.defaultProps,c)n[a]===void 0&&(n[a]=c[a]);return{$$typeof:Sa,type:e,key:l,ref:o,props:n,_owner:ri.current}}function _p(e,t){return{$$typeof:Sa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function si(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sa}function Dp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var bd=/\/+/g;function bl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Dp(""+e.key):t.toString(36)}function rn(e,t,s,a,n){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Sa:case jp:o=!0}}if(o)return o=e,n=n(o),e=a===""?"."+bl(o,0):a,gd(n)?(s="",e!=null&&(s=e.replace(bd,"$&/")+"/"),rn(n,t,s,"",function(m){return m})):n!=null&&(si(n)&&(n=_p(n,s+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(bd,"$&/")+"/")+e)),t.push(n)),1;if(o=0,a=a===""?".":a+":",gd(e))for(var c=0;c<e.length;c++){l=e[c];var d=a+bl(l,c);o+=rn(l,t,s,d,n)}else if(d=Lp(e),typeof d=="function")for(e=d.call(e),c=0;!(l=e.next()).done;)l=l.value,d=a+bl(l,c++),o+=rn(l,t,s,d,n);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Oa(e,t,s){if(e==null)return e;var a=[],n=0;return rn(e,a,"","",function(l){return t.call(s,l,n++)}),a}function Mp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ze={current:null},sn={transition:null},Op={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:sn,ReactCurrentOwner:ri};xe.Children={map:Oa,forEach:function(e,t,s){Oa(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Oa(e,function(){t++}),t},toArray:function(e){return Oa(e,function(t){return t})||[]},only:function(e){if(!si(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=Cs;xe.Fragment=Np;xe.Profiler=Sp;xe.PureComponent=ei;xe.StrictMode=Cp;xe.Suspense=Pp;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Op;xe.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=ru({},e.props),n=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=ri.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)nu.call(t,d)&&!lu.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=s;else if(1<d){c=Array(d);for(var m=0;m<d;m++)c[m]=arguments[m+2];a.children=c}return{$$typeof:Sa,type:e.type,key:n,ref:l,props:a,_owner:o}};xe.createContext=function(e){return e={$$typeof:Ep,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kp,_context:e},e.Consumer=e};xe.createElement=ou;xe.createFactory=function(e){var t=ou.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:Tp,render:e}};xe.isValidElement=si;xe.lazy=function(e){return{$$typeof:Ip,_payload:{_status:-1,_result:e},_init:Mp}};xe.memo=function(e,t){return{$$typeof:Ap,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=sn.transition;sn.transition={};try{e()}finally{sn.transition=t}};xe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xe.useCallback=function(e,t){return Ze.current.useCallback(e,t)};xe.useContext=function(e){return Ze.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return Ze.current.useDeferredValue(e)};xe.useEffect=function(e,t){return Ze.current.useEffect(e,t)};xe.useId=function(){return Ze.current.useId()};xe.useImperativeHandle=function(e,t,s){return Ze.current.useImperativeHandle(e,t,s)};xe.useInsertionEffect=function(e,t){return Ze.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return Ze.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return Ze.current.useMemo(e,t)};xe.useReducer=function(e,t,s){return Ze.current.useReducer(e,t,s)};xe.useRef=function(e){return Ze.current.useRef(e)};xe.useState=function(e){return Ze.current.useState(e)};xe.useSyncExternalStore=function(e,t,s){return Ze.current.useSyncExternalStore(e,t,s)};xe.useTransition=function(){return Ze.current.useTransition()};xe.version="18.2.0";eu.exports=xe;var p=eu.exports;const iu=yp(p),Fp=wp({__proto__:null,default:iu},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp=p,Bp=Symbol.for("react.element"),$p=Symbol.for("react.fragment"),zp=Object.prototype.hasOwnProperty,Vp=Rp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qp={key:!0,ref:!0,__self:!0,__source:!0};function du(e,t,s){var a,n={},l=null,o=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)zp.call(t,a)&&!qp.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Bp,type:e,key:l,ref:o,props:n,_owner:Vp.current}}Gn.Fragment=$p;Gn.jsx=du;Gn.jsxs=du;Zc.exports=Gn;var r=Zc.exports,eo={},cu={exports:{}},xt={},uu={exports:{}},mu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,w){var F=b.length;b.push(w);e:for(;0<F;){var R=F-1>>>1,C=b[R];if(0<n(C,w))b[R]=w,b[F]=C,F=R;else break e}}function s(b){return b.length===0?null:b[0]}function a(b){if(b.length===0)return null;var w=b[0],F=b.pop();if(F!==w){b[0]=F;e:for(var R=0,C=b.length,H=C>>>1;R<H;){var te=2*(R+1)-1,i=b[te],P=te+1,g=b[P];if(0>n(i,F))P<C&&0>n(g,i)?(b[R]=g,b[P]=F,R=P):(b[R]=i,b[te]=F,R=te);else if(P<C&&0>n(g,F))b[R]=g,b[P]=F,R=P;else break e}}return w}function n(b,w){var F=b.sortIndex-w.sortIndex;return F!==0?F:b.id-w.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],m=[],L=1,x=null,y=3,$=!1,Y=!1,G=!1,M=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(b){for(var w=s(m);w!==null;){if(w.callback===null)a(m);else if(w.startTime<=b)a(m),w.sortIndex=w.expirationTime,t(d,w);else break;w=s(m)}}function T(b){if(G=!1,N(b),!Y)if(s(d)!==null)Y=!0,q(J);else{var w=s(m);w!==null&&B(T,w.startTime-b)}}function J(b,w){Y=!1,G&&(G=!1,f(O),O=-1),$=!0;var F=y;try{for(N(w),x=s(d);x!==null&&(!(x.expirationTime>w)||b&&!Q());){var R=x.callback;if(typeof R=="function"){x.callback=null,y=x.priorityLevel;var C=R(x.expirationTime<=w);w=e.unstable_now(),typeof C=="function"?x.callback=C:x===s(d)&&a(d),N(w)}else a(d);x=s(d)}if(x!==null)var H=!0;else{var te=s(m);te!==null&&B(T,te.startTime-w),H=!1}return H}finally{x=null,y=F,$=!1}}var z=!1,I=null,O=-1,U=5,E=-1;function Q(){return!(e.unstable_now()-E<U)}function W(){if(I!==null){var b=e.unstable_now();E=b;var w=!0;try{w=I(!0,b)}finally{w?Z():(z=!1,I=null)}}else z=!1}var Z;if(typeof u=="function")Z=function(){u(W)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,v=K.port2;K.port1.onmessage=W,Z=function(){v.postMessage(null)}}else Z=function(){M(W,0)};function q(b){I=b,z||(z=!0,Z())}function B(b,w){O=M(function(){b(e.unstable_now())},w)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){Y||$||(Y=!0,q(J))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function(b){switch(y){case 1:case 2:case 3:var w=3;break;default:w=y}var F=y;y=w;try{return b()}finally{y=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,w){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var F=y;y=b;try{return w()}finally{y=F}},e.unstable_scheduleCallback=function(b,w,F){var R=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?R+F:R):F=R,b){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=F+C,b={id:L++,callback:w,priorityLevel:b,startTime:F,expirationTime:C,sortIndex:-1},F>R?(b.sortIndex=F,t(m,b),s(d)===null&&b===s(m)&&(G?(f(O),O=-1):G=!0,B(T,F-R))):(b.sortIndex=C,t(d,b),Y||$||(Y=!0,q(J))),b},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(b){var w=y;return function(){var F=y;y=w;try{return b.apply(this,arguments)}finally{y=F}}}})(mu);uu.exports=mu;var Up=uu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu=p,mt=Up;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xu=new Set,na={};function Br(e,t){hs(e,t),hs(e+"Capture",t)}function hs(e,t){for(na[e]=t,e=0;e<t.length;e++)xu.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=Object.prototype.hasOwnProperty,Hp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vd={},wd={};function Kp(e){return to.call(wd,e)?!0:to.call(vd,e)?!1:Hp.test(e)?wd[e]=!0:(vd[e]=!0,!1)}function Wp(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jp(e,t,s,a){if(t===null||typeof t>"u"||Wp(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function et(e,t,s,a,n,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new et(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new et(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new et(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new et(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new et(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new et(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new et(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new et(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new et(e,5,!1,e.toLowerCase(),null,!1,!1)});var ai=/[\-:]([a-z])/g;function ni(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ai,ni);qe[t]=new et(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ai,ni);qe[t]=new et(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ai,ni);qe[t]=new et(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new et(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new et(e,1,!1,e.toLowerCase(),null,!0,!0)});function li(e,t,s,a){var n=qe.hasOwnProperty(t)?qe[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jp(t,s,n,a)&&(s=null),a||n===null?Kp(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=s===null?n.type===3?!1:"":s:(t=n.attributeName,a=n.attributeNamespace,s===null?e.removeAttribute(t):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var Qt=pu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fa=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Gr=Symbol.for("react.fragment"),oi=Symbol.for("react.strict_mode"),ro=Symbol.for("react.profiler"),hu=Symbol.for("react.provider"),fu=Symbol.for("react.context"),ii=Symbol.for("react.forward_ref"),so=Symbol.for("react.suspense"),ao=Symbol.for("react.suspense_list"),di=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),gu=Symbol.for("react.offscreen"),yd=Symbol.iterator;function Ds(e){return e===null||typeof e!="object"?null:(e=yd&&e[yd]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,vl;function Ks(e){if(vl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);vl=t&&t[1]||""}return`
`+vl+e}var wl=!1;function yl(e,t){if(!e||wl)return"";wl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var a=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){a=m}e.call(t.prototype)}else{try{throw Error()}catch(m){a=m}e()}}catch(m){if(m&&a&&typeof m.stack=="string"){for(var n=m.stack.split(`
`),l=a.stack.split(`
`),o=n.length-1,c=l.length-1;1<=o&&0<=c&&n[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(n[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||n[o]!==l[c]){var d=`
`+n[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{wl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ks(e):""}function Gp(e){switch(e.tag){case 5:return Ks(e.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 2:case 15:return e=yl(e.type,!1),e;case 11:return e=yl(e.type.render,!1),e;case 1:return e=yl(e.type,!0),e;default:return""}}function no(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gr:return"Fragment";case Jr:return"Portal";case ro:return"Profiler";case oi:return"StrictMode";case so:return"Suspense";case ao:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fu:return(e.displayName||"Context")+".Consumer";case hu:return(e._context.displayName||"Context")+".Provider";case ii:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case di:return t=e.displayName||null,t!==null?t:no(e.type)||"Memo";case er:t=e._payload,e=e._init;try{return no(e(t))}catch{}}return null}function Qp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return no(t);case 8:return t===oi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function br(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yp(e){var t=bu(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ra(e){e._valueTracker||(e._valueTracker=Yp(e))}function vu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=bu(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function hn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lo(e,t){var s=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function jd(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=br(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wu(e,t){t=t.checked,t!=null&&li(e,"checked",t,!1)}function oo(e,t){wu(e,t);var s=br(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?io(e,t.type,s):t.hasOwnProperty("defaultValue")&&io(e,t.type,br(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nd(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function io(e,t,s){(t!=="number"||hn(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ws=Array.isArray;function ls(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+br(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function co(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cd(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(ie(92));if(Ws(s)){if(1<s.length)throw Error(ie(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:br(s)}}function yu(e,t){var s=br(t.value),a=br(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Sd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ju(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ju(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ba,Nu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ba.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function la(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xp=["Webkit","ms","Moz","O"];Object.keys(Qs).forEach(function(e){Xp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qs[t]=Qs[e]})});function Cu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Qs.hasOwnProperty(e)&&Qs[e]?(""+t).trim():t+"px"}function Su(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,n=Cu(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,n):e[s]=n}}var Zp=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mo(e,t){if(t){if(Zp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function po(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=null;function ci(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ho=null,os=null,is=null;function kd(e){if(e=Ta(e)){if(typeof ho!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=el(t),ho(e.stateNode,e.type,t))}}function ku(e){os?is?is.push(e):is=[e]:os=e}function Eu(){if(os){var e=os,t=is;if(is=os=null,kd(e),t)for(e=0;e<t.length;e++)kd(t[e])}}function Tu(e,t){return e(t)}function Pu(){}var jl=!1;function Au(e,t,s){if(jl)return e(t,s);jl=!0;try{return Tu(e,t,s)}finally{jl=!1,(os!==null||is!==null)&&(Pu(),Eu())}}function oa(e,t){var s=e.stateNode;if(s===null)return null;var a=el(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(ie(231,t,typeof s));return s}var fo=!1;if(Kt)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){fo=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{fo=!1}function ex(e,t,s,a,n,l,o,c,d){var m=Array.prototype.slice.call(arguments,3);try{t.apply(s,m)}catch(L){this.onError(L)}}var Ys=!1,fn=null,gn=!1,go=null,tx={onError:function(e){Ys=!0,fn=e}};function rx(e,t,s,a,n,l,o,c,d){Ys=!1,fn=null,ex.apply(tx,arguments)}function sx(e,t,s,a,n,l,o,c,d){if(rx.apply(this,arguments),Ys){if(Ys){var m=fn;Ys=!1,fn=null}else throw Error(ie(198));gn||(gn=!0,go=m)}}function $r(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Iu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ed(e){if($r(e)!==e)throw Error(ie(188))}function ax(e){var t=e.alternate;if(!t){if(t=$r(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){s=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===s)return Ed(n),e;if(l===a)return Ed(n),t;l=l.sibling}throw Error(ie(188))}if(s.return!==a.return)s=n,a=l;else{for(var o=!1,c=n.child;c;){if(c===s){o=!0,s=n,a=l;break}if(c===a){o=!0,a=n,s=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===s){o=!0,s=l,a=n;break}if(c===a){o=!0,a=l,s=n;break}c=c.sibling}if(!o)throw Error(ie(189))}}if(s.alternate!==a)throw Error(ie(190))}if(s.tag!==3)throw Error(ie(188));return s.stateNode.current===s?e:t}function Lu(e){return e=ax(e),e!==null?_u(e):null}function _u(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_u(e);if(t!==null)return t;e=e.sibling}return null}var Du=mt.unstable_scheduleCallback,Td=mt.unstable_cancelCallback,nx=mt.unstable_shouldYield,lx=mt.unstable_requestPaint,Ae=mt.unstable_now,ox=mt.unstable_getCurrentPriorityLevel,ui=mt.unstable_ImmediatePriority,Mu=mt.unstable_UserBlockingPriority,bn=mt.unstable_NormalPriority,ix=mt.unstable_LowPriority,Ou=mt.unstable_IdlePriority,Qn=null,Ot=null;function dx(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Qn,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:mx,cx=Math.log,ux=Math.LN2;function mx(e){return e>>>=0,e===0?32:31-(cx(e)/ux|0)|0}var $a=64,za=4194304;function Js(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vn(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,n=e.suspendedLanes,l=e.pingedLanes,o=s&268435455;if(o!==0){var c=o&~n;c!==0?a=Js(c):(l&=o,l!==0&&(a=Js(l)))}else o=s&~n,o!==0?a=Js(o):l!==0&&(a=Js(l));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,l=t&-t,n>=l||n===16&&(l&4194240)!==0))return t;if(a&4&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-Pt(t),n=1<<s,a|=e[s],t&=~n;return a}function px(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xx(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Pt(l),c=1<<o,d=n[o];d===-1?(!(c&s)||c&a)&&(n[o]=px(c,t)):d<=t&&(e.expiredLanes|=c),l&=~c}}function bo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fu(){var e=$a;return $a<<=1,!($a&4194240)&&($a=64),e}function Nl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ka(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pt(t),e[t]=s}function hx(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-Pt(s),l=1<<n;t[n]=0,a[n]=-1,e[n]=-1,s&=~l}}function mi(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-Pt(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}var be=0;function Ru(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bu,pi,$u,zu,Vu,vo=!1,Va=[],dr=null,cr=null,ur=null,ia=new Map,da=new Map,rr=[],fx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pd(e,t){switch(e){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":ia.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(t.pointerId)}}function Os(e,t,s,a,n,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},t!==null&&(t=Ta(t),t!==null&&pi(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function gx(e,t,s,a,n){switch(t){case"focusin":return dr=Os(dr,e,t,s,a,n),!0;case"dragenter":return cr=Os(cr,e,t,s,a,n),!0;case"mouseover":return ur=Os(ur,e,t,s,a,n),!0;case"pointerover":var l=n.pointerId;return ia.set(l,Os(ia.get(l)||null,e,t,s,a,n)),!0;case"gotpointercapture":return l=n.pointerId,da.set(l,Os(da.get(l)||null,e,t,s,a,n)),!0}return!1}function qu(e){var t=Er(e.target);if(t!==null){var s=$r(t);if(s!==null){if(t=s.tag,t===13){if(t=Iu(s),t!==null){e.blockedOn=t,Vu(e.priority,function(){$u(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function an(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=wo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);xo=a,s.target.dispatchEvent(a),xo=null}else return t=Ta(s),t!==null&&pi(t),e.blockedOn=s,!1;t.shift()}return!0}function Ad(e,t,s){an(e)&&s.delete(t)}function bx(){vo=!1,dr!==null&&an(dr)&&(dr=null),cr!==null&&an(cr)&&(cr=null),ur!==null&&an(ur)&&(ur=null),ia.forEach(Ad),da.forEach(Ad)}function Fs(e,t){e.blockedOn===t&&(e.blockedOn=null,vo||(vo=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,bx)))}function ca(e){function t(n){return Fs(n,e)}if(0<Va.length){Fs(Va[0],e);for(var s=1;s<Va.length;s++){var a=Va[s];a.blockedOn===e&&(a.blockedOn=null)}}for(dr!==null&&Fs(dr,e),cr!==null&&Fs(cr,e),ur!==null&&Fs(ur,e),ia.forEach(t),da.forEach(t),s=0;s<rr.length;s++)a=rr[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<rr.length&&(s=rr[0],s.blockedOn===null);)qu(s),s.blockedOn===null&&rr.shift()}var ds=Qt.ReactCurrentBatchConfig,wn=!0;function vx(e,t,s,a){var n=be,l=ds.transition;ds.transition=null;try{be=1,xi(e,t,s,a)}finally{be=n,ds.transition=l}}function wx(e,t,s,a){var n=be,l=ds.transition;ds.transition=null;try{be=4,xi(e,t,s,a)}finally{be=n,ds.transition=l}}function xi(e,t,s,a){if(wn){var n=wo(e,t,s,a);if(n===null)_l(e,t,a,yn,s),Pd(e,a);else if(gx(n,e,t,s,a))a.stopPropagation();else if(Pd(e,a),t&4&&-1<fx.indexOf(e)){for(;n!==null;){var l=Ta(n);if(l!==null&&Bu(l),l=wo(e,t,s,a),l===null&&_l(e,t,a,yn,s),l===n)break;n=l}n!==null&&a.stopPropagation()}else _l(e,t,a,null,s)}}var yn=null;function wo(e,t,s,a){if(yn=null,e=ci(a),e=Er(e),e!==null)if(t=$r(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Iu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yn=e,null}function Uu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ox()){case ui:return 1;case Mu:return 4;case bn:case ix:return 16;case Ou:return 536870912;default:return 16}default:return 16}}var ar=null,hi=null,nn=null;function Hu(){if(nn)return nn;var e,t=hi,s=t.length,a,n="value"in ar?ar.value:ar.textContent,l=n.length;for(e=0;e<s&&t[e]===n[e];e++);var o=s-e;for(a=1;a<=o&&t[s-a]===n[l-a];a++);return nn=n.slice(e,1<a?1-a:void 0)}function ln(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qa(){return!0}function Id(){return!1}function ht(e){function t(s,a,n,l,o){this._reactName=s,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(s=e[c],this[c]=s?s(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?qa:Id,this.isPropagationStopped=Id,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),t}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fi=ht(Ss),Ea=Ee({},Ss,{view:0,detail:0}),yx=ht(Ea),Cl,Sl,Rs,Yn=Ee({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(Cl=e.screenX-Rs.screenX,Sl=e.screenY-Rs.screenY):Sl=Cl=0,Rs=e),Cl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),Ld=ht(Yn),jx=Ee({},Yn,{dataTransfer:0}),Nx=ht(jx),Cx=Ee({},Ea,{relatedTarget:0}),kl=ht(Cx),Sx=Ee({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),kx=ht(Sx),Ex=Ee({},Ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tx=ht(Ex),Px=Ee({},Ss,{data:0}),_d=ht(Px),Ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ix={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _x(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lx[e])?!!t[e]:!1}function gi(){return _x}var Dx=Ee({},Ea,{key:function(e){if(e.key){var t=Ax[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ln(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ix[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gi,charCode:function(e){return e.type==="keypress"?ln(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ln(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mx=ht(Dx),Ox=Ee({},Yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dd=ht(Ox),Fx=Ee({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gi}),Rx=ht(Fx),Bx=Ee({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),$x=ht(Bx),zx=Ee({},Yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vx=ht(zx),qx=[9,13,27,32],bi=Kt&&"CompositionEvent"in window,Xs=null;Kt&&"documentMode"in document&&(Xs=document.documentMode);var Ux=Kt&&"TextEvent"in window&&!Xs,Ku=Kt&&(!bi||Xs&&8<Xs&&11>=Xs),Md=" ",Od=!1;function Wu(e,t){switch(e){case"keyup":return qx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function Hx(e,t){switch(e){case"compositionend":return Ju(t);case"keypress":return t.which!==32?null:(Od=!0,Md);case"textInput":return e=t.data,e===Md&&Od?null:e;default:return null}}function Kx(e,t){if(Qr)return e==="compositionend"||!bi&&Wu(e,t)?(e=Hu(),nn=hi=ar=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ku&&t.locale!=="ko"?null:t.data;default:return null}}var Wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wx[e.type]:t==="textarea"}function Gu(e,t,s,a){ku(a),t=jn(t,"onChange"),0<t.length&&(s=new fi("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Zs=null,ua=null;function Jx(e){lm(e,0)}function Xn(e){var t=Zr(e);if(vu(t))return e}function Gx(e,t){if(e==="change")return t}var Qu=!1;if(Kt){var El;if(Kt){var Tl="oninput"in document;if(!Tl){var Rd=document.createElement("div");Rd.setAttribute("oninput","return;"),Tl=typeof Rd.oninput=="function"}El=Tl}else El=!1;Qu=El&&(!document.documentMode||9<document.documentMode)}function Bd(){Zs&&(Zs.detachEvent("onpropertychange",Yu),ua=Zs=null)}function Yu(e){if(e.propertyName==="value"&&Xn(ua)){var t=[];Gu(t,ua,e,ci(e)),Au(Jx,t)}}function Qx(e,t,s){e==="focusin"?(Bd(),Zs=t,ua=s,Zs.attachEvent("onpropertychange",Yu)):e==="focusout"&&Bd()}function Yx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xn(ua)}function Xx(e,t){if(e==="click")return Xn(t)}function Zx(e,t){if(e==="input"||e==="change")return Xn(t)}function eh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:eh;function ma(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!to.call(t,n)||!It(e[n],t[n]))return!1}return!0}function $d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zd(e,t){var s=$d(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$d(s)}}function Xu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zu(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=hn(e.document)}return t}function vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function th(e){var t=Zu(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Xu(s.ownerDocument.documentElement,s)){if(a!==null&&vi(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=s.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!e.extend&&l>a&&(n=a,a=l,l=n),n=zd(s,l);var o=zd(s,a);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),l>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rh=Kt&&"documentMode"in document&&11>=document.documentMode,Yr=null,yo=null,ea=null,jo=!1;function Vd(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;jo||Yr==null||Yr!==hn(a)||(a=Yr,"selectionStart"in a&&vi(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ea&&ma(ea,a)||(ea=a,a=jn(yo,"onSelect"),0<a.length&&(t=new fi("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Yr)))}function Ua(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Xr={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},Pl={},em={};Kt&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function Zn(e){if(Pl[e])return Pl[e];if(!Xr[e])return e;var t=Xr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in em)return Pl[e]=t[s];return e}var tm=Zn("animationend"),rm=Zn("animationiteration"),sm=Zn("animationstart"),am=Zn("transitionend"),nm=new Map,qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){nm.set(e,t),Br(t,[e])}for(var Al=0;Al<qd.length;Al++){var Il=qd[Al],sh=Il.toLowerCase(),ah=Il[0].toUpperCase()+Il.slice(1);wr(sh,"on"+ah)}wr(tm,"onAnimationEnd");wr(rm,"onAnimationIteration");wr(sm,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(am,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function Ud(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,sx(a,t,void 0,e),e.currentTarget=null}function lm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var o=a.length-1;0<=o;o--){var c=a[o],d=c.instance,m=c.currentTarget;if(c=c.listener,d!==l&&n.isPropagationStopped())break e;Ud(n,c,m),l=d}else for(o=0;o<a.length;o++){if(c=a[o],d=c.instance,m=c.currentTarget,c=c.listener,d!==l&&n.isPropagationStopped())break e;Ud(n,c,m),l=d}}}if(gn)throw e=go,gn=!1,go=null,e}function ye(e,t){var s=t[Eo];s===void 0&&(s=t[Eo]=new Set);var a=e+"__bubble";s.has(a)||(om(t,e,2,!1),s.add(a))}function Ll(e,t,s){var a=0;t&&(a|=4),om(s,e,a,t)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function pa(e){if(!e[Ha]){e[Ha]=!0,xu.forEach(function(s){s!=="selectionchange"&&(nh.has(s)||Ll(s,!1,e),Ll(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ha]||(t[Ha]=!0,Ll("selectionchange",!1,t))}}function om(e,t,s,a){switch(Uu(t)){case 1:var n=vx;break;case 4:n=wx;break;default:n=xi}s=n.bind(null,t,s,e),n=void 0,!fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function _l(e,t,s,a,n){var l=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var c=a.stateNode.containerInfo;if(c===n||c.nodeType===8&&c.parentNode===n)break;if(o===4)for(o=a.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===n||d.nodeType===8&&d.parentNode===n))return;o=o.return}for(;c!==null;){if(o=Er(c),o===null)return;if(d=o.tag,d===5||d===6){a=l=o;continue e}c=c.parentNode}}a=a.return}Au(function(){var m=l,L=ci(s),x=[];e:{var y=nm.get(e);if(y!==void 0){var $=fi,Y=e;switch(e){case"keypress":if(ln(s)===0)break e;case"keydown":case"keyup":$=Mx;break;case"focusin":Y="focus",$=kl;break;case"focusout":Y="blur",$=kl;break;case"beforeblur":case"afterblur":$=kl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Nx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Rx;break;case tm:case rm:case sm:$=kx;break;case am:$=$x;break;case"scroll":$=yx;break;case"wheel":$=Vx;break;case"copy":case"cut":case"paste":$=Tx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Dd}var G=(t&4)!==0,M=!G&&e==="scroll",f=G?y!==null?y+"Capture":null:y;G=[];for(var u=m,N;u!==null;){N=u;var T=N.stateNode;if(N.tag===5&&T!==null&&(N=T,f!==null&&(T=oa(u,f),T!=null&&G.push(xa(u,T,N)))),M)break;u=u.return}0<G.length&&(y=new $(y,Y,null,s,L),x.push({event:y,listeners:G}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",y&&s!==xo&&(Y=s.relatedTarget||s.fromElement)&&(Er(Y)||Y[Wt]))break e;if(($||y)&&(y=L.window===L?L:(y=L.ownerDocument)?y.defaultView||y.parentWindow:window,$?(Y=s.relatedTarget||s.toElement,$=m,Y=Y?Er(Y):null,Y!==null&&(M=$r(Y),Y!==M||Y.tag!==5&&Y.tag!==6)&&(Y=null)):($=null,Y=m),$!==Y)){if(G=Ld,T="onMouseLeave",f="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(G=Dd,T="onPointerLeave",f="onPointerEnter",u="pointer"),M=$==null?y:Zr($),N=Y==null?y:Zr(Y),y=new G(T,u+"leave",$,s,L),y.target=M,y.relatedTarget=N,T=null,Er(L)===m&&(G=new G(f,u+"enter",Y,s,L),G.target=N,G.relatedTarget=M,T=G),M=T,$&&Y)t:{for(G=$,f=Y,u=0,N=G;N;N=Ur(N))u++;for(N=0,T=f;T;T=Ur(T))N++;for(;0<u-N;)G=Ur(G),u--;for(;0<N-u;)f=Ur(f),N--;for(;u--;){if(G===f||f!==null&&G===f.alternate)break t;G=Ur(G),f=Ur(f)}G=null}else G=null;$!==null&&Hd(x,y,$,G,!1),Y!==null&&M!==null&&Hd(x,M,Y,G,!0)}}e:{if(y=m?Zr(m):window,$=y.nodeName&&y.nodeName.toLowerCase(),$==="select"||$==="input"&&y.type==="file")var J=Gx;else if(Fd(y))if(Qu)J=Zx;else{J=Yx;var z=Qx}else($=y.nodeName)&&$.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(J=Xx);if(J&&(J=J(e,m))){Gu(x,J,s,L);break e}z&&z(e,y,m),e==="focusout"&&(z=y._wrapperState)&&z.controlled&&y.type==="number"&&io(y,"number",y.value)}switch(z=m?Zr(m):window,e){case"focusin":(Fd(z)||z.contentEditable==="true")&&(Yr=z,yo=m,ea=null);break;case"focusout":ea=yo=Yr=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,Vd(x,s,L);break;case"selectionchange":if(rh)break;case"keydown":case"keyup":Vd(x,s,L)}var I;if(bi)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Qr?Wu(e,s)&&(O="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(O="onCompositionStart");O&&(Ku&&s.locale!=="ko"&&(Qr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Qr&&(I=Hu()):(ar=L,hi="value"in ar?ar.value:ar.textContent,Qr=!0)),z=jn(m,O),0<z.length&&(O=new _d(O,e,null,s,L),x.push({event:O,listeners:z}),I?O.data=I:(I=Ju(s),I!==null&&(O.data=I)))),(I=Ux?Hx(e,s):Kx(e,s))&&(m=jn(m,"onBeforeInput"),0<m.length&&(L=new _d("onBeforeInput","beforeinput",null,s,L),x.push({event:L,listeners:m}),L.data=I))}lm(x,t)})}function xa(e,t,s){return{instance:e,listener:t,currentTarget:s}}function jn(e,t){for(var s=t+"Capture",a=[];e!==null;){var n=e,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=oa(e,s),l!=null&&a.unshift(xa(e,l,n)),l=oa(e,t),l!=null&&a.push(xa(e,l,n))),e=e.return}return a}function Ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hd(e,t,s,a,n){for(var l=t._reactName,o=[];s!==null&&s!==a;){var c=s,d=c.alternate,m=c.stateNode;if(d!==null&&d===a)break;c.tag===5&&m!==null&&(c=m,n?(d=oa(s,l),d!=null&&o.unshift(xa(s,d,c))):n||(d=oa(s,l),d!=null&&o.push(xa(s,d,c)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var lh=/\r\n?/g,oh=/\u0000|\uFFFD/g;function Kd(e){return(typeof e=="string"?e:""+e).replace(lh,`
`).replace(oh,"")}function Ka(e,t,s){if(t=Kd(t),Kd(e)!==t&&s)throw Error(ie(425))}function Nn(){}var No=null,Co=null;function So(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ko=typeof setTimeout=="function"?setTimeout:void 0,ih=typeof clearTimeout=="function"?clearTimeout:void 0,Wd=typeof Promise=="function"?Promise:void 0,dh=typeof queueMicrotask=="function"?queueMicrotask:typeof Wd<"u"?function(e){return Wd.resolve(null).then(e).catch(ch)}:ko;function ch(e){setTimeout(function(){throw e})}function Dl(e,t){var s=t,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(a===0){e.removeChild(n),ca(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=n}while(s);ca(t)}function mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ks,ha="__reactProps$"+ks,Wt="__reactContainer$"+ks,Eo="__reactEvents$"+ks,uh="__reactListeners$"+ks,mh="__reactHandles$"+ks;function Er(e){var t=e[Mt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Wt]||s[Mt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Jd(e);e!==null;){if(s=e[Mt])return s;e=Jd(e)}return t}e=s,s=e.parentNode}return null}function Ta(e){return e=e[Mt]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function el(e){return e[ha]||null}var To=[],es=-1;function yr(e){return{current:e}}function je(e){0>es||(e.current=To[es],To[es]=null,es--)}function ve(e,t){es++,To[es]=e.current,e.current=t}var vr={},We=yr(vr),at=yr(!1),_r=vr;function fs(e,t){var s=e.type.contextTypes;if(!s)return vr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in s)n[l]=t[l];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function nt(e){return e=e.childContextTypes,e!=null}function Cn(){je(at),je(We)}function Gd(e,t,s){if(We.current!==vr)throw Error(ie(168));ve(We,t),ve(at,s)}function im(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(ie(108,Qp(e)||"Unknown",n));return Ee({},s,a)}function Sn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vr,_r=We.current,ve(We,e),ve(at,at.current),!0}function Qd(e,t,s){var a=e.stateNode;if(!a)throw Error(ie(169));s?(e=im(e,t,_r),a.__reactInternalMemoizedMergedChildContext=e,je(at),je(We),ve(We,e)):je(at),ve(at,s)}var zt=null,tl=!1,Ml=!1;function dm(e){zt===null?zt=[e]:zt.push(e)}function ph(e){tl=!0,dm(e)}function jr(){if(!Ml&&zt!==null){Ml=!0;var e=0,t=be;try{var s=zt;for(be=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}zt=null,tl=!1}catch(n){throw zt!==null&&(zt=zt.slice(e+1)),Du(ui,jr),n}finally{be=t,Ml=!1}}return null}var ts=[],rs=0,kn=null,En=0,bt=[],vt=0,Dr=null,Vt=1,qt="";function Sr(e,t){ts[rs++]=En,ts[rs++]=kn,kn=e,En=t}function cm(e,t,s){bt[vt++]=Vt,bt[vt++]=qt,bt[vt++]=Dr,Dr=e;var a=Vt;e=qt;var n=32-Pt(a)-1;a&=~(1<<n),s+=1;var l=32-Pt(t)+n;if(30<l){var o=n-n%5;l=(a&(1<<o)-1).toString(32),a>>=o,n-=o,Vt=1<<32-Pt(t)+n|s<<n|a,qt=l+e}else Vt=1<<l|s<<n|a,qt=e}function wi(e){e.return!==null&&(Sr(e,1),cm(e,1,0))}function yi(e){for(;e===kn;)kn=ts[--rs],ts[rs]=null,En=ts[--rs],ts[rs]=null;for(;e===Dr;)Dr=bt[--vt],bt[vt]=null,qt=bt[--vt],bt[vt]=null,Vt=bt[--vt],bt[vt]=null}var ut=null,ct=null,Ne=!1,Tt=null;function um(e,t){var s=wt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Yd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ut=e,ct=mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ut=e,ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Dr!==null?{id:Vt,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=wt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ut=e,ct=null,!0):!1;default:return!1}}function Po(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ao(e){if(Ne){var t=ct;if(t){var s=t;if(!Yd(e,t)){if(Po(e))throw Error(ie(418));t=mr(s.nextSibling);var a=ut;t&&Yd(e,t)?um(a,s):(e.flags=e.flags&-4097|2,Ne=!1,ut=e)}}else{if(Po(e))throw Error(ie(418));e.flags=e.flags&-4097|2,Ne=!1,ut=e}}}function Xd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ut=e}function Wa(e){if(e!==ut)return!1;if(!Ne)return Xd(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!So(e.type,e.memoizedProps)),t&&(t=ct)){if(Po(e))throw mm(),Error(ie(418));for(;t;)um(e,t),t=mr(t.nextSibling)}if(Xd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){ct=mr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}ct=null}}else ct=ut?mr(e.stateNode.nextSibling):null;return!0}function mm(){for(var e=ct;e;)e=mr(e.nextSibling)}function gs(){ct=ut=null,Ne=!1}function ji(e){Tt===null?Tt=[e]:Tt.push(e)}var xh=Qt.ReactCurrentBatchConfig;function kt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}var Tn=yr(null),Pn=null,ss=null,Ni=null;function Ci(){Ni=ss=Pn=null}function Si(e){var t=Tn.current;je(Tn),e._currentValue=t}function Io(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function cs(e,t){Pn=e,Ni=ss=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(st=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},ss===null){if(Pn===null)throw Error(ie(308));ss=e,Pn.dependencies={lanes:0,firstContext:e}}else ss=ss.next=e;return t}var Tr=null;function ki(e){Tr===null?Tr=[e]:Tr.push(e)}function pm(e,t,s,a){var n=t.interleaved;return n===null?(s.next=s,ki(t)):(s.next=n.next,n.next=s),t.interleaved=s,Jt(e,a)}function Jt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var tr=!1;function Ei(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,he&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Jt(e,s)}return n=a.interleaved,n===null?(t.next=t,ki(a)):(t.next=n.next,n.next=t),a.interleaved=t,Jt(e,s)}function on(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,mi(e,s)}}function Zd(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var n=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?n=l=o:l=l.next=o,s=s.next}while(s!==null);l===null?n=l=t:l=l.next=t}else n=l=t;s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function An(e,t,s,a){var n=e.updateQueue;tr=!1;var l=n.firstBaseUpdate,o=n.lastBaseUpdate,c=n.shared.pending;if(c!==null){n.shared.pending=null;var d=c,m=d.next;d.next=null,o===null?l=m:o.next=m,o=d;var L=e.alternate;L!==null&&(L=L.updateQueue,c=L.lastBaseUpdate,c!==o&&(c===null?L.firstBaseUpdate=m:c.next=m,L.lastBaseUpdate=d))}if(l!==null){var x=n.baseState;o=0,L=m=d=null,c=l;do{var y=c.lane,$=c.eventTime;if((a&y)===y){L!==null&&(L=L.next={eventTime:$,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var Y=e,G=c;switch(y=t,$=s,G.tag){case 1:if(Y=G.payload,typeof Y=="function"){x=Y.call($,x,y);break e}x=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=G.payload,y=typeof Y=="function"?Y.call($,x,y):Y,y==null)break e;x=Ee({},x,y);break e;case 2:tr=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,y=n.effects,y===null?n.effects=[c]:y.push(c))}else $={eventTime:$,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},L===null?(m=L=$,d=x):L=L.next=$,o|=y;if(c=c.next,c===null){if(c=n.shared.pending,c===null)break;y=c,c=y.next,y.next=null,n.lastBaseUpdate=y,n.shared.pending=null}}while(!0);if(L===null&&(d=x),n.baseState=d,n.firstBaseUpdate=m,n.lastBaseUpdate=L,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else l===null&&(n.shared.lanes=0);Or|=o,e.lanes=o,e.memoizedState=x}}function ec(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=s,typeof n!="function")throw Error(ie(191,n));n.call(a)}}}var hm=new pu.Component().refs;function Lo(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:Ee({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var rl={isMounted:function(e){return(e=e._reactInternals)?$r(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Ye(),n=hr(e),l=Ut(a,n);l.payload=t,s!=null&&(l.callback=s),t=pr(e,l,n),t!==null&&(At(t,e,n,a),on(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Ye(),n=hr(e),l=Ut(a,n);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=pr(e,l,n),t!==null&&(At(t,e,n,a),on(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ye(),a=hr(e),n=Ut(s,a);n.tag=2,t!=null&&(n.callback=t),t=pr(e,n,a),t!==null&&(At(t,e,a,s),on(t,e,a))}};function tc(e,t,s,a,n,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,l,o):t.prototype&&t.prototype.isPureReactComponent?!ma(s,a)||!ma(n,l):!0}function fm(e,t,s){var a=!1,n=vr,l=t.contextType;return typeof l=="object"&&l!==null?l=jt(l):(n=nt(t)?_r:We.current,a=t.contextTypes,l=(a=a!=null)?fs(e,n):vr),t=new t(s,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rl,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=l),t}function rc(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&rl.enqueueReplaceState(t,t.state,null)}function _o(e,t,s,a){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs=hm,Ei(e);var l=t.contextType;typeof l=="object"&&l!==null?n.context=jt(l):(l=nt(t)?_r:We.current,n.context=fs(e,l)),n.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Lo(e,t,l,s),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&rl.enqueueReplaceState(n,n.state,null),An(e,s,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Bs(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ie(309));var a=s.stateNode}if(!a)throw Error(ie(147,e));var n=a,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=n.refs;c===hm&&(c=n.refs={}),o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(ie(284));if(!s._owner)throw Error(ie(290,e))}return e}function Ja(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sc(e){var t=e._init;return t(e._payload)}function gm(e){function t(f,u){if(e){var N=f.deletions;N===null?(f.deletions=[u],f.flags|=16):N.push(u)}}function s(f,u){if(!e)return null;for(;u!==null;)t(f,u),u=u.sibling;return null}function a(f,u){for(f=new Map;u!==null;)u.key!==null?f.set(u.key,u):f.set(u.index,u),u=u.sibling;return f}function n(f,u){return f=fr(f,u),f.index=0,f.sibling=null,f}function l(f,u,N){return f.index=N,e?(N=f.alternate,N!==null?(N=N.index,N<u?(f.flags|=2,u):N):(f.flags|=2,u)):(f.flags|=1048576,u)}function o(f){return e&&f.alternate===null&&(f.flags|=2),f}function c(f,u,N,T){return u===null||u.tag!==6?(u=Vl(N,f.mode,T),u.return=f,u):(u=n(u,N),u.return=f,u)}function d(f,u,N,T){var J=N.type;return J===Gr?L(f,u,N.props.children,T,N.key):u!==null&&(u.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===er&&sc(J)===u.type)?(T=n(u,N.props),T.ref=Bs(f,u,N),T.return=f,T):(T=xn(N.type,N.key,N.props,null,f.mode,T),T.ref=Bs(f,u,N),T.return=f,T)}function m(f,u,N,T){return u===null||u.tag!==4||u.stateNode.containerInfo!==N.containerInfo||u.stateNode.implementation!==N.implementation?(u=ql(N,f.mode,T),u.return=f,u):(u=n(u,N.children||[]),u.return=f,u)}function L(f,u,N,T,J){return u===null||u.tag!==7?(u=Ir(N,f.mode,T,J),u.return=f,u):(u=n(u,N),u.return=f,u)}function x(f,u,N){if(typeof u=="string"&&u!==""||typeof u=="number")return u=Vl(""+u,f.mode,N),u.return=f,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Fa:return N=xn(u.type,u.key,u.props,null,f.mode,N),N.ref=Bs(f,null,u),N.return=f,N;case Jr:return u=ql(u,f.mode,N),u.return=f,u;case er:var T=u._init;return x(f,T(u._payload),N)}if(Ws(u)||Ds(u))return u=Ir(u,f.mode,N,null),u.return=f,u;Ja(f,u)}return null}function y(f,u,N,T){var J=u!==null?u.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return J!==null?null:c(f,u,""+N,T);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fa:return N.key===J?d(f,u,N,T):null;case Jr:return N.key===J?m(f,u,N,T):null;case er:return J=N._init,y(f,u,J(N._payload),T)}if(Ws(N)||Ds(N))return J!==null?null:L(f,u,N,T,null);Ja(f,N)}return null}function $(f,u,N,T,J){if(typeof T=="string"&&T!==""||typeof T=="number")return f=f.get(N)||null,c(u,f,""+T,J);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fa:return f=f.get(T.key===null?N:T.key)||null,d(u,f,T,J);case Jr:return f=f.get(T.key===null?N:T.key)||null,m(u,f,T,J);case er:var z=T._init;return $(f,u,N,z(T._payload),J)}if(Ws(T)||Ds(T))return f=f.get(N)||null,L(u,f,T,J,null);Ja(u,T)}return null}function Y(f,u,N,T){for(var J=null,z=null,I=u,O=u=0,U=null;I!==null&&O<N.length;O++){I.index>O?(U=I,I=null):U=I.sibling;var E=y(f,I,N[O],T);if(E===null){I===null&&(I=U);break}e&&I&&E.alternate===null&&t(f,I),u=l(E,u,O),z===null?J=E:z.sibling=E,z=E,I=U}if(O===N.length)return s(f,I),Ne&&Sr(f,O),J;if(I===null){for(;O<N.length;O++)I=x(f,N[O],T),I!==null&&(u=l(I,u,O),z===null?J=I:z.sibling=I,z=I);return Ne&&Sr(f,O),J}for(I=a(f,I);O<N.length;O++)U=$(I,f,O,N[O],T),U!==null&&(e&&U.alternate!==null&&I.delete(U.key===null?O:U.key),u=l(U,u,O),z===null?J=U:z.sibling=U,z=U);return e&&I.forEach(function(Q){return t(f,Q)}),Ne&&Sr(f,O),J}function G(f,u,N,T){var J=Ds(N);if(typeof J!="function")throw Error(ie(150));if(N=J.call(N),N==null)throw Error(ie(151));for(var z=J=null,I=u,O=u=0,U=null,E=N.next();I!==null&&!E.done;O++,E=N.next()){I.index>O?(U=I,I=null):U=I.sibling;var Q=y(f,I,E.value,T);if(Q===null){I===null&&(I=U);break}e&&I&&Q.alternate===null&&t(f,I),u=l(Q,u,O),z===null?J=Q:z.sibling=Q,z=Q,I=U}if(E.done)return s(f,I),Ne&&Sr(f,O),J;if(I===null){for(;!E.done;O++,E=N.next())E=x(f,E.value,T),E!==null&&(u=l(E,u,O),z===null?J=E:z.sibling=E,z=E);return Ne&&Sr(f,O),J}for(I=a(f,I);!E.done;O++,E=N.next())E=$(I,f,O,E.value,T),E!==null&&(e&&E.alternate!==null&&I.delete(E.key===null?O:E.key),u=l(E,u,O),z===null?J=E:z.sibling=E,z=E);return e&&I.forEach(function(W){return t(f,W)}),Ne&&Sr(f,O),J}function M(f,u,N,T){if(typeof N=="object"&&N!==null&&N.type===Gr&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Fa:e:{for(var J=N.key,z=u;z!==null;){if(z.key===J){if(J=N.type,J===Gr){if(z.tag===7){s(f,z.sibling),u=n(z,N.props.children),u.return=f,f=u;break e}}else if(z.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===er&&sc(J)===z.type){s(f,z.sibling),u=n(z,N.props),u.ref=Bs(f,z,N),u.return=f,f=u;break e}s(f,z);break}else t(f,z);z=z.sibling}N.type===Gr?(u=Ir(N.props.children,f.mode,T,N.key),u.return=f,f=u):(T=xn(N.type,N.key,N.props,null,f.mode,T),T.ref=Bs(f,u,N),T.return=f,f=T)}return o(f);case Jr:e:{for(z=N.key;u!==null;){if(u.key===z)if(u.tag===4&&u.stateNode.containerInfo===N.containerInfo&&u.stateNode.implementation===N.implementation){s(f,u.sibling),u=n(u,N.children||[]),u.return=f,f=u;break e}else{s(f,u);break}else t(f,u);u=u.sibling}u=ql(N,f.mode,T),u.return=f,f=u}return o(f);case er:return z=N._init,M(f,u,z(N._payload),T)}if(Ws(N))return Y(f,u,N,T);if(Ds(N))return G(f,u,N,T);Ja(f,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,u!==null&&u.tag===6?(s(f,u.sibling),u=n(u,N),u.return=f,f=u):(s(f,u),u=Vl(N,f.mode,T),u.return=f,f=u),o(f)):s(f,u)}return M}var bs=gm(!0),bm=gm(!1),Pa={},Ft=yr(Pa),fa=yr(Pa),ga=yr(Pa);function Pr(e){if(e===Pa)throw Error(ie(174));return e}function Ti(e,t){switch(ve(ga,t),ve(fa,e),ve(Ft,Pa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:uo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=uo(t,e)}je(Ft),ve(Ft,t)}function vs(){je(Ft),je(fa),je(ga)}function vm(e){Pr(ga.current);var t=Pr(Ft.current),s=uo(t,e.type);t!==s&&(ve(fa,e),ve(Ft,s))}function Pi(e){fa.current===e&&(je(Ft),je(fa))}var Se=yr(0);function In(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ol=[];function Ai(){for(var e=0;e<Ol.length;e++)Ol[e]._workInProgressVersionPrimary=null;Ol.length=0}var dn=Qt.ReactCurrentDispatcher,Fl=Qt.ReactCurrentBatchConfig,Mr=0,ke=null,Me=null,Re=null,Ln=!1,ta=!1,ba=0,hh=0;function Ue(){throw Error(ie(321))}function Ii(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!It(e[s],t[s]))return!1;return!0}function Li(e,t,s,a,n,l){if(Mr=l,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dn.current=e===null||e.memoizedState===null?vh:wh,e=s(a,n),ta){l=0;do{if(ta=!1,ba=0,25<=l)throw Error(ie(301));l+=1,Re=Me=null,t.updateQueue=null,dn.current=yh,e=s(a,n)}while(ta)}if(dn.current=_n,t=Me!==null&&Me.next!==null,Mr=0,Re=Me=ke=null,Ln=!1,t)throw Error(ie(300));return e}function _i(){var e=ba!==0;return ba=0,e}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ke.memoizedState=Re=e:Re=Re.next=e,Re}function Nt(){if(Me===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=Re===null?ke.memoizedState:Re.next;if(t!==null)Re=t,Me=e;else{if(e===null)throw Error(ie(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Re===null?ke.memoizedState=Re=e:Re=Re.next=e}return Re}function va(e,t){return typeof t=="function"?t(e):t}function Rl(e){var t=Nt(),s=t.queue;if(s===null)throw Error(ie(311));s.lastRenderedReducer=e;var a=Me,n=a.baseQueue,l=s.pending;if(l!==null){if(n!==null){var o=n.next;n.next=l.next,l.next=o}a.baseQueue=n=l,s.pending=null}if(n!==null){l=n.next,a=a.baseState;var c=o=null,d=null,m=l;do{var L=m.lane;if((Mr&L)===L)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),a=m.hasEagerState?m.eagerState:e(a,m.action);else{var x={lane:L,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(c=d=x,o=a):d=d.next=x,ke.lanes|=L,Or|=L}m=m.next}while(m!==null&&m!==l);d===null?o=a:d.next=c,It(a,t.memoizedState)||(st=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=d,s.lastRenderedState=a}if(e=s.interleaved,e!==null){n=e;do l=n.lane,ke.lanes|=l,Or|=l,n=n.next;while(n!==e)}else n===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Bl(e){var t=Nt(),s=t.queue;if(s===null)throw Error(ie(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,l=t.memoizedState;if(n!==null){s.pending=null;var o=n=n.next;do l=e(l,o.action),o=o.next;while(o!==n);It(l,t.memoizedState)||(st=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),s.lastRenderedState=l}return[l,a]}function wm(){}function ym(e,t){var s=ke,a=Nt(),n=t(),l=!It(a.memoizedState,n);if(l&&(a.memoizedState=n,st=!0),a=a.queue,Di(Cm.bind(null,s,a,e),[e]),a.getSnapshot!==t||l||Re!==null&&Re.memoizedState.tag&1){if(s.flags|=2048,wa(9,Nm.bind(null,s,a,n,t),void 0,null),Be===null)throw Error(ie(349));Mr&30||jm(s,t,n)}return n}function jm(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Nm(e,t,s,a){t.value=s,t.getSnapshot=a,Sm(t)&&km(e)}function Cm(e,t,s){return s(function(){Sm(t)&&km(e)})}function Sm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!It(e,s)}catch{return!0}}function km(e){var t=Jt(e,1);t!==null&&At(t,e,1,-1)}function ac(e){var t=_t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=bh.bind(null,ke,e),[t.memoizedState,e]}function wa(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function Em(){return Nt().memoizedState}function cn(e,t,s,a){var n=_t();ke.flags|=e,n.memoizedState=wa(1|t,s,void 0,a===void 0?null:a)}function sl(e,t,s,a){var n=Nt();a=a===void 0?null:a;var l=void 0;if(Me!==null){var o=Me.memoizedState;if(l=o.destroy,a!==null&&Ii(a,o.deps)){n.memoizedState=wa(t,s,l,a);return}}ke.flags|=e,n.memoizedState=wa(1|t,s,l,a)}function nc(e,t){return cn(8390656,8,e,t)}function Di(e,t){return sl(2048,8,e,t)}function Tm(e,t){return sl(4,2,e,t)}function Pm(e,t){return sl(4,4,e,t)}function Am(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Im(e,t,s){return s=s!=null?s.concat([e]):null,sl(4,4,Am.bind(null,t,e),s)}function Mi(){}function Lm(e,t){var s=Nt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Ii(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function _m(e,t){var s=Nt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Ii(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Dm(e,t,s){return Mr&21?(It(s,t)||(s=Fu(),ke.lanes|=s,Or|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=s)}function fh(e,t){var s=be;be=s!==0&&4>s?s:4,e(!0);var a=Fl.transition;Fl.transition={};try{e(!1),t()}finally{be=s,Fl.transition=a}}function Mm(){return Nt().memoizedState}function gh(e,t,s){var a=hr(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Om(e))Fm(t,s);else if(s=pm(e,t,s,a),s!==null){var n=Ye();At(s,e,a,n),Rm(s,t,a)}}function bh(e,t,s){var a=hr(e),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Om(e))Fm(t,n);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,s);if(n.hasEagerState=!0,n.eagerState=c,It(c,o)){var d=t.interleaved;d===null?(n.next=n,ki(t)):(n.next=d.next,d.next=n),t.interleaved=n;return}}catch{}finally{}s=pm(e,t,n,a),s!==null&&(n=Ye(),At(s,e,a,n),Rm(s,t,a))}}function Om(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Fm(e,t){ta=Ln=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Rm(e,t,s){if(s&4194240){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,mi(e,s)}}var _n={readContext:jt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},vh={readContext:jt,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:nc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,cn(4194308,4,Am.bind(null,t,e),s)},useLayoutEffect:function(e,t){return cn(4194308,4,e,t)},useInsertionEffect:function(e,t){return cn(4,2,e,t)},useMemo:function(e,t){var s=_t();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=_t();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=gh.bind(null,ke,e),[a.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:ac,useDebugValue:Mi,useDeferredValue:function(e){return _t().memoizedState=e},useTransition:function(){var e=ac(!1),t=e[0];return e=fh.bind(null,e[1]),_t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=ke,n=_t();if(Ne){if(s===void 0)throw Error(ie(407));s=s()}else{if(s=t(),Be===null)throw Error(ie(349));Mr&30||jm(a,t,s)}n.memoizedState=s;var l={value:s,getSnapshot:t};return n.queue=l,nc(Cm.bind(null,a,l,e),[e]),a.flags|=2048,wa(9,Nm.bind(null,a,l,s,t),void 0,null),s},useId:function(){var e=_t(),t=Be.identifierPrefix;if(Ne){var s=qt,a=Vt;s=(a&~(1<<32-Pt(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=ba++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=hh++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wh={readContext:jt,useCallback:Lm,useContext:jt,useEffect:Di,useImperativeHandle:Im,useInsertionEffect:Tm,useLayoutEffect:Pm,useMemo:_m,useReducer:Rl,useRef:Em,useState:function(){return Rl(va)},useDebugValue:Mi,useDeferredValue:function(e){var t=Nt();return Dm(t,Me.memoizedState,e)},useTransition:function(){var e=Rl(va)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:wm,useSyncExternalStore:ym,useId:Mm,unstable_isNewReconciler:!1},yh={readContext:jt,useCallback:Lm,useContext:jt,useEffect:Di,useImperativeHandle:Im,useInsertionEffect:Tm,useLayoutEffect:Pm,useMemo:_m,useReducer:Bl,useRef:Em,useState:function(){return Bl(va)},useDebugValue:Mi,useDeferredValue:function(e){var t=Nt();return Me===null?t.memoizedState=e:Dm(t,Me.memoizedState,e)},useTransition:function(){var e=Bl(va)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:wm,useSyncExternalStore:ym,useId:Mm,unstable_isNewReconciler:!1};function ws(e,t){try{var s="",a=t;do s+=Gp(a),a=a.return;while(a);var n=s}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:n,digest:null}}function $l(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Do(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var jh=typeof WeakMap=="function"?WeakMap:Map;function Bm(e,t,s){s=Ut(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Mn||(Mn=!0,Uo=a),Do(e,t)},s}function $m(e,t,s){s=Ut(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;s.payload=function(){return a(n)},s.callback=function(){Do(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){Do(e,t),typeof a!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function lc(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new jh;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(s)||(n.add(s),e=Oh.bind(null,e,t,s),t.then(e,e))}function oc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ic(e,t,s,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Ut(-1,1),t.tag=2,pr(s,t,1))),s.lanes|=1),e)}var Nh=Qt.ReactCurrentOwner,st=!1;function Qe(e,t,s,a){t.child=e===null?bm(t,null,s,a):bs(t,e.child,s,a)}function dc(e,t,s,a,n){s=s.render;var l=t.ref;return cs(t,n),a=Li(e,t,s,a,l,n),s=_i(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Gt(e,t,n)):(Ne&&s&&wi(t),t.flags|=1,Qe(e,t,a,n),t.child)}function cc(e,t,s,a,n){if(e===null){var l=s.type;return typeof l=="function"&&!qi(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=l,zm(e,t,l,a,n)):(e=xn(s.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&n)){var o=l.memoizedProps;if(s=s.compare,s=s!==null?s:ma,s(o,a)&&e.ref===t.ref)return Gt(e,t,n)}return t.flags|=1,e=fr(l,a),e.ref=t.ref,e.return=t,t.child=e}function zm(e,t,s,a,n){if(e!==null){var l=e.memoizedProps;if(ma(l,a)&&e.ref===t.ref)if(st=!1,t.pendingProps=a=l,(e.lanes&n)!==0)e.flags&131072&&(st=!0);else return t.lanes=e.lanes,Gt(e,t,n)}return Mo(e,t,s,a,n)}function Vm(e,t,s){var a=t.pendingProps,n=a.children,l=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(ns,dt),dt|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(ns,dt),dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:s,ve(ns,dt),dt|=a}else l!==null?(a=l.baseLanes|s,t.memoizedState=null):a=s,ve(ns,dt),dt|=a;return Qe(e,t,n,s),t.child}function qm(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Mo(e,t,s,a,n){var l=nt(s)?_r:We.current;return l=fs(t,l),cs(t,n),s=Li(e,t,s,a,l,n),a=_i(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Gt(e,t,n)):(Ne&&a&&wi(t),t.flags|=1,Qe(e,t,s,n),t.child)}function uc(e,t,s,a,n){if(nt(s)){var l=!0;Sn(t)}else l=!1;if(cs(t,n),t.stateNode===null)un(e,t),fm(t,s,a),_o(t,s,a,n),a=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,m=s.contextType;typeof m=="object"&&m!==null?m=jt(m):(m=nt(s)?_r:We.current,m=fs(t,m));var L=s.getDerivedStateFromProps,x=typeof L=="function"||typeof o.getSnapshotBeforeUpdate=="function";x||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==a||d!==m)&&rc(t,o,a,m),tr=!1;var y=t.memoizedState;o.state=y,An(t,a,o,n),d=t.memoizedState,c!==a||y!==d||at.current||tr?(typeof L=="function"&&(Lo(t,s,L,a),d=t.memoizedState),(c=tr||tc(t,s,c,a,y,d,m))?(x||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),o.props=a,o.state=d,o.context=m,a=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,xm(e,t),c=t.memoizedProps,m=t.type===t.elementType?c:kt(t.type,c),o.props=m,x=t.pendingProps,y=o.context,d=s.contextType,typeof d=="object"&&d!==null?d=jt(d):(d=nt(s)?_r:We.current,d=fs(t,d));var $=s.getDerivedStateFromProps;(L=typeof $=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==x||y!==d)&&rc(t,o,a,d),tr=!1,y=t.memoizedState,o.state=y,An(t,a,o,n);var Y=t.memoizedState;c!==x||y!==Y||at.current||tr?(typeof $=="function"&&(Lo(t,s,$,a),Y=t.memoizedState),(m=tr||tc(t,s,m,a,y,Y,d)||!1)?(L||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,Y,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,Y,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Y),o.props=a,o.state=Y,o.context=d,a=m):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),a=!1)}return Oo(e,t,s,a,l,n)}function Oo(e,t,s,a,n,l){qm(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return n&&Qd(t,s,!1),Gt(e,t,l);a=t.stateNode,Nh.current=t;var c=o&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=bs(t,e.child,null,l),t.child=bs(t,null,c,l)):Qe(e,t,c,l),t.memoizedState=a.state,n&&Qd(t,s,!0),t.child}function Um(e){var t=e.stateNode;t.pendingContext?Gd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gd(e,t.context,!1),Ti(e,t.containerInfo)}function mc(e,t,s,a,n){return gs(),ji(n),t.flags|=256,Qe(e,t,s,a),t.child}var Fo={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hm(e,t,s){var a=t.pendingProps,n=Se.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(n&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ve(Se,n&1),e===null)return Ao(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=ll(o,a,0,null),e=Ir(e,a,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ro(s),t.memoizedState=Fo,e):Oi(t,o));if(n=e.memoizedState,n!==null&&(c=n.dehydrated,c!==null))return Ch(e,t,o,a,c,n,s);if(l){l=a.fallback,o=t.mode,n=e.child,c=n.sibling;var d={mode:"hidden",children:a.children};return!(o&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=fr(n,d),a.subtreeFlags=n.subtreeFlags&14680064),c!==null?l=fr(c,l):(l=Ir(l,o,s,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=e.child.memoizedState,o=o===null?Ro(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Fo,a}return l=e.child,e=l.sibling,a=fr(l,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function Oi(e,t){return t=ll({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ga(e,t,s,a){return a!==null&&ji(a),bs(t,e.child,null,s),e=Oi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ch(e,t,s,a,n,l,o){if(s)return t.flags&256?(t.flags&=-257,a=$l(Error(ie(422))),Ga(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=a.fallback,n=t.mode,a=ll({mode:"visible",children:a.children},n,0,null),l=Ir(l,n,o,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,t.mode&1&&bs(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Fo,l);if(!(t.mode&1))return Ga(e,t,o,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(ie(419)),a=$l(l,a,void 0),Ga(e,t,o,a)}if(c=(o&e.childLanes)!==0,st||c){if(a=Be,a!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|o)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Jt(e,n),At(a,e,n,-1))}return Vi(),a=$l(Error(ie(421))),Ga(e,t,o,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Fh.bind(null,e),n._reactRetry=t,null):(e=l.treeContext,ct=mr(n.nextSibling),ut=t,Ne=!0,Tt=null,e!==null&&(bt[vt++]=Vt,bt[vt++]=qt,bt[vt++]=Dr,Vt=e.id,qt=e.overflow,Dr=t),t=Oi(t,a.children),t.flags|=4096,t)}function pc(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Io(e.return,t,s)}function zl(e,t,s,a,n){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=s,l.tailMode=n)}function Km(e,t,s){var a=t.pendingProps,n=a.revealOrder,l=a.tail;if(Qe(e,t,a.children,s),a=Se.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pc(e,s,t);else if(e.tag===19)pc(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ve(Se,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&In(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),zl(t,!1,n,s,l);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&In(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}zl(t,!0,s,null,l);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function un(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,s=fr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=fr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Sh(e,t,s){switch(t.tag){case 3:Um(t),gs();break;case 5:vm(t);break;case 1:nt(t.type)&&Sn(t);break;case 4:Ti(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;ve(Tn,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ve(Se,Se.current&1),t.flags|=128,null):s&t.child.childLanes?Hm(e,t,s):(ve(Se,Se.current&1),e=Gt(e,t,s),e!==null?e.sibling:null);ve(Se,Se.current&1);break;case 19:if(a=(s&t.childLanes)!==0,e.flags&128){if(a)return Km(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ve(Se,Se.current),a)break;return null;case 22:case 23:return t.lanes=0,Vm(e,t,s)}return Gt(e,t,s)}var Wm,Bo,Jm,Gm;Wm=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bo=function(){};Jm=function(e,t,s,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Pr(Ft.current);var l=null;switch(s){case"input":n=lo(e,n),a=lo(e,a),l=[];break;case"select":n=Ee({},n,{value:void 0}),a=Ee({},a,{value:void 0}),l=[];break;case"textarea":n=co(e,n),a=co(e,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Nn)}mo(s,a);var o;s=null;for(m in n)if(!a.hasOwnProperty(m)&&n.hasOwnProperty(m)&&n[m]!=null)if(m==="style"){var c=n[m];for(o in c)c.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(na.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in a){var d=a[m];if(c=n!=null?n[m]:void 0,a.hasOwnProperty(m)&&d!==c&&(d!=null||c!=null))if(m==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(s||(s={}),s[o]=d[o])}else s||(l||(l=[]),l.push(m,s)),s=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(na.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&ye("scroll",e),l||c===d||(l=[])):(l=l||[]).push(m,d))}s&&(l=l||[]).push("style",s);var m=l;(t.updateQueue=m)&&(t.flags|=4)}};Gm=function(e,t,s,a){s!==a&&(t.flags|=4)};function $s(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function kh(e,t,s){var a=t.pendingProps;switch(yi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return nt(t.type)&&Cn(),He(t),null;case 3:return a=t.stateNode,vs(),je(at),je(We),Ai(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Wa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(Wo(Tt),Tt=null))),Bo(e,t),He(t),null;case 5:Pi(t);var n=Pr(ga.current);if(s=t.type,e!==null&&t.stateNode!=null)Jm(e,t,s,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(ie(166));return He(t),null}if(e=Pr(Ft.current),Wa(t)){a=t.stateNode,s=t.type;var l=t.memoizedProps;switch(a[Mt]=t,a[ha]=l,e=(t.mode&1)!==0,s){case"dialog":ye("cancel",a),ye("close",a);break;case"iframe":case"object":case"embed":ye("load",a);break;case"video":case"audio":for(n=0;n<Gs.length;n++)ye(Gs[n],a);break;case"source":ye("error",a);break;case"img":case"image":case"link":ye("error",a),ye("load",a);break;case"details":ye("toggle",a);break;case"input":jd(a,l),ye("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},ye("invalid",a);break;case"textarea":Cd(a,l),ye("invalid",a)}mo(s,l),n=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&Ka(a.textContent,c,e),n=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Ka(a.textContent,c,e),n=["children",""+c]):na.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ye("scroll",a)}switch(s){case"input":Ra(a),Nd(a,l,!0);break;case"textarea":Ra(a),Sd(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Nn)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ju(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(s,{is:a.is}):(e=o.createElement(s),s==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,s),e[Mt]=t,e[ha]=a,Wm(e,t,!1,!1),t.stateNode=e;e:{switch(o=po(s,a),s){case"dialog":ye("cancel",e),ye("close",e),n=a;break;case"iframe":case"object":case"embed":ye("load",e),n=a;break;case"video":case"audio":for(n=0;n<Gs.length;n++)ye(Gs[n],e);n=a;break;case"source":ye("error",e),n=a;break;case"img":case"image":case"link":ye("error",e),ye("load",e),n=a;break;case"details":ye("toggle",e),n=a;break;case"input":jd(e,a),n=lo(e,a),ye("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=Ee({},a,{value:void 0}),ye("invalid",e);break;case"textarea":Cd(e,a),n=co(e,a),ye("invalid",e);break;default:n=a}mo(s,n),c=n;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?Su(e,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Nu(e,d)):l==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&la(e,d):typeof d=="number"&&la(e,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(na.hasOwnProperty(l)?d!=null&&l==="onScroll"&&ye("scroll",e):d!=null&&li(e,l,d,o))}switch(s){case"input":Ra(e),Nd(e,a,!1);break;case"textarea":Ra(e),Sd(e);break;case"option":a.value!=null&&e.setAttribute("value",""+br(a.value));break;case"select":e.multiple=!!a.multiple,l=a.value,l!=null?ls(e,!!a.multiple,l,!1):a.defaultValue!=null&&ls(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Nn)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return He(t),null;case 6:if(e&&t.stateNode!=null)Gm(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(ie(166));if(s=Pr(ga.current),Pr(Ft.current),Wa(t)){if(a=t.stateNode,s=t.memoizedProps,a[Mt]=t,(l=a.nodeValue!==s)&&(e=ut,e!==null))switch(e.tag){case 3:Ka(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ka(a.nodeValue,s,(e.mode&1)!==0)}l&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Mt]=t,t.stateNode=a}return He(t),null;case 13:if(je(Se),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&ct!==null&&t.mode&1&&!(t.flags&128))mm(),gs(),t.flags|=98560,l=!1;else if(l=Wa(t),a!==null&&a.dehydrated!==null){if(e===null){if(!l)throw Error(ie(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ie(317));l[Mt]=t}else gs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;He(t),l=!1}else Tt!==null&&(Wo(Tt),Tt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?Oe===0&&(Oe=3):Vi())),t.updateQueue!==null&&(t.flags|=4),He(t),null);case 4:return vs(),Bo(e,t),e===null&&pa(t.stateNode.containerInfo),He(t),null;case 10:return Si(t.type._context),He(t),null;case 17:return nt(t.type)&&Cn(),He(t),null;case 19:if(je(Se),l=t.memoizedState,l===null)return He(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)$s(l,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=In(e),o!==null){for(t.flags|=128,$s(l,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)l=s,e=a,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ve(Se,Se.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ae()>ys&&(t.flags|=128,a=!0,$s(l,!1),t.lanes=4194304)}else{if(!a)if(e=In(o),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),$s(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ne)return He(t),null}else 2*Ae()-l.renderingStartTime>ys&&s!==1073741824&&(t.flags|=128,a=!0,$s(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ae(),t.sibling=null,s=Se.current,ve(Se,a?s&1|2:s&1),t):(He(t),null);case 22:case 23:return zi(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?dt&1073741824&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function Eh(e,t){switch(yi(t),t.tag){case 1:return nt(t.type)&&Cn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vs(),je(at),je(We),Ai(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pi(t),null;case 13:if(je(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));gs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(Se),null;case 4:return vs(),null;case 10:return Si(t.type._context),null;case 22:case 23:return zi(),null;case 24:return null;default:return null}}var Qa=!1,Ke=!1,Th=typeof WeakSet=="function"?WeakSet:Set,ce=null;function as(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Te(e,t,a)}else s.current=null}function $o(e,t,s){try{s()}catch(a){Te(e,t,a)}}var xc=!1;function Ph(e,t){if(No=wn,e=Zu(),vi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var o=0,c=-1,d=-1,m=0,L=0,x=e,y=null;t:for(;;){for(var $;x!==s||n!==0&&x.nodeType!==3||(c=o+n),x!==l||a!==0&&x.nodeType!==3||(d=o+a),x.nodeType===3&&(o+=x.nodeValue.length),($=x.firstChild)!==null;)y=x,x=$;for(;;){if(x===e)break t;if(y===s&&++m===n&&(c=o),y===l&&++L===a&&(d=o),($=x.nextSibling)!==null)break;x=y,y=x.parentNode}x=$}s=c===-1||d===-1?null:{start:c,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(Co={focusedElem:e,selectionRange:s},wn=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var Y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var G=Y.memoizedProps,M=Y.memoizedState,f=t.stateNode,u=f.getSnapshotBeforeUpdate(t.elementType===t.type?G:kt(t.type,G),M);f.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(T){Te(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return Y=xc,xc=!1,Y}function ra(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var l=n.destroy;n.destroy=void 0,l!==void 0&&$o(t,s,l)}n=n.next}while(n!==a)}}function al(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function zo(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Qm(e){var t=e.alternate;t!==null&&(e.alternate=null,Qm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[ha],delete t[Eo],delete t[uh],delete t[mh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ym(e){return e.tag===5||e.tag===3||e.tag===4}function hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ym(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vo(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Nn));else if(a!==4&&(e=e.child,e!==null))for(Vo(e,t,s),e=e.sibling;e!==null;)Vo(e,t,s),e=e.sibling}function qo(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(qo(e,t,s),e=e.sibling;e!==null;)qo(e,t,s),e=e.sibling}var ze=null,Et=!1;function Zt(e,t,s){for(s=s.child;s!==null;)Xm(e,t,s),s=s.sibling}function Xm(e,t,s){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Qn,s)}catch{}switch(s.tag){case 5:Ke||as(s,t);case 6:var a=ze,n=Et;ze=null,Zt(e,t,s),ze=a,Et=n,ze!==null&&(Et?(e=ze,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):ze.removeChild(s.stateNode));break;case 18:ze!==null&&(Et?(e=ze,s=s.stateNode,e.nodeType===8?Dl(e.parentNode,s):e.nodeType===1&&Dl(e,s),ca(e)):Dl(ze,s.stateNode));break;case 4:a=ze,n=Et,ze=s.stateNode.containerInfo,Et=!0,Zt(e,t,s),ze=a,Et=n;break;case 0:case 11:case 14:case 15:if(!Ke&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&$o(s,t,o),n=n.next}while(n!==a)}Zt(e,t,s);break;case 1:if(!Ke&&(as(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(c){Te(s,t,c)}Zt(e,t,s);break;case 21:Zt(e,t,s);break;case 22:s.mode&1?(Ke=(a=Ke)||s.memoizedState!==null,Zt(e,t,s),Ke=a):Zt(e,t,s);break;default:Zt(e,t,s)}}function fc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Th),t.forEach(function(a){var n=Rh.bind(null,e,a);s.has(a)||(s.add(a),a.then(n,n))})}}function St(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:ze=c.stateNode,Et=!1;break e;case 3:ze=c.stateNode.containerInfo,Et=!0;break e;case 4:ze=c.stateNode.containerInfo,Et=!0;break e}c=c.return}if(ze===null)throw Error(ie(160));Xm(l,o,n),ze=null,Et=!1;var d=n.alternate;d!==null&&(d.return=null),n.return=null}catch(m){Te(n,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zm(t,e),t=t.sibling}function Zm(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(St(t,e),Lt(e),a&4){try{ra(3,e,e.return),al(3,e)}catch(G){Te(e,e.return,G)}try{ra(5,e,e.return)}catch(G){Te(e,e.return,G)}}break;case 1:St(t,e),Lt(e),a&512&&s!==null&&as(s,s.return);break;case 5:if(St(t,e),Lt(e),a&512&&s!==null&&as(s,s.return),e.flags&32){var n=e.stateNode;try{la(n,"")}catch(G){Te(e,e.return,G)}}if(a&4&&(n=e.stateNode,n!=null)){var l=e.memoizedProps,o=s!==null?s.memoizedProps:l,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&wu(n,l),po(c,o);var m=po(c,l);for(o=0;o<d.length;o+=2){var L=d[o],x=d[o+1];L==="style"?Su(n,x):L==="dangerouslySetInnerHTML"?Nu(n,x):L==="children"?la(n,x):li(n,L,x,m)}switch(c){case"input":oo(n,l);break;case"textarea":yu(n,l);break;case"select":var y=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var $=l.value;$!=null?ls(n,!!l.multiple,$,!1):y!==!!l.multiple&&(l.defaultValue!=null?ls(n,!!l.multiple,l.defaultValue,!0):ls(n,!!l.multiple,l.multiple?[]:"",!1))}n[ha]=l}catch(G){Te(e,e.return,G)}}break;case 6:if(St(t,e),Lt(e),a&4){if(e.stateNode===null)throw Error(ie(162));n=e.stateNode,l=e.memoizedProps;try{n.nodeValue=l}catch(G){Te(e,e.return,G)}}break;case 3:if(St(t,e),Lt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{ca(t.containerInfo)}catch(G){Te(e,e.return,G)}break;case 4:St(t,e),Lt(e);break;case 13:St(t,e),Lt(e),n=e.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(Bi=Ae())),a&4&&fc(e);break;case 22:if(L=s!==null&&s.memoizedState!==null,e.mode&1?(Ke=(m=Ke)||L,St(t,e),Ke=m):St(t,e),Lt(e),a&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!L&&e.mode&1)for(ce=e,L=e.child;L!==null;){for(x=ce=L;ce!==null;){switch(y=ce,$=y.child,y.tag){case 0:case 11:case 14:case 15:ra(4,y,y.return);break;case 1:as(y,y.return);var Y=y.stateNode;if(typeof Y.componentWillUnmount=="function"){a=y,s=y.return;try{t=a,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(G){Te(a,s,G)}}break;case 5:as(y,y.return);break;case 22:if(y.memoizedState!==null){bc(x);continue}}$!==null?($.return=y,ce=$):bc(x)}L=L.sibling}e:for(L=null,x=e;;){if(x.tag===5){if(L===null){L=x;try{n=x.stateNode,m?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=x.stateNode,d=x.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Cu("display",o))}catch(G){Te(e,e.return,G)}}}else if(x.tag===6){if(L===null)try{x.stateNode.nodeValue=m?"":x.memoizedProps}catch(G){Te(e,e.return,G)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;L===x&&(L=null),x=x.return}L===x&&(L=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:St(t,e),Lt(e),a&4&&fc(e);break;case 21:break;default:St(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Ym(s)){var a=s;break e}s=s.return}throw Error(ie(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(la(n,""),a.flags&=-33);var l=hc(e);qo(e,l,n);break;case 3:case 4:var o=a.stateNode.containerInfo,c=hc(e);Vo(e,c,o);break;default:throw Error(ie(161))}}catch(d){Te(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ah(e,t,s){ce=e,e0(e)}function e0(e,t,s){for(var a=(e.mode&1)!==0;ce!==null;){var n=ce,l=n.child;if(n.tag===22&&a){var o=n.memoizedState!==null||Qa;if(!o){var c=n.alternate,d=c!==null&&c.memoizedState!==null||Ke;c=Qa;var m=Ke;if(Qa=o,(Ke=d)&&!m)for(ce=n;ce!==null;)o=ce,d=o.child,o.tag===22&&o.memoizedState!==null?vc(n):d!==null?(d.return=o,ce=d):vc(n);for(;l!==null;)ce=l,e0(l),l=l.sibling;ce=n,Qa=c,Ke=m}gc(e)}else n.subtreeFlags&8772&&l!==null?(l.return=n,ce=l):gc(e)}}function gc(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ke||al(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ke)if(s===null)a.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:kt(t.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&ec(t,l,a);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}ec(t,o,s)}break;case 5:var c=t.stateNode;if(s===null&&t.flags&4){s=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var L=m.memoizedState;if(L!==null){var x=L.dehydrated;x!==null&&ca(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Ke||t.flags&512&&zo(t)}catch(y){Te(t,t.return,y)}}if(t===e){ce=null;break}if(s=t.sibling,s!==null){s.return=t.return,ce=s;break}ce=t.return}}function bc(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ce=s;break}ce=t.return}}function vc(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{al(4,t)}catch(d){Te(t,s,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(d){Te(t,n,d)}}var l=t.return;try{zo(t)}catch(d){Te(t,l,d)}break;case 5:var o=t.return;try{zo(t)}catch(d){Te(t,o,d)}}}catch(d){Te(t,t.return,d)}if(t===e){ce=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ce=c;break}ce=t.return}}var Ih=Math.ceil,Dn=Qt.ReactCurrentDispatcher,Fi=Qt.ReactCurrentOwner,yt=Qt.ReactCurrentBatchConfig,he=0,Be=null,_e=null,Ve=0,dt=0,ns=yr(0),Oe=0,ya=null,Or=0,nl=0,Ri=0,sa=null,rt=null,Bi=0,ys=1/0,$t=null,Mn=!1,Uo=null,xr=null,Ya=!1,nr=null,On=0,aa=0,Ho=null,mn=-1,pn=0;function Ye(){return he&6?Ae():mn!==-1?mn:mn=Ae()}function hr(e){return e.mode&1?he&2&&Ve!==0?Ve&-Ve:xh.transition!==null?(pn===0&&(pn=Fu()),pn):(e=be,e!==0||(e=window.event,e=e===void 0?16:Uu(e.type)),e):1}function At(e,t,s,a){if(50<aa)throw aa=0,Ho=null,Error(ie(185));ka(e,s,a),(!(he&2)||e!==Be)&&(e===Be&&(!(he&2)&&(nl|=s),Oe===4&&sr(e,Ve)),lt(e,a),s===1&&he===0&&!(t.mode&1)&&(ys=Ae()+500,tl&&jr()))}function lt(e,t){var s=e.callbackNode;xx(e,t);var a=vn(e,e===Be?Ve:0);if(a===0)s!==null&&Td(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&Td(s),t===1)e.tag===0?ph(wc.bind(null,e)):dm(wc.bind(null,e)),dh(function(){!(he&6)&&jr()}),s=null;else{switch(Ru(a)){case 1:s=ui;break;case 4:s=Mu;break;case 16:s=bn;break;case 536870912:s=Ou;break;default:s=bn}s=i0(s,t0.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function t0(e,t){if(mn=-1,pn=0,he&6)throw Error(ie(327));var s=e.callbackNode;if(us()&&e.callbackNode!==s)return null;var a=vn(e,e===Be?Ve:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Fn(e,a);else{t=a;var n=he;he|=2;var l=s0();(Be!==e||Ve!==t)&&($t=null,ys=Ae()+500,Ar(e,t));do try{Dh();break}catch(c){r0(e,c)}while(!0);Ci(),Dn.current=l,he=n,_e!==null?t=0:(Be=null,Ve=0,t=Oe)}if(t!==0){if(t===2&&(n=bo(e),n!==0&&(a=n,t=Ko(e,n))),t===1)throw s=ya,Ar(e,0),sr(e,a),lt(e,Ae()),s;if(t===6)sr(e,a);else{if(n=e.current.alternate,!(a&30)&&!Lh(n)&&(t=Fn(e,a),t===2&&(l=bo(e),l!==0&&(a=l,t=Ko(e,l))),t===1))throw s=ya,Ar(e,0),sr(e,a),lt(e,Ae()),s;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(ie(345));case 2:kr(e,rt,$t);break;case 3:if(sr(e,a),(a&130023424)===a&&(t=Bi+500-Ae(),10<t)){if(vn(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){Ye(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=ko(kr.bind(null,e,rt,$t),t);break}kr(e,rt,$t);break;case 4:if(sr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var o=31-Pt(a);l=1<<o,o=t[o],o>n&&(n=o),a&=~l}if(a=n,a=Ae()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ih(a/1960))-a,10<a){e.timeoutHandle=ko(kr.bind(null,e,rt,$t),a);break}kr(e,rt,$t);break;case 5:kr(e,rt,$t);break;default:throw Error(ie(329))}}}return lt(e,Ae()),e.callbackNode===s?t0.bind(null,e):null}function Ko(e,t){var s=sa;return e.current.memoizedState.isDehydrated&&(Ar(e,t).flags|=256),e=Fn(e,t),e!==2&&(t=rt,rt=s,t!==null&&Wo(t)),e}function Wo(e){rt===null?rt=e:rt.push.apply(rt,e)}function Lh(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var n=s[a],l=n.getSnapshot;n=n.value;try{if(!It(l(),n))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sr(e,t){for(t&=~Ri,t&=~nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Pt(t),a=1<<s;e[s]=-1,t&=~a}}function wc(e){if(he&6)throw Error(ie(327));us();var t=vn(e,0);if(!(t&1))return lt(e,Ae()),null;var s=Fn(e,t);if(e.tag!==0&&s===2){var a=bo(e);a!==0&&(t=a,s=Ko(e,a))}if(s===1)throw s=ya,Ar(e,0),sr(e,t),lt(e,Ae()),s;if(s===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kr(e,rt,$t),lt(e,Ae()),null}function $i(e,t){var s=he;he|=1;try{return e(t)}finally{he=s,he===0&&(ys=Ae()+500,tl&&jr())}}function Fr(e){nr!==null&&nr.tag===0&&!(he&6)&&us();var t=he;he|=1;var s=yt.transition,a=be;try{if(yt.transition=null,be=1,e)return e()}finally{be=a,yt.transition=s,he=t,!(he&6)&&jr()}}function zi(){dt=ns.current,je(ns)}function Ar(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,ih(s)),_e!==null)for(s=_e.return;s!==null;){var a=s;switch(yi(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Cn();break;case 3:vs(),je(at),je(We),Ai();break;case 5:Pi(a);break;case 4:vs();break;case 13:je(Se);break;case 19:je(Se);break;case 10:Si(a.type._context);break;case 22:case 23:zi()}s=s.return}if(Be=e,_e=e=fr(e.current,null),Ve=dt=t,Oe=0,ya=null,Ri=nl=Or=0,rt=sa=null,Tr!==null){for(t=0;t<Tr.length;t++)if(s=Tr[t],a=s.interleaved,a!==null){s.interleaved=null;var n=a.next,l=s.pending;if(l!==null){var o=l.next;l.next=n,a.next=o}s.pending=a}Tr=null}return e}function r0(e,t){do{var s=_e;try{if(Ci(),dn.current=_n,Ln){for(var a=ke.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Ln=!1}if(Mr=0,Re=Me=ke=null,ta=!1,ba=0,Fi.current=null,s===null||s.return===null){Oe=1,ya=t,_e=null;break}e:{var l=e,o=s.return,c=s,d=t;if(t=Ve,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,L=c,x=L.tag;if(!(L.mode&1)&&(x===0||x===11||x===15)){var y=L.alternate;y?(L.updateQueue=y.updateQueue,L.memoizedState=y.memoizedState,L.lanes=y.lanes):(L.updateQueue=null,L.memoizedState=null)}var $=oc(o);if($!==null){$.flags&=-257,ic($,o,c,l,t),$.mode&1&&lc(l,m,t),t=$,d=m;var Y=t.updateQueue;if(Y===null){var G=new Set;G.add(d),t.updateQueue=G}else Y.add(d);break e}else{if(!(t&1)){lc(l,m,t),Vi();break e}d=Error(ie(426))}}else if(Ne&&c.mode&1){var M=oc(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),ic(M,o,c,l,t),ji(ws(d,c));break e}}l=d=ws(d,c),Oe!==4&&(Oe=2),sa===null?sa=[l]:sa.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=Bm(l,d,t);Zd(l,f);break e;case 1:c=d;var u=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof u.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(xr===null||!xr.has(N)))){l.flags|=65536,t&=-t,l.lanes|=t;var T=$m(l,c,t);Zd(l,T);break e}}l=l.return}while(l!==null)}n0(s)}catch(J){t=J,_e===s&&s!==null&&(_e=s=s.return);continue}break}while(!0)}function s0(){var e=Dn.current;return Dn.current=_n,e===null?_n:e}function Vi(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Be===null||!(Or&268435455)&&!(nl&268435455)||sr(Be,Ve)}function Fn(e,t){var s=he;he|=2;var a=s0();(Be!==e||Ve!==t)&&($t=null,Ar(e,t));do try{_h();break}catch(n){r0(e,n)}while(!0);if(Ci(),he=s,Dn.current=a,_e!==null)throw Error(ie(261));return Be=null,Ve=0,Oe}function _h(){for(;_e!==null;)a0(_e)}function Dh(){for(;_e!==null&&!nx();)a0(_e)}function a0(e){var t=o0(e.alternate,e,dt);e.memoizedProps=e.pendingProps,t===null?n0(e):_e=t,Fi.current=null}function n0(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Eh(s,t),s!==null){s.flags&=32767,_e=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,_e=null;return}}else if(s=kh(s,t,dt),s!==null){_e=s;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Oe===0&&(Oe=5)}function kr(e,t,s){var a=be,n=yt.transition;try{yt.transition=null,be=1,Mh(e,t,s,a)}finally{yt.transition=n,be=a}return null}function Mh(e,t,s,a){do us();while(nr!==null);if(he&6)throw Error(ie(327));s=e.finishedWork;var n=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(hx(e,l),e===Be&&(_e=Be=null,Ve=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ya||(Ya=!0,i0(bn,function(){return us(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=yt.transition,yt.transition=null;var o=be;be=1;var c=he;he|=4,Fi.current=null,Ph(e,s),Zm(s,e),th(Co),wn=!!No,Co=No=null,e.current=s,Ah(s),lx(),he=c,be=o,yt.transition=l}else e.current=s;if(Ya&&(Ya=!1,nr=e,On=n),l=e.pendingLanes,l===0&&(xr=null),dx(s.stateNode),lt(e,Ae()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(Mn)throw Mn=!1,e=Uo,Uo=null,e;return On&1&&e.tag!==0&&us(),l=e.pendingLanes,l&1?e===Ho?aa++:(aa=0,Ho=e):aa=0,jr(),null}function us(){if(nr!==null){var e=Ru(On),t=yt.transition,s=be;try{if(yt.transition=null,be=16>e?16:e,nr===null)var a=!1;else{if(e=nr,nr=null,On=0,he&6)throw Error(ie(331));var n=he;for(he|=4,ce=e.current;ce!==null;){var l=ce,o=l.child;if(ce.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var m=c[d];for(ce=m;ce!==null;){var L=ce;switch(L.tag){case 0:case 11:case 15:ra(8,L,l)}var x=L.child;if(x!==null)x.return=L,ce=x;else for(;ce!==null;){L=ce;var y=L.sibling,$=L.return;if(Qm(L),L===m){ce=null;break}if(y!==null){y.return=$,ce=y;break}ce=$}}}var Y=l.alternate;if(Y!==null){var G=Y.child;if(G!==null){Y.child=null;do{var M=G.sibling;G.sibling=null,G=M}while(G!==null)}}ce=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,ce=o;else e:for(;ce!==null;){if(l=ce,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ra(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,ce=f;break e}ce=l.return}}var u=e.current;for(ce=u;ce!==null;){o=ce;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,ce=N;else e:for(o=u;ce!==null;){if(c=ce,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:al(9,c)}}catch(J){Te(c,c.return,J)}if(c===o){ce=null;break e}var T=c.sibling;if(T!==null){T.return=c.return,ce=T;break e}ce=c.return}}if(he=n,jr(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Qn,e)}catch{}a=!0}return a}finally{be=s,yt.transition=t}}return!1}function yc(e,t,s){t=ws(s,t),t=Bm(e,t,1),e=pr(e,t,1),t=Ye(),e!==null&&(ka(e,1,t),lt(e,t))}function Te(e,t,s){if(e.tag===3)yc(e,e,s);else for(;t!==null;){if(t.tag===3){yc(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(xr===null||!xr.has(a))){e=ws(s,e),e=$m(t,e,1),t=pr(t,e,1),e=Ye(),t!==null&&(ka(t,1,e),lt(t,e));break}}t=t.return}}function Oh(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=Ye(),e.pingedLanes|=e.suspendedLanes&s,Be===e&&(Ve&s)===s&&(Oe===4||Oe===3&&(Ve&130023424)===Ve&&500>Ae()-Bi?Ar(e,0):Ri|=s),lt(e,t)}function l0(e,t){t===0&&(e.mode&1?(t=za,za<<=1,!(za&130023424)&&(za=4194304)):t=1);var s=Ye();e=Jt(e,t),e!==null&&(ka(e,t,s),lt(e,s))}function Fh(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),l0(e,s)}function Rh(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(ie(314))}a!==null&&a.delete(t),l0(e,s)}var o0;o0=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)st=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return st=!1,Sh(e,t,s);st=!!(e.flags&131072)}else st=!1,Ne&&t.flags&1048576&&cm(t,En,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;un(e,t),e=t.pendingProps;var n=fs(t,We.current);cs(t,s),n=Li(null,t,a,e,n,s);var l=_i();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(a)?(l=!0,Sn(t)):l=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Ei(t),n.updater=rl,t.stateNode=n,n._reactInternals=t,_o(t,a,e,s),t=Oo(null,t,a,!0,l,s)):(t.tag=0,Ne&&l&&wi(t),Qe(null,t,n,s),t=t.child),t;case 16:a=t.elementType;e:{switch(un(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=$h(a),e=kt(a,e),n){case 0:t=Mo(null,t,a,e,s);break e;case 1:t=uc(null,t,a,e,s);break e;case 11:t=dc(null,t,a,e,s);break e;case 14:t=cc(null,t,a,kt(a.type,e),s);break e}throw Error(ie(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:kt(a,n),Mo(e,t,a,n,s);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:kt(a,n),uc(e,t,a,n,s);case 3:e:{if(Um(t),e===null)throw Error(ie(387));a=t.pendingProps,l=t.memoizedState,n=l.element,xm(e,t),An(t,a,null,s);var o=t.memoizedState;if(a=o.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){n=ws(Error(ie(423)),t),t=mc(e,t,a,s,n);break e}else if(a!==n){n=ws(Error(ie(424)),t),t=mc(e,t,a,s,n);break e}else for(ct=mr(t.stateNode.containerInfo.firstChild),ut=t,Ne=!0,Tt=null,s=bm(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(gs(),a===n){t=Gt(e,t,s);break e}Qe(e,t,a,s)}t=t.child}return t;case 5:return vm(t),e===null&&Ao(t),a=t.type,n=t.pendingProps,l=e!==null?e.memoizedProps:null,o=n.children,So(a,n)?o=null:l!==null&&So(a,l)&&(t.flags|=32),qm(e,t),Qe(e,t,o,s),t.child;case 6:return e===null&&Ao(t),null;case 13:return Hm(e,t,s);case 4:return Ti(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=bs(t,null,a,s):Qe(e,t,a,s),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:kt(a,n),dc(e,t,a,n,s);case 7:return Qe(e,t,t.pendingProps,s),t.child;case 8:return Qe(e,t,t.pendingProps.children,s),t.child;case 12:return Qe(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,l=t.memoizedProps,o=n.value,ve(Tn,a._currentValue),a._currentValue=o,l!==null)if(It(l.value,o)){if(l.children===n.children&&!at.current){t=Gt(e,t,s);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===a){if(l.tag===1){d=Ut(-1,s&-s),d.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var L=m.pending;L===null?d.next=d:(d.next=L.next,L.next=d),m.pending=d}}l.lanes|=s,d=l.alternate,d!==null&&(d.lanes|=s),Io(l.return,s,t),c.lanes|=s;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(ie(341));o.lanes|=s,c=o.alternate,c!==null&&(c.lanes|=s),Io(o,s,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Qe(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,cs(t,s),n=jt(n),a=a(n),t.flags|=1,Qe(e,t,a,s),t.child;case 14:return a=t.type,n=kt(a,t.pendingProps),n=kt(a.type,n),cc(e,t,a,n,s);case 15:return zm(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:kt(a,n),un(e,t),t.tag=1,nt(a)?(e=!0,Sn(t)):e=!1,cs(t,s),fm(t,a,n),_o(t,a,n,s),Oo(null,t,a,!0,e,s);case 19:return Km(e,t,s);case 22:return Vm(e,t,s)}throw Error(ie(156,t.tag))};function i0(e,t){return Du(e,t)}function Bh(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,s,a){return new Bh(e,t,s,a)}function qi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $h(e){if(typeof e=="function")return qi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ii)return 11;if(e===di)return 14}return 2}function fr(e,t){var s=e.alternate;return s===null?(s=wt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function xn(e,t,s,a,n,l){var o=2;if(a=e,typeof e=="function")qi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gr:return Ir(s.children,n,l,t);case oi:o=8,n|=8;break;case ro:return e=wt(12,s,t,n|2),e.elementType=ro,e.lanes=l,e;case so:return e=wt(13,s,t,n),e.elementType=so,e.lanes=l,e;case ao:return e=wt(19,s,t,n),e.elementType=ao,e.lanes=l,e;case gu:return ll(s,n,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hu:o=10;break e;case fu:o=9;break e;case ii:o=11;break e;case di:o=14;break e;case er:o=16,a=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=wt(o,s,t,n),t.elementType=e,t.type=a,t.lanes=l,t}function Ir(e,t,s,a){return e=wt(7,e,a,t),e.lanes=s,e}function ll(e,t,s,a){return e=wt(22,e,a,t),e.elementType=gu,e.lanes=s,e.stateNode={isHidden:!1},e}function Vl(e,t,s){return e=wt(6,e,null,t),e.lanes=s,e}function ql(e,t,s){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zh(e,t,s,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Ui(e,t,s,a,n,l,o,c,d){return e=new zh(e,t,s,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ei(l),e}function Vh(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function d0(e){if(!e)return vr;e=e._reactInternals;e:{if($r(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var s=e.type;if(nt(s))return im(e,s,t)}return t}function c0(e,t,s,a,n,l,o,c,d){return e=Ui(s,a,!0,e,n,l,o,c,d),e.context=d0(null),s=e.current,a=Ye(),n=hr(s),l=Ut(a,n),l.callback=t??null,pr(s,l,n),e.current.lanes=n,ka(e,n,a),lt(e,a),e}function ol(e,t,s,a){var n=t.current,l=Ye(),o=hr(n);return s=d0(s),t.context===null?t.context=s:t.pendingContext=s,t=Ut(l,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=pr(n,t,o),e!==null&&(At(e,n,o,l),on(e,n,o)),o}function Rn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Hi(e,t){jc(e,t),(e=e.alternate)&&jc(e,t)}function qh(){return null}var u0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ki(e){this._internalRoot=e}il.prototype.render=Ki.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));ol(e,t,null,null)};il.prototype.unmount=Ki.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fr(function(){ol(null,e,null,null)}),t[Wt]=null}};function il(e){this._internalRoot=e}il.prototype.unstable_scheduleHydration=function(e){if(e){var t=zu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<rr.length&&t!==0&&t<rr[s].priority;s++);rr.splice(s,0,e),s===0&&qu(e)}};function Wi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nc(){}function Uh(e,t,s,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var m=Rn(o);l.call(m)}}var o=c0(t,a,e,0,null,!1,!1,"",Nc);return e._reactRootContainer=o,e[Wt]=o.current,pa(e.nodeType===8?e.parentNode:e),Fr(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var c=a;a=function(){var m=Rn(d);c.call(m)}}var d=Ui(e,0,!1,null,null,!1,!1,"",Nc);return e._reactRootContainer=d,e[Wt]=d.current,pa(e.nodeType===8?e.parentNode:e),Fr(function(){ol(t,d,s,a)}),d}function cl(e,t,s,a,n){var l=s._reactRootContainer;if(l){var o=l;if(typeof n=="function"){var c=n;n=function(){var d=Rn(o);c.call(d)}}ol(t,o,e,n)}else o=Uh(s,t,e,n,a);return Rn(o)}Bu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Js(t.pendingLanes);s!==0&&(mi(t,s|1),lt(t,Ae()),!(he&6)&&(ys=Ae()+500,jr()))}break;case 13:Fr(function(){var a=Jt(e,1);if(a!==null){var n=Ye();At(a,e,1,n)}}),Hi(e,1)}};pi=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var s=Ye();At(t,e,134217728,s)}Hi(e,134217728)}};$u=function(e){if(e.tag===13){var t=hr(e),s=Jt(e,t);if(s!==null){var a=Ye();At(s,e,t,a)}Hi(e,t)}};zu=function(){return be};Vu=function(e,t){var s=be;try{return be=e,t()}finally{be=s}};ho=function(e,t,s){switch(t){case"input":if(oo(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=el(a);if(!n)throw Error(ie(90));vu(a),oo(a,n)}}}break;case"textarea":yu(e,s);break;case"select":t=s.value,t!=null&&ls(e,!!s.multiple,t,!1)}};Tu=$i;Pu=Fr;var Hh={usingClientEntryPoint:!1,Events:[Ta,Zr,el,ku,Eu,$i]},zs={findFiberByHostInstance:Er,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Kh={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lu(e),e===null?null:e.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||qh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{Qn=Xa.inject(Kh),Ot=Xa}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hh;xt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wi(t))throw Error(ie(200));return Vh(e,t,null,s)};xt.createRoot=function(e,t){if(!Wi(e))throw Error(ie(299));var s=!1,a="",n=u0;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Ui(e,1,!1,null,null,s,!1,a,n),e[Wt]=t.current,pa(e.nodeType===8?e.parentNode:e),new Ki(t)};xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=Lu(t),e=e===null?null:e.stateNode,e};xt.flushSync=function(e){return Fr(e)};xt.hydrate=function(e,t,s){if(!dl(t))throw Error(ie(200));return cl(null,e,t,!0,s)};xt.hydrateRoot=function(e,t,s){if(!Wi(e))throw Error(ie(405));var a=s!=null&&s.hydratedSources||null,n=!1,l="",o=u0;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=c0(t,null,e,1,s??null,n,!1,l,o),e[Wt]=t.current,pa(e),a)for(e=0;e<a.length;e++)s=a[e],n=s._getVersion,n=n(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new il(t)};xt.render=function(e,t,s){if(!dl(t))throw Error(ie(200));return cl(null,e,t,!1,s)};xt.unmountComponentAtNode=function(e){if(!dl(e))throw Error(ie(40));return e._reactRootContainer?(Fr(function(){cl(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1};xt.unstable_batchedUpdates=$i;xt.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!dl(s))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return cl(e,t,s,!1,a)};xt.version="18.2.0-next-9e3b772b8-20220608";function m0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m0)}catch(e){console.error(e)}}m0(),cu.exports=xt;var Wh=cu.exports,Cc=Wh;eo.createRoot=Cc.createRoot,eo.hydrateRoot=Cc.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ja.apply(this,arguments)}var lr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(lr||(lr={}));const Sc="popstate";function Jh(e){e===void 0&&(e={});function t(a,n){let{pathname:l,search:o,hash:c}=a.location;return Jo("",{pathname:l,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(a,n){return typeof n=="string"?n:Bn(n)}return Qh(t,s,null,e)}function Ie(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ji(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gh(){return Math.random().toString(36).substr(2,8)}function kc(e,t){return{usr:e.state,key:e.key,idx:t}}function Jo(e,t,s,a){return s===void 0&&(s=null),ja({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Es(t):t,{state:s,key:t&&t.key||a||Gh()})}function Bn(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Es(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function Qh(e,t,s,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,o=n.history,c=lr.Pop,d=null,m=L();m==null&&(m=0,o.replaceState(ja({},o.state,{idx:m}),""));function L(){return(o.state||{idx:null}).idx}function x(){c=lr.Pop;let M=L(),f=M==null?null:M-m;m=M,d&&d({action:c,location:G.location,delta:f})}function y(M,f){c=lr.Push;let u=Jo(G.location,M,f);m=L()+1;let N=kc(u,m),T=G.createHref(u);try{o.pushState(N,"",T)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;n.location.assign(T)}l&&d&&d({action:c,location:G.location,delta:1})}function $(M,f){c=lr.Replace;let u=Jo(G.location,M,f);m=L();let N=kc(u,m),T=G.createHref(u);o.replaceState(N,"",T),l&&d&&d({action:c,location:G.location,delta:0})}function Y(M){let f=n.location.origin!=="null"?n.location.origin:n.location.href,u=typeof M=="string"?M:Bn(M);return u=u.replace(/ $/,"%20"),Ie(f,"No window.location.(origin|href) available to create URL for href: "+u),new URL(u,f)}let G={get action(){return c},get location(){return e(n,o)},listen(M){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(Sc,x),d=M,()=>{n.removeEventListener(Sc,x),d=null}},createHref(M){return t(n,M)},createURL:Y,encodeLocation(M){let f=Y(M);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:y,replace:$,go(M){return o.go(M)}};return G}var Ec;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ec||(Ec={}));function Yh(e,t,s){return s===void 0&&(s="/"),Xh(e,t,s)}function Xh(e,t,s,a){let n=typeof t=="string"?Es(t):t,l=Gi(n.pathname||"/",s);if(l==null)return null;let o=p0(e);Zh(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let m=mf(l);c=df(o[d],m)}return c}function p0(e,t,s,a){t===void 0&&(t=[]),s===void 0&&(s=[]),a===void 0&&(a="");let n=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(Ie(d.relativePath.startsWith(a),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(a.length));let m=gr([a,d.relativePath]),L=s.concat(d);l.children&&l.children.length>0&&(Ie(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),p0(l.children,t,L,m)),!(l.path==null&&!l.index)&&t.push({path:m,score:lf(m,l.index),routesMeta:L})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))n(l,o);else for(let d of x0(l.path))n(l,o,d)}),t}function x0(e){let t=e.split("/");if(t.length===0)return[];let[s,...a]=t,n=s.endsWith("?"),l=s.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let o=x0(a.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),n&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Zh(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:of(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const ef=/^:[\w-]+$/,tf=3,rf=2,sf=1,af=10,nf=-2,Tc=e=>e==="*";function lf(e,t){let s=e.split("/"),a=s.length;return s.some(Tc)&&(a+=nf),t&&(a+=rf),s.filter(n=>!Tc(n)).reduce((n,l)=>n+(ef.test(l)?tf:l===""?sf:af),a)}function of(e,t){return e.length===t.length&&e.slice(0,-1).every((a,n)=>a===t[n])?e[e.length-1]-t[t.length-1]:0}function df(e,t,s){let{routesMeta:a}=e,n={},l="/",o=[];for(let c=0;c<a.length;++c){let d=a[c],m=c===a.length-1,L=l==="/"?t:t.slice(l.length)||"/",x=cf({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},L),y=d.route;if(!x)return null;Object.assign(n,x.params),o.push({params:n,pathname:gr([l,x.pathname]),pathnameBase:gf(gr([l,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(l=gr([l,x.pathnameBase]))}return o}function cf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=uf(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let l=n[0],o=l.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:a.reduce((m,L,x)=>{let{paramName:y,isOptional:$}=L;if(y==="*"){let G=c[x]||"";o=l.slice(0,l.length-G.length).replace(/(.)\/+$/,"$1")}const Y=c[x];return $&&!Y?m[y]=void 0:m[y]=(Y||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:o,pattern:e}}function uf(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Ji(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(a.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function mf(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ji(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Gi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}const pf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xf=e=>pf.test(e);function hf(e,t){t===void 0&&(t="/");let{pathname:s,search:a="",hash:n=""}=typeof e=="string"?Es(e):e,l;if(s)if(xf(s))l=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Ji(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?l=Pc(s.substring(1),"/"):l=Pc(s,t)}else l=t;return{pathname:l,search:bf(a),hash:vf(n)}}function Pc(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function Ul(e,t,s,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ff(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Qi(e,t){let s=ff(e);return t?s.map((a,n)=>n===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Yi(e,t,s,a){a===void 0&&(a=!1);let n;typeof e=="string"?n=Es(e):(n=ja({},e),Ie(!n.pathname||!n.pathname.includes("?"),Ul("?","pathname","search",n)),Ie(!n.pathname||!n.pathname.includes("#"),Ul("#","pathname","hash",n)),Ie(!n.search||!n.search.includes("#"),Ul("#","search","hash",n)));let l=e===""||n.pathname==="",o=l?"/":n.pathname,c;if(o==null)c=s;else{let x=t.length-1;if(!a&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),x-=1;n.pathname=y.join("/")}c=x>=0?t[x]:"/"}let d=hf(n,c),m=o&&o!=="/"&&o.endsWith("/"),L=(l||o===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(m||L)&&(d.pathname+="/"),d}const gr=e=>e.join("/").replace(/\/\/+/g,"/"),gf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bf=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vf=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wf(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const h0=["post","put","patch","delete"];new Set(h0);const yf=["get",...h0];new Set(yf);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Na.apply(this,arguments)}const Xi=p.createContext(null),jf=p.createContext(null),Nr=p.createContext(null),ul=p.createContext(null),Yt=p.createContext({outlet:null,matches:[],isDataRoute:!1}),f0=p.createContext(null);function Nf(e,t){let{relative:s}=t===void 0?{}:t;Ts()||Ie(!1);let{basename:a,navigator:n}=p.useContext(Nr),{hash:l,pathname:o,search:c}=b0(e,{relative:s}),d=o;return a!=="/"&&(d=o==="/"?a:gr([a,o])),n.createHref({pathname:d,search:c,hash:l})}function Ts(){return p.useContext(ul)!=null}function Xt(){return Ts()||Ie(!1),p.useContext(ul).location}function g0(e){p.useContext(Nr).static||p.useLayoutEffect(e)}function ml(){let{isDataRoute:e}=p.useContext(Yt);return e?Of():Cf()}function Cf(){Ts()||Ie(!1);let e=p.useContext(Xi),{basename:t,future:s,navigator:a}=p.useContext(Nr),{matches:n}=p.useContext(Yt),{pathname:l}=Xt(),o=JSON.stringify(Qi(n,s.v7_relativeSplatPath)),c=p.useRef(!1);return g0(()=>{c.current=!0}),p.useCallback(function(m,L){if(L===void 0&&(L={}),!c.current)return;if(typeof m=="number"){a.go(m);return}let x=Yi(m,JSON.parse(o),l,L.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:gr([t,x.pathname])),(L.replace?a.replace:a.push)(x,L.state,L)},[t,a,o,l,e])}function Zi(){let{matches:e}=p.useContext(Yt),t=e[e.length-1];return t?t.params:{}}function b0(e,t){let{relative:s}=t===void 0?{}:t,{future:a}=p.useContext(Nr),{matches:n}=p.useContext(Yt),{pathname:l}=Xt(),o=JSON.stringify(Qi(n,a.v7_relativeSplatPath));return p.useMemo(()=>Yi(e,JSON.parse(o),l,s==="path"),[e,o,l,s])}function Sf(e,t){return kf(e,t)}function kf(e,t,s,a){Ts()||Ie(!1);let{navigator:n}=p.useContext(Nr),{matches:l}=p.useContext(Yt),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let m=Xt(),L;if(t){var x;let M=typeof t=="string"?Es(t):t;d==="/"||(x=M.pathname)!=null&&x.startsWith(d)||Ie(!1),L=M}else L=m;let y=L.pathname||"/",$=y;if(d!=="/"){let M=d.replace(/^\//,"").split("/");$="/"+y.replace(/^\//,"").split("/").slice(M.length).join("/")}let Y=Yh(e,{pathname:$}),G=If(Y&&Y.map(M=>Object.assign({},M,{params:Object.assign({},c,M.params),pathname:gr([d,n.encodeLocation?n.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?d:gr([d,n.encodeLocation?n.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,s,a);return t&&G?p.createElement(ul.Provider,{value:{location:Na({pathname:"/",search:"",hash:"",state:null,key:"default"},L),navigationType:lr.Pop}},G):G}function Ef(){let e=Mf(),t=wf(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),s?p.createElement("pre",{style:n},s):null,null)}const Tf=p.createElement(Ef,null);class Pf extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?p.createElement(Yt.Provider,{value:this.props.routeContext},p.createElement(f0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Af(e){let{routeContext:t,match:s,children:a}=e,n=p.useContext(Xi);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),p.createElement(Yt.Provider,{value:t},a)}function If(e,t,s,a){var n;if(t===void 0&&(t=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=a)!=null&&l.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,c=(n=s)==null?void 0:n.errors;if(c!=null){let L=o.findIndex(x=>x.route.id&&(c==null?void 0:c[x.route.id])!==void 0);L>=0||Ie(!1),o=o.slice(0,Math.min(o.length,L+1))}let d=!1,m=-1;if(s&&a&&a.v7_partialHydration)for(let L=0;L<o.length;L++){let x=o[L];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=L),x.route.id){let{loaderData:y,errors:$}=s,Y=x.route.loader&&y[x.route.id]===void 0&&(!$||$[x.route.id]===void 0);if(x.route.lazy||Y){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((L,x,y)=>{let $,Y=!1,G=null,M=null;s&&($=c&&x.route.id?c[x.route.id]:void 0,G=x.route.errorElement||Tf,d&&(m<0&&y===0?(Ff("route-fallback"),Y=!0,M=null):m===y&&(Y=!0,M=x.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,y+1)),u=()=>{let N;return $?N=G:Y?N=M:x.route.Component?N=p.createElement(x.route.Component,null):x.route.element?N=x.route.element:N=L,p.createElement(Af,{match:x,routeContext:{outlet:L,matches:f,isDataRoute:s!=null},children:N})};return s&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?p.createElement(Pf,{location:s.location,revalidation:s.revalidation,component:G,error:$,children:u(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):u()},null)}var v0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(v0||{}),w0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(w0||{});function Lf(e){let t=p.useContext(Xi);return t||Ie(!1),t}function _f(e){let t=p.useContext(jf);return t||Ie(!1),t}function Df(e){let t=p.useContext(Yt);return t||Ie(!1),t}function y0(e){let t=Df(),s=t.matches[t.matches.length-1];return s.route.id||Ie(!1),s.route.id}function Mf(){var e;let t=p.useContext(f0),s=_f(),a=y0();return t!==void 0?t:(e=s.errors)==null?void 0:e[a]}function Of(){let{router:e}=Lf(v0.UseNavigateStable),t=y0(w0.UseNavigateStable),s=p.useRef(!1);return g0(()=>{s.current=!0}),p.useCallback(function(n,l){l===void 0&&(l={}),s.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Na({fromRouteId:t},l)))},[e,t])}const Ac={};function Ff(e,t,s){Ac[e]||(Ac[e]=!0)}function Rf(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function j0(e){let{to:t,replace:s,state:a,relative:n}=e;Ts()||Ie(!1);let{future:l,static:o}=p.useContext(Nr),{matches:c}=p.useContext(Yt),{pathname:d}=Xt(),m=ml(),L=Yi(t,Qi(c,l.v7_relativeSplatPath),d,n==="path"),x=JSON.stringify(L);return p.useEffect(()=>m(JSON.parse(x),{replace:s,state:a,relative:n}),[m,x,n,s,a]),null}function Ce(e){Ie(!1)}function Bf(e){let{basename:t="/",children:s=null,location:a,navigationType:n=lr.Pop,navigator:l,static:o=!1,future:c}=e;Ts()&&Ie(!1);let d=t.replace(/^\/*/,"/"),m=p.useMemo(()=>({basename:d,navigator:l,static:o,future:Na({v7_relativeSplatPath:!1},c)}),[d,c,l,o]);typeof a=="string"&&(a=Es(a));let{pathname:L="/",search:x="",hash:y="",state:$=null,key:Y="default"}=a,G=p.useMemo(()=>{let M=Gi(L,d);return M==null?null:{location:{pathname:M,search:x,hash:y,state:$,key:Y},navigationType:n}},[d,L,x,y,$,Y,n]);return G==null?null:p.createElement(Nr.Provider,{value:m},p.createElement(ul.Provider,{children:s,value:G}))}function Ic(e){let{children:t,location:s}=e;return Sf(Go(t),s)}new Promise(()=>{});function Go(e,t){t===void 0&&(t=[]);let s=[];return p.Children.forEach(e,(a,n)=>{if(!p.isValidElement(a))return;let l=[...t,n];if(a.type===p.Fragment){s.push.apply(s,Go(a.props.children,l));return}a.type!==Ce&&Ie(!1),!a.props.index||!a.props.children||Ie(!1);let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Go(a.props.children,l)),s.push(o)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qo(){return Qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Qo.apply(this,arguments)}function $f(e,t){if(e==null)return{};var s={},a=Object.keys(e),n,l;for(l=0;l<a.length;l++)n=a[l],!(t.indexOf(n)>=0)&&(s[n]=e[n]);return s}function zf(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vf(e,t){return e.button===0&&(!t||t==="_self")&&!zf(e)}const qf=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Uf="6";try{window.__reactRouterVersion=Uf}catch{}const Hf="startTransition",Lc=Fp[Hf];function Kf(e){let{basename:t,children:s,future:a,window:n}=e,l=p.useRef();l.current==null&&(l.current=Jh({window:n,v5Compat:!0}));let o=l.current,[c,d]=p.useState({action:o.action,location:o.location}),{v7_startTransition:m}=a||{},L=p.useCallback(x=>{m&&Lc?Lc(()=>d(x)):d(x)},[d,m]);return p.useLayoutEffect(()=>o.listen(L),[o,L]),p.useEffect(()=>Rf(a),[a]),p.createElement(Bf,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:a})}const Wf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ca=p.forwardRef(function(t,s){let{onClick:a,relative:n,reloadDocument:l,replace:o,state:c,target:d,to:m,preventScrollReset:L,viewTransition:x}=t,y=$f(t,qf),{basename:$}=p.useContext(Nr),Y,G=!1;if(typeof m=="string"&&Jf.test(m)&&(Y=m,Wf))try{let N=new URL(window.location.href),T=m.startsWith("//")?new URL(N.protocol+m):new URL(m),J=Gi(T.pathname,$);T.origin===N.origin&&J!=null?m=J+T.search+T.hash:G=!0}catch{}let M=Nf(m,{relative:n}),f=Gf(m,{replace:o,state:c,target:d,preventScrollReset:L,relative:n,viewTransition:x});function u(N){a&&a(N),N.defaultPrevented||f(N)}return p.createElement("a",Qo({},y,{href:Y||M,onClick:G||l?a:u,ref:s,target:d}))});var _c;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_c||(_c={}));var Dc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Dc||(Dc={}));function Gf(e,t){let{target:s,replace:a,state:n,preventScrollReset:l,relative:o,viewTransition:c}=t===void 0?{}:t,d=ml(),m=Xt(),L=b0(e,{relative:o});return p.useCallback(x=>{if(Vf(x,s)){x.preventDefault();let y=a!==void 0?a:Bn(m)===Bn(L);d(e,{replace:y,state:n,preventScrollReset:l,relative:o,viewTransition:c})}},[m,d,L,a,n,s,e,l,o,c])}const Qf="https://gruporeis.cloud/api";function Yf(e){return e.startsWith("http://")||e.startsWith("https://")?e:`${Qf}${e.startsWith("/")?e:`/${e}`}`}async function le(e,t){const s=Yf(e),a={};if(t!=null&&t.headers&&(t.headers instanceof Headers?t.headers.forEach((n,l)=>{a[l]=n}):Array.isArray(t.headers)?t.headers.forEach(([n,l])=>{a[n]=l}):Object.assign(a,t.headers)),(t==null?void 0:t.body)instanceof FormData||(a["Content-Type"]="application/json"),typeof window<"u")try{const n=localStorage.getItem("user");if(n){const l=JSON.parse(n);a["x-user-id"]=l.id||"",a["x-user-email"]=l.email||""}}catch{}return fetch(s,{...t,headers:a})}const N0=p.createContext(void 0);function Xf({children:e}){const[t,s]=p.useState(null),[a,n]=p.useState(!0);p.useEffect(()=>{(()=>{try{const d=localStorage.getItem("user");if(d){const m=JSON.parse(d);s(m)}}catch(d){console.error("Error checking session:",d),localStorage.removeItem("user")}finally{n(!1)}})()},[]);const l=async(c,d)=>{try{const m=await le("/auth/login",{method:"POST",body:JSON.stringify({email:c,password:d})});if(!m.ok)return!1;const L=await m.json();if(L!=null&&L.user){const x={id:L.user.id??"admin",name:L.user.name??"Administrador",email:L.user.email??c,role:L.user.role??"admin"};return s(x),localStorage.setItem("user",JSON.stringify(x)),!0}return!1}catch(m){return console.error("Login error:",m),!1}},o=()=>{s(null),localStorage.removeItem("user")};return r.jsx(N0.Provider,{value:{user:t,loading:a,login:l,logout:o,isAuthenticated:!!t},children:e})}function zr(){const e=p.useContext(N0);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Zf({children:e}){const{isAuthenticated:t,loading:s}=zr(),a=Xt();return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"text-slate-300",children:"Carregando..."})}):t?r.jsx(r.Fragment,{children:e}):r.jsx(j0,{to:"/login",state:{from:a},replace:!0})}function eg({children:e}){return r.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-50",children:[r.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(59,130,246,0.15),transparent_25%),radial-gradient(circle_at_80%_0%,rgba(14,165,233,0.12),transparent_25%),radial-gradient(circle_at_60%_70%,rgba(34,197,94,0.12),transparent_25%)]"}),r.jsx("main",{className:"relative",children:e})]})}function tg(){var $,Y;const[e,t]=p.useState(""),[s,a]=p.useState(""),[n,l]=p.useState(null),[o,c]=p.useState(!1),{login:d}=zr(),m=ml(),x=((Y=($=Xt().state)==null?void 0:$.from)==null?void 0:Y.pathname)||"/",y=async G=>{G.preventDefault(),c(!0),l(null);const M=await d(e,s);c(!1),M?m(x,{replace:!0}):l("Credenciais invlidas. Verifique e tente novamente.")};return r.jsx("div",{className:"flex min-h-screen items-center justify-center px-4 py-10",children:r.jsxs("div",{className:"glass-panel relative w-full max-w-md overflow-hidden rounded-2xl border border-white/10 bg-slate-900/70 p-8",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-emerald-400/5 to-transparent"}),r.jsxs("div",{className:"relative space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded-xl bg-slate-800",children:r.jsx("img",{src:"/logoreis.png",alt:"Reis Fundaes",className:"h-12 w-12 object-cover"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:"Reis Fundaes"}),r.jsx("div",{className:"text-xs text-slate-300",children:"Acesse o painel seguro de gesto"})]})]}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-200",children:"E-mail"}),r.jsx("input",{type:"email",value:e,onChange:G=>t(G.target.value),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"admin@reis.com",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-200",children:"Senha"}),r.jsx("input",{type:"password",value:s,onChange:G=>a(G.target.value),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"********",required:!0})]}),n&&r.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2 text-xs text-red-100",children:n}),r.jsx("button",{type:"submit",disabled:o,className:"flex w-full items-center justify-center rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:o?"Entrando...":"Entrar"})]}),r.jsx("div",{className:"text-xs text-slate-400",children:"Entre com suas credenciais de usurio cadastradas no sistema."})]})]})})}function rg({name:e,email:t}){const{logout:s}=zr(),a=ml(),n=(e||"U").split(" ").filter(Boolean).slice(0,2).map(o=>{var c;return(c=o[0])==null?void 0:c.toUpperCase()}).join("")||"U",l=()=>{s(),a("/login")};return r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-3 text-sm text-slate-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-emerald-400 text-sm font-semibold text-white shadow-lg",children:n}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"truncate text-sm font-semibold text-white",children:e||"Usurio"}),r.jsx("div",{className:"truncate text-xs text-slate-300",children:t||"sem e-mail"})]})]}),r.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[r.jsx("button",{onClick:()=>a("/settings"),className:"flex-1 rounded-md border border-white/10 bg-white/5 px-3 py-2 text-center font-semibold text-slate-100 transition hover:border-emerald-300/50 hover:text-white",children:"Configuraes"}),r.jsx("button",{onClick:l,className:"flex-1 rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-2 font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:"Sair"})]})]})}function sg({name:e,email:t}){const[s,a]=p.useState(!1),n=e||"Reis Fundaes",l="Administrador",o=t||"admin@grupreis.com";return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>a(c=>!c),className:"flex w-full items-center gap-3 rounded-full border border-white/10 bg-white/5 px-2 py-2 transition hover:border-emerald-300/40 hover:bg-white/10",children:[r.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded-full bg-slate-800",children:r.jsx("img",{src:"/logoreis.png",alt:"Reis Fundaes",className:"h-12 w-12 object-cover"})}),r.jsxs("div",{className:"flex-1 text-left text-xs text-slate-200",children:[r.jsx("div",{className:"font-semibold leading-tight text-white",children:n}),r.jsx("div",{className:"text-[11px] text-emerald-300",children:l}),r.jsx("div",{className:"truncate text-[11px] text-slate-400",children:o})]}),r.jsx("span",{className:"text-xs text-slate-300",children:s?"":""})]}),s&&r.jsx("div",{className:"absolute bottom-14 left-0 right-0 z-20",children:r.jsx(rg,{name:n,email:o})})]})}function ag({items:e}){const s=Xt().pathname;return r.jsx("nav",{className:"space-y-1 text-[15px] text-slate-100",children:e.map(a=>{const n=a.href==="/"?s==="/":s.startsWith(a.href);return r.jsxs(Ca,{to:a.href,className:`flex items-center gap-3 rounded-lg px-3 py-2 transition ${n?"bg-emerald-500/20 border border-emerald-400/30 text-white":"hover:bg-white/10 hover:text-white"}`,children:[r.jsx("span",{className:n?"text-emerald-300":"text-slate-200",children:a.icon}),r.jsx("span",{className:"font-medium flex-1",children:a.label}),a.badge?r.jsx("span",{className:"rounded-full bg-red-500 px-2 py-0.5 text-xs font-bold text-white",children:a.badge}):null]},a.href)})})}function ng({items:e}){const s=Xt().pathname;return r.jsx(r.Fragment,{children:e.map(a=>{const n=a.href==="/"?s==="/":s.startsWith(a.href);return r.jsxs(Ca,{to:a.href,className:`flex flex-col items-center gap-1 rounded-lg px-2 py-1 text-[11px] font-semibold transition ${n?"text-emerald-300 bg-emerald-500/10":"text-slate-200 hover:bg-white/10 hover:text-white"}`,children:[r.jsx("span",{className:"text-base",children:a.icon}),r.jsx("span",{className:"leading-none text-[11px]",children:a.label})]},a.href)})})}const De={dashboard:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"2"})]}),clients:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"8",cy:"8",r:"3"}),r.jsx("circle",{cx:"17",cy:"8",r:"3"}),r.jsx("path",{d:"M4 19c0-2.2 2-4 4-4h0"}),r.jsx("path",{d:"M13 15c2 0 4 1.8 4 4"})]}),jobs:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M4 7h16v10H4z"}),r.jsx("path",{d:"M9 7V5h6v2"}),r.jsx("path",{d:"M9 12h6"})]}),teams:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"9",cy:"7",r:"3"}),r.jsx("path",{d:"M4 21v-2a5 5 0 0 1 5-5h0"}),r.jsx("circle",{cx:"17",cy:"7",r:"3"}),r.jsx("path",{d:"M15 21v-2a5 5 0 0 1 5-5h0"})]}),equipment:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M4 15h16l-2 5H6l-2-5Z"}),r.jsx("path",{d:"M6 15V9l6-4 6 4v6"})]}),cash:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),r.jsx("path",{d:"M7 12h10"}),r.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),documents:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M7 3h8l4 4v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"}),r.jsx("path",{d:"M7 7h8"}),r.jsx("path",{d:"M7 11h10"}),r.jsx("path",{d:"M7 15h10"})]}),employees:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"9",cy:"7",r:"4"}),r.jsx("circle",{cx:"17",cy:"13",r:"3"}),r.jsx("path",{d:"M3 21c0-3.2 2.8-6 6-6h0c1.6 0 3.2.6 4.3 1.7"}),r.jsx("path",{d:"M10 21c0-1.3.4-2.6 1.1-3.7"}),r.jsx("path",{d:"M14 21c0-1 .2-2 .7-2.9"})]}),machines:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M5 17H2l-1-4h18l-1 4h-3"}),r.jsx("path",{d:"M7 17v-4"}),r.jsx("path",{d:"M17 17v-4"}),r.jsx("path",{d:"M2 13l2-6h16l2 6"}),r.jsx("circle",{cx:"6",cy:"17",r:"2"}),r.jsx("circle",{cx:"18",cy:"17",r:"2"}),r.jsx("path",{d:"M6 17v-2"}),r.jsx("path",{d:"M18 17v-2"})]}),audit:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),r.jsx("path",{d:"M14 2v6h6"}),r.jsx("path",{d:"M16 13H8"}),r.jsx("path",{d:"M16 17H8"}),r.jsx("path",{d:"M10 9H8"}),r.jsx("circle",{cx:"18",cy:"4",r:"1.5",fill:"currentColor"})]}),catalog:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),r.jsx("path",{d:"M9 3v18"}),r.jsx("path",{d:"M3 9h18"}),r.jsx("circle",{cx:"12",cy:"12",r:"2"})]})};function lg(){const{user:e}=zr(),[t,s]=p.useState(0);p.useEffect(()=>{s(0)},[]);const a=[{label:"Dashboard",href:"/",icon:De.dashboard},{label:"Ordens de Servio",href:"/jobs",icon:De.jobs,badge:t>0?t:null},{label:"Clientes",href:"/clients",icon:De.clients},{label:"Funcionrios",href:"/employees",icon:De.employees},{label:"Equipes",href:"/teams",icon:De.teams},{label:"Equipamentos",href:"/equipment",icon:De.equipment},{label:"Mquinas",href:"/machines",icon:De.machines},{label:"Financeiro",href:"/cash",icon:De.cash},{label:"Documentos",href:"/documents",icon:De.documents},{label:"Auditoria",href:"/audit",icon:De.audit},{label:"Catlogo",href:"/catalog",icon:De.catalog}];return r.jsxs("aside",{className:"fixed left-0 top-0 hidden h-screen w-64 flex-col justify-between border-r border-white/10 bg-slate-900 px-5 py-7 md:flex",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-start px-1",children:r.jsx("img",{src:"/logoreis.png",alt:"Reis Fundaes",className:"h-12 object-contain"})}),r.jsx(ag,{items:a})]}),r.jsx("div",{className:"border-t border-white/10 pt-5",children:r.jsx(sg,{name:(e==null?void 0:e.name)??"Usurio",email:e==null?void 0:e.email})})]})}function og(){const{user:e}=zr();return r.jsxs("header",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-5 py-3 backdrop-blur",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-9 w-9 overflow-hidden rounded-lg bg-slate-800",children:r.jsx("img",{src:"/logoreis.png",alt:"Reis Fundaes",className:"h-9 w-9 object-cover"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Reis Fundaes"}),r.jsx("div",{className:"text-xs text-slate-300",children:"Painel operacional"})]})]}),r.jsxs("div",{className:"text-[11px] text-slate-400",children:["Sesso: ",(e==null?void 0:e.email)??"admin"]})]})}function ig({children:e}){return r.jsxs("div",{className:"flex min-h-screen bg-slate-950",children:[r.jsx(lg,{}),r.jsxs("div",{className:"flex w-full flex-col gap-4 px-4 pb-24 pt-6 md:ml-64 md:px-8 md:pb-8",children:[r.jsx(og,{}),r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:e})]}),r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-30 grid grid-cols-8 border-t border-white/10 bg-slate-900/95 px-2 py-2 text-xs font-semibold text-slate-200 backdrop-blur md:hidden",children:r.jsx(ng,{items:[{label:"Dashboard",href:"/",icon:De.dashboard},{label:"Clientes",href:"/clients",icon:De.clients},{label:"Func.",href:"/employees",icon:De.employees},{label:"OS",href:"/jobs",icon:De.jobs},{label:"Equip.",href:"/equipment",icon:De.equipment},{label:"Mq.",href:"/machines",icon:De.machines},{label:"Financeiro",href:"/cash",icon:De.cash},{label:"Equipes",href:"/teams",icon:De.teams}]})})]})}function dg(){const[e,t]=p.useState([]),[s,a]=p.useState([]),[n,l]=p.useState([]),[o,c]=p.useState([]),[d,m]=p.useState([]),[L,x]=p.useState([]),[y,$]=p.useState([]),[Y,G]=p.useState(!0);p.useEffect(()=>{(async()=>{try{G(!0);const[U,E,Q,W,Z,K,v]=await Promise.all([le("/clients",{cache:"no-store"}),le("/jobs",{cache:"no-store"}),le("/employees",{cache:"no-store"}),le("/teams",{cache:"no-store"}),le("/machines",{cache:"no-store"}),le("/equipment",{cache:"no-store"}),le("/cash",{cache:"no-store"})]),q=await U.json().catch(()=>null),B=await E.json().catch(()=>null),b=await Q.json().catch(()=>null),w=await W.json().catch(()=>null),F=await Z.json().catch(()=>null),R=await K.json().catch(()=>null),C=await v.json().catch(()=>null);t(Array.isArray(q==null?void 0:q.data)?q.data:[]),a(Array.isArray(B==null?void 0:B.data)?B.data:[]),l(Array.isArray(b==null?void 0:b.data)?b.data:[]),c(Array.isArray(w==null?void 0:w.data)?w.data:[]),m(Array.isArray(F==null?void 0:F.data)?F.data:[]),x(Array.isArray(R==null?void 0:R.data)?R.data:[]),$(Array.isArray(C==null?void 0:C.data)?C.data:[])}catch(U){console.error("Erro ao carregar dados do dashboard",U)}finally{G(!1)}})()},[]);const M=p.useMemo(()=>{const O=s.length,U=s.filter(S=>S.status==="em_execucao").length,E=s.filter(S=>S.status==="pendente").length,Q=s.filter(S=>S.status==="concluida").length,W=s.filter(S=>S.status==="cancelada").length,Z=s.filter(S=>S.status==="concluida"&&S.startedAt&&S.finishedAt),K=Z.map(S=>{const re=new Date(S.startedAt).getTime();return new Date(S.finishedAt).getTime()-re}),v=K.reduce((S,re)=>S+re,0),q=K.length>0?v/K.length:0,B=K.length>0?Math.min(...K):0,b=K.length>0?Math.max(...K):0,w=S=>{const re=Math.floor(S/36e5),ae=Math.floor(S%(1e3*60*60)/(1e3*60)),oe=Math.floor(S%(1e3*60)/1e3);return re>0?`${re}h ${ae}min`:ae>0?`${ae}min ${oe}s`:`${oe}s`},F=s.reduce((S,re)=>S+(re.value||0),0),R=s.filter(S=>S.status==="concluida").reduce((S,re)=>S+(re.finalValue||re.value||0),0),C=s.filter(S=>S.status==="pendente"||S.status==="em_execucao").reduce((S,re)=>S+(re.finalValue||re.value||0),0),H=n.filter(S=>S.status==="ativo").length,te=n.filter(S=>S.status==="ativo").reduce((S,re)=>S+(re.salary||0),0),i=o.filter(S=>S.status==="ativa").length,P=d.filter(S=>S.status==="ativa").length,g=d.filter(S=>S.statusOperational==="operando").length,A=L.filter(S=>S.status==="ativo").length,D=new Date().toISOString().split("T")[0],V=y.filter(S=>S.date===D),X=V.filter(S=>S.type==="entrada").reduce((S,re)=>S+(re.amount||0),0),ne=V.filter(S=>S.type==="saida").reduce((S,re)=>S+(re.amount||0),0),h=X-ne,_=y.filter(S=>S.type==="entrada").reduce((S,re)=>S+(re.amount||0),0),ee=y.filter(S=>S.type==="saida").reduce((S,re)=>S+(re.amount||0),0),j=_-ee;return{totalJobs:O,jobsActive:U,jobsPending:E,jobsDone:Q,jobsCanceled:W,totalValue:F,completedValue:R,pendingValue:C,activeEmployees:H,totalSalary:te,activeTeams:i,activeMachines:P,operatingMachines:g,activeEquipment:A,todayEntradas:X,todaySaidas:ne,todaySaldo:h,totalEntradas:_,totalSaidas:ee,totalSaldo:j,completedJobsWithTime:Z.length,totalExecutionTime:v,avgExecutionTime:q,minExecutionTime:B,maxExecutionTime:b,formatDuration:w}},[s,n,o,d,L,y]),f=p.useMemo(()=>{const O=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],U=Array(7).fill(0);s.forEach(Q=>{if(Q.plannedDate){const W=new Date(Q.plannedDate),Z=isNaN(W.getTime())?null:W.getDay();Z!==null&&(U[Z]+=1)}});const E=Math.max(1,...U);return O.map((Q,W)=>({label:Q,value:U[W],pct:Math.round(U[W]/E*100)}))},[s]),u=p.useMemo(()=>{const O=new Date,U=Array.from({length:6}).map((K,v)=>{const q=new Date(O.getFullYear(),O.getMonth()-(5-v),1);return{key:`${q.getFullYear()}-${q.getMonth()}`,label:q.toLocaleString("pt-BR",{month:"short"}),count:0,value:0}}),E=new Map(U.map(K=>[K.key,K]));s.forEach(K=>{if(K.plannedDate){const v=new Date(K.plannedDate);if(!isNaN(v.getTime())){const q=`${v.getFullYear()}-${v.getMonth()}`,B=E.get(q);B&&(B.count+=1,B.value+=K.finalValue||K.value||0)}}});const Q=Array.from(E.values()),W=Math.max(1,...Q.map(K=>K.count)),Z=Math.max(1,...Q.map(K=>K.value));return Q.map(K=>({...K,pct:Math.round(K.count/W*100),valuePct:Math.round(K.value/Z*100)}))},[s]),N=p.useMemo(()=>s.sort((O,U)=>{const E=O.createdAt?new Date(O.createdAt).getTime():0;return(U.createdAt?new Date(U.createdAt).getTime():0)-E}).slice(0,5),[s]),T=p.useMemo(()=>{const O=new Map;return s.forEach(U=>{if(U.clientName){const E=O.get(U.clientName)||{name:U.clientName,count:0,value:0};E.count+=1,E.value+=U.finalValue||U.value||0,O.set(U.clientName,E)}}),Array.from(O.values()).sort((U,E)=>E.value-U.value).slice(0,5)},[s]),J=p.useMemo(()=>{const O=s.filter(Q=>Q.status==="concluida"&&Q.startedAt&&Q.finishedAt),U=new Date,E={hoje:{count:0,totalTime:0},semana:{count:0,totalTime:0},mes:{count:0,totalTime:0},total:{count:0,totalTime:0}};return O.forEach(Q=>{const W=new Date(Q.finishedAt),Z=new Date(Q.startedAt).getTime(),K=W.getTime(),v=K-Z;E.total.count+=1,E.total.totalTime+=v;const q=(U.getTime()-K)/(1e3*60*60*24);q<=1&&(E.hoje.count+=1,E.hoje.totalTime+=v),q<=7&&(E.semana.count+=1,E.semana.totalTime+=v),q<=30&&(E.mes.count+=1,E.mes.totalTime+=v)}),E},[s]),z=p.useMemo(()=>{const O=s.length,U=s.filter(E=>E.status==="concluida").length;return O>0?Math.round(U/O*100):0},[s]),I=O=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(O);return Y?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"text-slate-300",children:"Carregando dados..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-emerald-100",children:"Viso geral do painel"}),r.jsx("h1",{className:"mt-3 text-3xl font-semibold leading-tight text-white md:text-4xl",children:"Dashboard consolidado"}),r.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"KPIs gerais, servios, financeiro, funcionrios e recursos. Dados em tempo real."})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-blue-500/20 to-blue-600/10 p-4 shadow-lg shadow-black/30 transition hover:-translate-y-1 hover:border-blue-300/40",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-blue-200",children:"Ordens de Servio"}),r.jsx("div",{className:"mt-2 text-3xl font-semibold text-blue-100",children:M.totalJobs}),r.jsxs("div",{className:"mt-1 text-xs text-blue-200/70",children:[M.jobsActive," em execuo  ",M.jobsPending," pendentes"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 p-4 shadow-lg shadow-black/30 transition hover:-translate-y-1 hover:border-emerald-300/40",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-200",children:"Valor Total (OS)"}),r.jsx("div",{className:"mt-2 text-3xl font-semibold text-emerald-100",children:I(M.totalValue)}),r.jsxs("div",{className:"mt-1 text-xs text-emerald-200/70",children:[I(M.completedValue)," concludas"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-purple-500/20 to-purple-600/10 p-4 shadow-lg shadow-black/30 transition hover:-translate-y-1 hover:border-purple-300/40",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-purple-200",children:"Saldo Financeiro"}),r.jsx("div",{className:`mt-2 text-3xl font-semibold ${M.totalSaldo>=0?"text-purple-100":"text-red-100"}`,children:I(M.totalSaldo)}),r.jsxs("div",{className:"mt-1 text-xs text-purple-200/70",children:[I(M.todaySaldo)," hoje"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-orange-500/20 to-orange-600/10 p-4 shadow-lg shadow-black/30 transition hover:-translate-y-1 hover:border-orange-300/40",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-orange-200",children:"Funcionrios"}),r.jsx("div",{className:"mt-2 text-3xl font-semibold text-orange-100",children:M.activeEmployees}),r.jsxs("div",{className:"mt-1 text-xs text-orange-200/70",children:["Folha: ",I(M.totalSalary)]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Clientes"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e.length})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Equipes Ativas"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:M.activeTeams})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Mquinas"}),r.jsxs("div",{className:"mt-2 text-2xl font-semibold text-white",children:[M.activeMachines," (",M.operatingMachines," operando)"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Equipamentos"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:M.activeEquipment})]})]}),r.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Servios por dia da semana"}),r.jsx("div",{className:"text-xs text-slate-300",children:"Distribuio das OS pela data agendada"})]})}),r.jsx("div",{className:"mt-4 space-y-3",children:f.map(O=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs text-slate-300",children:[r.jsx("span",{children:O.label}),r.jsx("span",{className:"text-slate-200",children:O.value})]}),r.jsx("div",{className:"h-2 rounded-full bg-slate-800",children:r.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-emerald-400 to-blue-500",style:{width:`${O.pct}%`}})})]},O.label))})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Servios por ms (ltimos 6)"}),r.jsx("div",{className:"text-xs text-slate-300",children:"Quantidade e valores"})]})}),r.jsx("div",{className:"mt-4 space-y-3",children:u.map(O=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs text-slate-300",children:[r.jsx("span",{className:"uppercase",children:O.label}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("span",{className:"text-slate-200",children:[O.count," OS"]}),r.jsx("span",{className:"text-emerald-300 font-semibold",children:I(O.value)})]})]}),r.jsx("div",{className:"h-2 rounded-full bg-slate-800",children:r.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-emerald-500",style:{width:`${O.pct}%`}})})]},O.key))})]})]}),r.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[r.jsx("div",{className:"mb-4 text-sm font-semibold text-white",children:"OS Recentes"}),r.jsx("div",{className:"space-y-2",children:N.length===0?r.jsx("div",{className:"text-sm text-slate-400",children:"Nenhuma OS cadastrada"}):N.map(O=>r.jsx("div",{className:"rounded-lg border border-white/10 bg-slate-900/50 p-3 text-sm",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-white text-xs",children:O.clientName||"Cliente no informado"}),r.jsx("div",{className:"text-xs text-slate-400 mt-1",children:O.plannedDate||"Sem data"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded ${O.status==="concluida"?"bg-emerald-500/20 text-emerald-300":O.status==="em_execucao"?"bg-blue-500/20 text-blue-300":O.status==="pendente"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:O.status==="concluida"?"Concluda":O.status==="em_execucao"?"Em execuo":O.status==="pendente"?"Pendente":"Cancelada"}),(O.finalValue||O.value)&&r.jsx("div",{className:"text-xs text-emerald-300 mt-1 font-semibold",children:I(O.finalValue||O.value||0)})]})]})},O._id))})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[r.jsx("div",{className:"mb-4 text-sm font-semibold text-white",children:"Top 5 Clientes"}),r.jsx("div",{className:"space-y-2",children:T.length===0?r.jsx("div",{className:"text-sm text-slate-400",children:"Nenhum cliente com servios"}):T.map((O,U)=>r.jsx("div",{className:"rounded-lg border border-white/10 bg-slate-900/50 p-3 text-sm",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/20 text-xs font-semibold text-emerald-300",children:U+1}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-white text-xs",children:O.name}),r.jsxs("div",{className:"text-xs text-slate-400",children:[O.count," OS"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"text-xs font-semibold text-emerald-300",children:I(O.value)})})]})},U))})]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Estatsticas de Execuo"}),r.jsx("div",{className:"text-xs text-slate-300",children:"Anlise de tempo de execuo dos servios concludos"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-4",children:[r.jsxs("div",{className:"rounded-lg border border-emerald-500/20 bg-emerald-500/10 p-4",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-300",children:"Servios com Tempo"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-emerald-100",children:M.completedJobsWithTime}),r.jsxs("div",{className:"mt-1 text-xs text-emerald-200/70",children:["de ",M.jobsDone," concludos"]})]}),r.jsxs("div",{className:"rounded-lg border border-blue-500/20 bg-blue-500/10 p-4",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-blue-300",children:"Tempo Mdio"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-blue-100",children:M.formatDuration(M.avgExecutionTime)}),r.jsx("div",{className:"mt-1 text-xs text-blue-200/70",children:"por servio"})]}),r.jsxs("div",{className:"rounded-lg border border-purple-500/20 bg-purple-500/10 p-4",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-purple-300",children:"Tempo Total"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-purple-100",children:M.formatDuration(M.totalExecutionTime)}),r.jsx("div",{className:"mt-1 text-xs text-purple-200/70",children:"tempo acumulado"})]}),r.jsxs("div",{className:"rounded-lg border border-orange-500/20 bg-orange-500/10 p-4",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-orange-300",children:"Taxa de Concluso"}),r.jsxs("div",{className:"mt-2 text-2xl font-semibold text-orange-100",children:[z,"%"]}),r.jsxs("div",{className:"mt-1 text-xs text-orange-200/70",children:[M.jobsDone," de ",M.totalJobs," servios"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mt-4 pt-4 border-t border-white/10",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Hoje"}),r.jsx("div",{className:"mt-1 text-lg font-semibold text-white",children:J.hoje.count>0?M.formatDuration(J.hoje.totalTime/J.hoje.count):""}),r.jsxs("div",{className:"text-xs text-slate-400",children:[J.hoje.count," servio(s)"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Esta Semana"}),r.jsx("div",{className:"mt-1 text-lg font-semibold text-white",children:J.semana.count>0?M.formatDuration(J.semana.totalTime/J.semana.count):""}),r.jsxs("div",{className:"text-xs text-slate-400",children:[J.semana.count," servio(s)"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Este Ms"}),r.jsx("div",{className:"mt-1 text-lg font-semibold text-white",children:J.mes.count>0?M.formatDuration(J.mes.totalTime/J.mes.count):""}),r.jsxs("div",{className:"text-xs text-slate-400",children:[J.mes.count," servio(s)"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Variao"}),r.jsxs("div",{className:"mt-1 text-xs font-semibold text-white",children:[r.jsxs("div",{children:["Mn: ",M.formatDuration(M.minExecutionTime)]}),r.jsxs("div",{className:"mt-1",children:["Mx: ",M.formatDuration(M.maxExecutionTime)]})]}),r.jsx("div",{className:"text-xs text-slate-400",children:"tempo de execuo"})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Entradas (Hoje)"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-emerald-300",children:I(M.todayEntradas)}),r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Total: ",I(M.totalEntradas)]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Sadas (Hoje)"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-red-300",children:I(M.todaySaidas)}),r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Total: ",I(M.totalSaidas)]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Valor Pendente"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-yellow-300",children:I(M.pendingValue)}),r.jsx("div",{className:"mt-1 text-xs text-slate-300",children:"OS em andamento"})]})]})]})}/*!
* sweetalert2 v11.26.10
* Released under the MIT License.
*/function C0(e,t,s){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function cg(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mc(e,t){return e.get(C0(e,t))}function ug(e,t,s){cg(e,t),t.set(e,s)}function mg(e,t,s){return e.set(C0(e,t),s),s}const pg=100,me={},xg=()=>{me.previousActiveElement instanceof HTMLElement?(me.previousActiveElement.focus(),me.previousActiveElement=null):document.body&&document.body.focus()},hg=e=>new Promise(t=>{if(!e)return t();const s=window.scrollX,a=window.scrollY;me.restoreFocusTimeout=setTimeout(()=>{xg(),t()},pg),window.scrollTo(s,a)}),S0="swal2-",fg=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],se=fg.reduce((e,t)=>(e[t]=S0+t,e),{}),gg=["success","warning","info","question","error"],$n=gg.reduce((e,t)=>(e[t]=S0+t,e),{}),k0="SweetAlert2:",ed=e=>e.charAt(0).toUpperCase()+e.slice(1),Xe=e=>{console.warn(`${k0} ${typeof e=="object"?e.join(" "):e}`)},Vr=e=>{console.error(`${k0} ${e}`)},Oc=[],bg=e=>{Oc.includes(e)||(Oc.push(e),Xe(e))},E0=(e,t=null)=>{bg(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},pl=e=>typeof e=="function"?e():e,td=e=>e&&typeof e.toPromise=="function",Aa=e=>td(e)?e.toPromise():Promise.resolve(e),rd=e=>e&&Promise.resolve(e)===e,tt=()=>document.body.querySelector(`.${se.container}`),Ia=e=>{const t=tt();return t?t.querySelector(e):null},ft=e=>Ia(`.${e}`),fe=()=>ft(se.popup),Ps=()=>ft(se.icon),vg=()=>ft(se["icon-content"]),T0=()=>ft(se.title),sd=()=>ft(se["html-container"]),P0=()=>ft(se.image),ad=()=>ft(se["progress-steps"]),xl=()=>ft(se["validation-message"]),Rt=()=>Ia(`.${se.actions} .${se.confirm}`),As=()=>Ia(`.${se.actions} .${se.cancel}`),qr=()=>Ia(`.${se.actions} .${se.deny}`),wg=()=>ft(se["input-label"]),Is=()=>Ia(`.${se.loader}`),La=()=>ft(se.actions),A0=()=>ft(se.footer),hl=()=>ft(se["timer-progress-bar"]),nd=()=>ft(se.close),yg=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,ld=()=>{const e=fe();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(t).sort((l,o)=>{const c=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(o.getAttribute("tabindex")||"0");return c>d?1:c<d?-1:0}),a=e.querySelectorAll(yg),n=Array.from(a).filter(l=>l.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(n))].filter(l=>ot(l))},od=()=>Ht(document.body,se.shown)&&!Ht(document.body,se["toast-shown"])&&!Ht(document.body,se["no-backdrop"]),fl=()=>{const e=fe();return e?Ht(e,se.toast):!1},jg=()=>{const e=fe();return e?e.hasAttribute("data-loading"):!1},gt=(e,t)=>{if(e.textContent="",t){const a=new DOMParser().parseFromString(t,"text/html"),n=a.querySelector("head");n&&Array.from(n.childNodes).forEach(o=>{e.appendChild(o)});const l=a.querySelector("body");l&&Array.from(l.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?e.appendChild(o.cloneNode(!0)):e.appendChild(o)})}},Ht=(e,t)=>{if(!t)return!1;const s=t.split(/\s+/);for(let a=0;a<s.length;a++)if(!e.classList.contains(s[a]))return!1;return!0},Ng=(e,t)=>{Array.from(e.classList).forEach(s=>{!Object.values(se).includes(s)&&!Object.values($n).includes(s)&&!Object.values(t.showClass||{}).includes(s)&&e.classList.remove(s)})},pt=(e,t,s)=>{if(Ng(e,t),!t.customClass)return;const a=t.customClass[s];if(a){if(typeof a!="string"&&!a.forEach){Xe(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof a}"`);return}ge(e,a)}},gl=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${se.popup} > .${se[t]}`);case"checkbox":return e.querySelector(`.${se.popup} > .${se.checkbox} input`);case"radio":return e.querySelector(`.${se.popup} > .${se.radio} input:checked`)||e.querySelector(`.${se.popup} > .${se.radio} input:first-child`);case"range":return e.querySelector(`.${se.popup} > .${se.range} input`);default:return e.querySelector(`.${se.popup} > .${se.input}`)}},I0=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},L0=(e,t,s)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(a=>{Array.isArray(e)?e.forEach(n=>{s?n.classList.add(a):n.classList.remove(a)}):s?e.classList.add(a):e.classList.remove(a)}))},ge=(e,t)=>{L0(e,t,!0)},Ct=(e,t)=>{L0(e,t,!1)},or=(e,t)=>{const s=Array.from(e.children);for(let a=0;a<s.length;a++){const n=s[a];if(n instanceof HTMLElement&&Ht(n,t))return n}},Lr=(e,t,s)=>{s===`${parseInt(`${s}`)}`&&(s=parseInt(s)),s||parseInt(`${s}`)===0?e.style.setProperty(t,typeof s=="number"?`${s}px`:s):e.style.removeProperty(t)},$e=(e,t="flex")=>{e&&(e.style.display=t)},Je=e=>{e&&(e.style.display="none")},id=(e,t="block")=>{e&&new MutationObserver(()=>{_a(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},Fc=(e,t,s,a)=>{const n=e.querySelector(t);n&&n.style.setProperty(s,a)},_a=(e,t,s="flex")=>{t?$e(e,s):Je(e)},ot=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),Cg=()=>!ot(Rt())&&!ot(qr())&&!ot(As()),Yo=e=>e.scrollHeight>e.clientHeight,Sg=(e,t)=>{let s=e;for(;s&&s!==t;){if(Yo(s))return!0;s=s.parentElement}return!1},_0=e=>{const t=window.getComputedStyle(e),s=parseFloat(t.getPropertyValue("animation-duration")||"0"),a=parseFloat(t.getPropertyValue("transition-duration")||"0");return s>0||a>0},dd=(e,t=!1)=>{const s=hl();s&&ot(s)&&(t&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${e/1e3}s linear`,s.style.width="0%"},10))},kg=()=>{const e=hl();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const s=parseInt(window.getComputedStyle(e).width),a=t/s*100;e.style.width=`${a}%`},Eg=()=>typeof window>"u"||typeof document>"u",Tg=`
 <div aria-labelledby="${se.title}" aria-describedby="${se["html-container"]}" class="${se.popup}" tabindex="-1">
   <button type="button" class="${se.close}"></button>
   <ul class="${se["progress-steps"]}"></ul>
   <div class="${se.icon}"></div>
   <img class="${se.image}" />
   <h2 class="${se.title}" id="${se.title}"></h2>
   <div class="${se["html-container"]}" id="${se["html-container"]}"></div>
   <input class="${se.input}" id="${se.input}" />
   <input type="file" class="${se.file}" />
   <div class="${se.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${se.select}" id="${se.select}"></select>
   <div class="${se.radio}"></div>
   <label class="${se.checkbox}">
     <input type="checkbox" id="${se.checkbox}" />
     <span class="${se.label}"></span>
   </label>
   <textarea class="${se.textarea}" id="${se.textarea}"></textarea>
   <div class="${se["validation-message"]}" id="${se["validation-message"]}"></div>
   <div class="${se.actions}">
     <div class="${se.loader}"></div>
     <button type="button" class="${se.confirm}"></button>
     <button type="button" class="${se.deny}"></button>
     <button type="button" class="${se.cancel}"></button>
   </div>
   <div class="${se.footer}"></div>
   <div class="${se["timer-progress-bar-container"]}">
     <div class="${se["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Pg=()=>{const e=tt();return e?(e.remove(),Ct([document.documentElement,document.body],[se["no-backdrop"],se["toast-shown"],se["has-column"]]),!0):!1},Cr=()=>{me.currentInstance.resetValidationMessage()},Ag=()=>{const e=fe(),t=or(e,se.input),s=or(e,se.file),a=e.querySelector(`.${se.range} input`),n=e.querySelector(`.${se.range} output`),l=or(e,se.select),o=e.querySelector(`.${se.checkbox} input`),c=or(e,se.textarea);t.oninput=Cr,s.onchange=Cr,l.onchange=Cr,o.onchange=Cr,c.oninput=Cr,a.oninput=()=>{Cr(),n.value=a.value},a.onchange=()=>{Cr(),n.value=a.value}},Ig=e=>typeof e=="string"?document.querySelector(e):e,Lg=e=>{const t=fe();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},_g=e=>{window.getComputedStyle(e).direction==="rtl"&&(ge(tt(),se.rtl),me.isRTL=!0)},Dg=e=>{const t=Pg();if(Eg()){Vr("SweetAlert2 requires document to initialize");return}const s=document.createElement("div");s.className=se.container,t&&ge(s,se["no-transition"]),gt(s,Tg),s.dataset.swal2Theme=e.theme;const a=Ig(e.target);a.appendChild(s),e.topLayer&&(s.setAttribute("popover",""),s.showPopover()),Lg(e),_g(a),Ag()},cd=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?Mg(e,t):e&&gt(t,e)},Mg=(e,t)=>{e.jquery?Og(t,e):gt(t,e.toString())},Og=(e,t)=>{if(e.textContent="",0 in t)for(let s=0;s in t;s++)e.appendChild(t[s].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},Fg=(e,t)=>{const s=La(),a=Is();!s||!a||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Je(s):$e(s),pt(s,t,"actions"),Rg(s,a,t),gt(a,t.loaderHtml||""),pt(a,t,"loader"))};function Rg(e,t,s){const a=Rt(),n=qr(),l=As();!a||!n||!l||(Kl(a,"confirm",s),Kl(n,"deny",s),Kl(l,"cancel",s),Bg(a,n,l,s),s.reverseButtons&&(s.toast?(e.insertBefore(l,a),e.insertBefore(n,a)):(e.insertBefore(l,t),e.insertBefore(n,t),e.insertBefore(a,t))))}function Bg(e,t,s,a){if(!a.buttonsStyling){Ct([e,t,s],se.styled);return}ge([e,t,s],se.styled),a.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",a.confirmButtonColor),a.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",a.denyButtonColor),a.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",a.cancelButtonColor),Hl(e),Hl(t),Hl(s)}function Hl(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function Kl(e,t,s){const a=ed(t);_a(e,s[`show${a}Button`],"inline-block"),gt(e,s[`${t}ButtonText`]||""),e.setAttribute("aria-label",s[`${t}ButtonAriaLabel`]||""),e.className=se[t],pt(e,s,`${t}Button`)}const $g=(e,t)=>{const s=nd();s&&(gt(s,t.closeButtonHtml||""),pt(s,t,"closeButton"),_a(s,t.showCloseButton),s.setAttribute("aria-label",t.closeButtonAriaLabel||""))},zg=(e,t)=>{const s=tt();s&&(Vg(s,t.backdrop),qg(s,t.position),Ug(s,t.grow),pt(s,t,"container"))};function Vg(e,t){typeof t=="string"?e.style.background=t:t||ge([document.documentElement,document.body],se["no-backdrop"])}function qg(e,t){t&&(t in se?ge(e,se[t]):(Xe('The "position" parameter is not valid, defaulting to "center"'),ge(e,se.center)))}function Ug(e,t){t&&ge(e,se[`grow-${t}`])}var we={innerParams:new WeakMap,domCache:new WeakMap};const Hg=["input","file","range","select","radio","checkbox","textarea"],Kg=(e,t)=>{const s=fe();if(!s)return;const a=we.innerParams.get(e),n=!a||t.input!==a.input;Hg.forEach(l=>{const o=or(s,se[l]);o&&(Gg(l,t.inputAttributes),o.className=se[l],n&&Je(o))}),t.input&&(n&&Wg(t),Qg(t))},Wg=e=>{if(!e.input)return;if(!Pe[e.input]){Vr(`Unexpected type of input! Expected ${Object.keys(Pe).join(" | ")}, got "${e.input}"`);return}const t=D0(e.input);if(!t)return;const s=Pe[e.input](t,e);$e(t),e.inputAutoFocus&&setTimeout(()=>{I0(s)})},Jg=e=>{for(let t=0;t<e.attributes.length;t++){const s=e.attributes[t].name;["id","type","value","style"].includes(s)||e.removeAttribute(s)}},Gg=(e,t)=>{const s=fe();if(!s)return;const a=gl(s,e);if(a){Jg(a);for(const n in t)a.setAttribute(n,t[n])}},Qg=e=>{if(!e.input)return;const t=D0(e.input);t&&pt(t,e,"input")},ud=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Da=(e,t,s)=>{if(s.inputLabel){const a=document.createElement("label"),n=se["input-label"];a.setAttribute("for",e.id),a.className=n,typeof s.customClass=="object"&&ge(a,s.customClass.inputLabel),a.innerText=s.inputLabel,t.insertAdjacentElement("beforebegin",a)}},D0=e=>{const t=fe();if(t)return or(t,se[e]||se.input)},zn=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:rd(t)||Xe(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Pe={};Pe.text=Pe.email=Pe.password=Pe.number=Pe.tel=Pe.url=Pe.search=Pe.date=Pe["datetime-local"]=Pe.time=Pe.week=Pe.month=(e,t)=>(zn(e,t.inputValue),Da(e,e,t),ud(e,t),e.type=t.input,e);Pe.file=(e,t)=>(Da(e,e,t),ud(e,t),e);Pe.range=(e,t)=>{const s=e.querySelector("input"),a=e.querySelector("output");return zn(s,t.inputValue),s.type=t.input,zn(a,t.inputValue),Da(s,e,t),e};Pe.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const s=document.createElement("option");gt(s,t.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,e.appendChild(s)}return Da(e,e,t),e};Pe.radio=e=>(e.textContent="",e);Pe.checkbox=(e,t)=>{const s=gl(fe(),"checkbox");s.value="1",s.checked=!!t.inputValue;const a=e.querySelector("span");return gt(a,t.inputPlaceholder||t.inputLabel),s};Pe.textarea=(e,t)=>{zn(e,t.inputValue),ud(e,t),Da(e,e,t);const s=a=>parseInt(window.getComputedStyle(a).marginLeft)+parseInt(window.getComputedStyle(a).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const a=parseInt(window.getComputedStyle(fe()).width),n=()=>{if(!document.body.contains(e))return;const l=e.offsetWidth+s(e);l>a?fe().style.width=`${l}px`:Lr(fe(),"width",t.width)};new MutationObserver(n).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const Yg=(e,t)=>{const s=sd();s&&(id(s),pt(s,t,"htmlContainer"),t.html?(cd(t.html,s),$e(s,"block")):t.text?(s.textContent=t.text,$e(s,"block")):Je(s),Kg(e,t))},Xg=(e,t)=>{const s=A0();s&&(id(s),_a(s,!!t.footer,"block"),t.footer&&cd(t.footer,s),pt(s,t,"footer"))},Zg=(e,t)=>{const s=we.innerParams.get(e),a=Ps();if(!a)return;if(s&&t.icon===s.icon){Bc(a,t),Rc(a,t);return}if(!t.icon&&!t.iconHtml){Je(a);return}if(t.icon&&Object.keys($n).indexOf(t.icon)===-1){Vr(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Je(a);return}$e(a),Bc(a,t),Rc(a,t),ge(a,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",M0)},Rc=(e,t)=>{for(const[s,a]of Object.entries($n))t.icon!==s&&Ct(e,a);ge(e,t.icon&&$n[t.icon]),rb(e,t),M0(),pt(e,t,"icon")},M0=()=>{const e=fe();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),s=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let a=0;a<s.length;a++)s[a].style.backgroundColor=t},eb=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,tb=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Bc=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let s=e.innerHTML,a="";t.iconHtml?a=$c(t.iconHtml):t.icon==="success"?(a=eb(t),s=s.replace(/ style=".*?"/g,"")):t.icon==="error"?a=tb:t.icon&&(a=$c({question:"?",warning:"!",info:"i"}[t.icon])),s.trim()!==a.trim()&&gt(e,a)},rb=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Fc(e,s,"background-color",t.iconColor);Fc(e,".swal2-success-ring","border-color",t.iconColor)}},$c=e=>`<div class="${se["icon-content"]}">${e}</div>`,sb=(e,t)=>{const s=P0();if(s){if(!t.imageUrl){Je(s);return}$e(s,""),s.setAttribute("src",t.imageUrl),s.setAttribute("alt",t.imageAlt||""),Lr(s,"width",t.imageWidth),Lr(s,"height",t.imageHeight),s.className=se.image,pt(s,t,"image")}};let md=!1,O0=0,F0=0,R0=0,B0=0;const ab=e=>{e.addEventListener("mousedown",Vn),document.body.addEventListener("mousemove",qn),e.addEventListener("mouseup",Un),e.addEventListener("touchstart",Vn),document.body.addEventListener("touchmove",qn),e.addEventListener("touchend",Un)},nb=e=>{e.removeEventListener("mousedown",Vn),document.body.removeEventListener("mousemove",qn),e.removeEventListener("mouseup",Un),e.removeEventListener("touchstart",Vn),document.body.removeEventListener("touchmove",qn),e.removeEventListener("touchend",Un)},Vn=e=>{const t=fe();if(e.target===t||Ps().contains(e.target)){md=!0;const s=$0(e);O0=s.clientX,F0=s.clientY,R0=parseInt(t.style.insetInlineStart)||0,B0=parseInt(t.style.insetBlockStart)||0,ge(t,"swal2-dragging")}},qn=e=>{const t=fe();if(md){let{clientX:s,clientY:a}=$0(e);const n=s-O0;t.style.insetInlineStart=`${R0+(me.isRTL?-n:n)}px`,t.style.insetBlockStart=`${B0+(a-F0)}px`}},Un=()=>{const e=fe();md=!1,Ct(e,"swal2-dragging")},$0=e=>{let t=0,s=0;return e.type.startsWith("mouse")?(t=e.clientX,s=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,s=e.touches[0].clientY),{clientX:t,clientY:s}},lb=(e,t)=>{const s=tt(),a=fe();if(!(!s||!a)){if(t.toast){Lr(s,"width",t.width),a.style.width="100%";const n=Is();n&&a.insertBefore(n,Ps())}else Lr(a,"width",t.width);Lr(a,"padding",t.padding),t.color&&(a.style.color=t.color),t.background&&(a.style.background=t.background),Je(xl()),ob(a,t),t.draggable&&!t.toast?(ge(a,se.draggable),ab(a)):(Ct(a,se.draggable),nb(a))}},ob=(e,t)=>{const s=t.showClass||{};e.className=`${se.popup} ${ot(e)?s.popup:""}`,t.toast?(ge([document.documentElement,document.body],se["toast-shown"]),ge(e,se.toast)):ge(e,se.modal),pt(e,t,"popup"),typeof t.customClass=="string"&&ge(e,t.customClass),t.icon&&ge(e,se[`icon-${t.icon}`])},ib=(e,t)=>{const s=ad();if(!s)return;const{progressSteps:a,currentProgressStep:n}=t;if(!a||a.length===0||n===void 0){Je(s);return}$e(s),s.textContent="",n>=a.length&&Xe("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),a.forEach((l,o)=>{const c=db(l);if(s.appendChild(c),o===n&&ge(c,se["active-progress-step"]),o!==a.length-1){const d=cb(t);s.appendChild(d)}})},db=e=>{const t=document.createElement("li");return ge(t,se["progress-step"]),gt(t,e),t},cb=e=>{const t=document.createElement("li");return ge(t,se["progress-step-line"]),e.progressStepsDistance&&Lr(t,"width",e.progressStepsDistance),t},ub=(e,t)=>{const s=T0();s&&(id(s),_a(s,!!(t.title||t.titleText),"block"),t.title&&cd(t.title,s),t.titleText&&(s.innerText=t.titleText),pt(s,t,"title"))},z0=(e,t)=>{lb(e,t),zg(e,t),ib(e,t),Zg(e,t),sb(e,t),ub(e,t),$g(e,t),Yg(e,t),Fg(e,t),Xg(e,t);const s=fe();typeof t.didRender=="function"&&s&&t.didRender(s),me.eventEmitter.emit("didRender",s)},mb=()=>ot(fe()),V0=()=>{var e;return(e=Rt())===null||e===void 0?void 0:e.click()},pb=()=>{var e;return(e=qr())===null||e===void 0?void 0:e.click()},xb=()=>{var e;return(e=As())===null||e===void 0?void 0:e.click()},Ls=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),q0=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},hb=(e,t,s)=>{q0(e),t.toast||(e.keydownHandler=a=>gb(t,a,s),e.keydownTarget=t.keydownListenerCapture?window:fe(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Xo=(e,t)=>{var s;const a=ld();if(a.length){e=e+t,e===-2&&(e=a.length-1),e===a.length?e=0:e===-1&&(e=a.length-1),a[e].focus();return}(s=fe())===null||s===void 0||s.focus()},U0=["ArrowRight","ArrowDown"],fb=["ArrowLeft","ArrowUp"],gb=(e,t,s)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?bb(t,e):t.key==="Tab"?vb(t):[...U0,...fb].includes(t.key)?wb(t.key):t.key==="Escape"&&yb(t,e,s)))},bb=(e,t)=>{if(!pl(t.allowEnterKey))return;const s=gl(fe(),t.input);if(e.target&&s&&e.target instanceof HTMLElement&&e.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(t.input))return;V0(),e.preventDefault()}},vb=e=>{const t=e.target,s=ld();let a=-1;for(let n=0;n<s.length;n++)if(t===s[n]){a=n;break}e.shiftKey?Xo(a,-1):Xo(a,1),e.stopPropagation(),e.preventDefault()},wb=e=>{const t=La(),s=Rt(),a=qr(),n=As();if(!t||!s||!a||!n)return;const l=[s,a,n];if(document.activeElement instanceof HTMLElement&&!l.includes(document.activeElement))return;const o=U0.includes(e)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let d=0;d<t.children.length;d++){if(c=c[o],!c)return;if(c instanceof HTMLButtonElement&&ot(c))break}c instanceof HTMLButtonElement&&c.focus()}},yb=(e,t,s)=>{e.preventDefault(),pl(t.allowEscapeKey)&&s(Ls.esc)};var js={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const jb=()=>{const e=tt();Array.from(document.body.children).forEach(s=>{s.contains(e)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},H0=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},K0=typeof window<"u"&&!!window.GestureEvent,Nb=()=>{if(K0&&!Ht(document.body,se.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,ge(document.body,se.iosfix),Cb()}},Cb=()=>{const e=tt();if(!e)return;let t;e.ontouchstart=s=>{t=Sb(s)},e.ontouchmove=s=>{t&&(s.preventDefault(),s.stopPropagation())}},Sb=e=>{const t=e.target,s=tt(),a=sd();return!s||!a||kb(e)||Eb(e)?!1:t===s||!Yo(s)&&t instanceof HTMLElement&&!Sg(t,a)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Yo(a)&&a.contains(t))},kb=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",Eb=e=>e.touches&&e.touches.length>1,Tb=()=>{if(Ht(document.body,se.iosfix)){const e=parseInt(document.body.style.top,10);Ct(document.body,se.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},Pb=()=>{const e=document.createElement("div");e.className=se["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let ms=null;const Ab=e=>{ms===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(ms=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ms+Pb()}px`)},Ib=()=>{ms!==null&&(document.body.style.paddingRight=`${ms}px`,ms=null)};function W0(e,t,s,a){fl()?zc(e,a):(hg(s).then(()=>zc(e,a)),q0(me)),K0?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),od()&&(Ib(),Tb(),H0()),Lb()}function Lb(){Ct([document.documentElement,document.body],[se.shown,se["height-auto"],se["no-backdrop"],se["toast-shown"]])}function ir(e){e=Db(e);const t=js.swalPromiseResolve.get(this),s=_b(this);this.isAwaitingPromise?e.isDismissed||(Ma(this),t(e)):s&&t(e)}const _b=e=>{const t=fe();if(!t)return!1;const s=we.innerParams.get(e);if(!s||Ht(t,s.hideClass.popup))return!1;Ct(t,s.showClass.popup),ge(t,s.hideClass.popup);const a=tt();return Ct(a,s.showClass.backdrop),ge(a,s.hideClass.backdrop),Mb(e,t,s),!0};function J0(e){const t=js.swalPromiseReject.get(this);Ma(this),t&&t(e)}const Ma=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,we.innerParams.get(e)||e._destroy())},Db=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),Mb=(e,t,s)=>{var a;const n=tt(),l=_0(t);typeof s.willClose=="function"&&s.willClose(t),(a=me.eventEmitter)===null||a===void 0||a.emit("willClose",t),l?Ob(e,t,n,s.returnFocus,s.didClose):W0(e,n,s.returnFocus,s.didClose)},Ob=(e,t,s,a,n)=>{me.swalCloseEventFinishedCallback=W0.bind(null,e,s,a,n);const l=function(o){if(o.target===t){var c;(c=me.swalCloseEventFinishedCallback)===null||c===void 0||c.call(me),delete me.swalCloseEventFinishedCallback,t.removeEventListener("animationend",l),t.removeEventListener("transitionend",l)}};t.addEventListener("animationend",l),t.addEventListener("transitionend",l)},zc=(e,t)=>{setTimeout(()=>{var s;typeof t=="function"&&t.bind(e.params)(),(s=me.eventEmitter)===null||s===void 0||s.emit("didClose"),e._destroy&&e._destroy()})},Ns=e=>{let t=fe();if(t||new k,t=fe(),!t)return;const s=Is();fl()?Je(Ps()):Fb(t,e),$e(s),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Fb=(e,t)=>{const s=La(),a=Is();!s||!a||(!t&&ot(Rt())&&(t=Rt()),$e(s),t&&(Je(t),a.setAttribute("data-button-to-replace",t.className),s.insertBefore(a,t)),ge([e,s],se.loading))},Rb=(e,t)=>{t.input==="select"||t.input==="radio"?qb(e,t):["text","email","number","tel","textarea"].some(s=>s===t.input)&&(td(t.inputValue)||rd(t.inputValue))&&(Ns(Rt()),Ub(e,t))},Bb=(e,t)=>{const s=e.getInput();if(!s)return null;switch(t.input){case"checkbox":return $b(s);case"radio":return zb(s);case"file":return Vb(s);default:return t.inputAutoTrim?s.value.trim():s.value}},$b=e=>e.checked?1:0,zb=e=>e.checked?e.value:null,Vb=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,qb=(e,t)=>{const s=fe();if(!s)return;const a=n=>{t.input==="select"?Hb(s,Hn(n),t):t.input==="radio"&&Kb(s,Hn(n),t)};td(t.inputOptions)||rd(t.inputOptions)?(Ns(Rt()),Aa(t.inputOptions).then(n=>{e.hideLoading(),a(n)})):typeof t.inputOptions=="object"?a(t.inputOptions):Vr(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},Ub=(e,t)=>{const s=e.getInput();s&&(Je(s),Aa(t.inputValue).then(a=>{s.value=t.input==="number"?`${parseFloat(a)||0}`:`${a}`,$e(s),s.focus(),e.hideLoading()}).catch(a=>{Vr(`Error in inputValue promise: ${a}`),s.value="",$e(s),s.focus(),e.hideLoading()}))};function Hb(e,t,s){const a=or(e,se.select);if(!a)return;const n=(l,o,c)=>{const d=document.createElement("option");d.value=c,gt(d,o),d.selected=G0(c,s.inputValue),l.appendChild(d)};t.forEach(l=>{const o=l[0],c=l[1];if(Array.isArray(c)){const d=document.createElement("optgroup");d.label=o,d.disabled=!1,a.appendChild(d),c.forEach(m=>n(d,m[1],m[0]))}else n(a,c,o)}),a.focus()}function Kb(e,t,s){const a=or(e,se.radio);if(!a)return;t.forEach(l=>{const o=l[0],c=l[1],d=document.createElement("input"),m=document.createElement("label");d.type="radio",d.name=se.radio,d.value=o,G0(o,s.inputValue)&&(d.checked=!0);const L=document.createElement("span");gt(L,c),L.className=se.label,m.appendChild(d),m.appendChild(L),a.appendChild(m)});const n=a.querySelectorAll("input");n.length&&n[0].focus()}const Hn=e=>{const t=[];return e instanceof Map?e.forEach((s,a)=>{let n=s;typeof n=="object"&&(n=Hn(n)),t.push([a,n])}):Object.keys(e).forEach(s=>{let a=e[s];typeof a=="object"&&(a=Hn(a)),t.push([s,a])}),t},G0=(e,t)=>!!t&&t.toString()===e.toString(),Wb=e=>{const t=we.innerParams.get(e);e.disableButtons(),t.input?Q0(e,"confirm"):xd(e,!0)},Jb=e=>{const t=we.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Q0(e,"deny"):pd(e,!1)},Gb=(e,t)=>{e.disableButtons(),t(Ls.cancel)},Q0=(e,t)=>{const s=we.innerParams.get(e);if(!s.input){Vr(`The "input" parameter is needed to be set when using returnInputValueOn${ed(t)}`);return}const a=e.getInput(),n=Bb(e,s);s.inputValidator?Qb(e,n,t):a&&!a.checkValidity()?(e.enableButtons(),e.showValidationMessage(s.validationMessage||a.validationMessage)):t==="deny"?pd(e,n):xd(e,n)},Qb=(e,t,s)=>{const a=we.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>Aa(a.inputValidator(t,a.validationMessage))).then(l=>{e.enableButtons(),e.enableInput(),l?e.showValidationMessage(l):s==="deny"?pd(e,t):xd(e,t)})},pd=(e,t)=>{const s=we.innerParams.get(e||void 0);s.showLoaderOnDeny&&Ns(qr()),s.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>Aa(s.preDeny(t,s.validationMessage))).then(n=>{n===!1?(e.hideLoading(),Ma(e)):e.close({isDenied:!0,value:typeof n>"u"?t:n})}).catch(n=>Y0(e||void 0,n))):e.close({isDenied:!0,value:t})},Vc=(e,t)=>{e.close({isConfirmed:!0,value:t})},Y0=(e,t)=>{e.rejectPromise(t)},xd=(e,t)=>{const s=we.innerParams.get(e||void 0);s.showLoaderOnConfirm&&Ns(),s.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>Aa(s.preConfirm(t,s.validationMessage))).then(n=>{ot(xl())||n===!1?(e.hideLoading(),Ma(e)):Vc(e,typeof n>"u"?t:n)}).catch(n=>Y0(e||void 0,n))):Vc(e,t)};function Kn(){const e=we.innerParams.get(this);if(!e)return;const t=we.domCache.get(this);Je(t.loader),fl()?e.icon&&$e(Ps()):Yb(t),Ct([t.popup,t.actions],se.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Yb=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?$e(t[0],"inline-block"):Cg()&&Je(e.actions)};function X0(){const e=we.innerParams.get(this),t=we.domCache.get(this);return t?gl(t.popup,e.input):null}function Z0(e,t,s){const a=we.domCache.get(e);t.forEach(n=>{a[n].disabled=s})}function ep(e,t){const s=fe();if(!(!s||!e))if(e.type==="radio"){const a=s.querySelectorAll(`[name="${se.radio}"]`);for(let n=0;n<a.length;n++)a[n].disabled=t}else e.disabled=t}function tp(){Z0(this,["confirmButton","denyButton","cancelButton"],!1)}function rp(){Z0(this,["confirmButton","denyButton","cancelButton"],!0)}function sp(){ep(this.getInput(),!1)}function ap(){ep(this.getInput(),!0)}function np(e){const t=we.domCache.get(this),s=we.innerParams.get(this);gt(t.validationMessage,e),t.validationMessage.className=se["validation-message"],s.customClass&&s.customClass.validationMessage&&ge(t.validationMessage,s.customClass.validationMessage),$e(t.validationMessage);const a=this.getInput();a&&(a.setAttribute("aria-invalid","true"),a.setAttribute("aria-describedby",se["validation-message"]),I0(a),ge(a,se.inputerror))}function lp(){const e=we.domCache.get(this);e.validationMessage&&Je(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ct(t,se.inputerror))}const ps={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Xb=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Zb={allowEnterKey:void 0},ev=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],op=e=>Object.prototype.hasOwnProperty.call(ps,e),ip=e=>Xb.indexOf(e)!==-1,dp=e=>Zb[e],tv=e=>{op(e)||Xe(`Unknown parameter "${e}"`)},rv=e=>{ev.includes(e)&&Xe(`The parameter "${e}" is incompatible with toasts`)},sv=e=>{const t=dp(e);t&&E0(e,t)},cp=e=>{e.backdrop===!1&&e.allowOutsideClick&&Xe('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&Xe(`Invalid theme "${e.theme}"`);for(const t in e)tv(t),e.toast&&rv(t),sv(t)};function up(e){const t=tt(),s=fe(),a=we.innerParams.get(this);if(!s||Ht(s,a.hideClass.popup)){Xe("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=av(e),l=Object.assign({},a,n);cp(l),t.dataset.swal2Theme=l.theme,z0(this,l),we.innerParams.set(this,l),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const av=e=>{const t={};return Object.keys(e).forEach(s=>{ip(s)?t[s]=e[s]:Xe(`Invalid parameter to update: ${s}`)}),t};function mp(){const e=we.domCache.get(this),t=we.innerParams.get(this);if(!t){pp(this);return}e.popup&&me.swalCloseEventFinishedCallback&&(me.swalCloseEventFinishedCallback(),delete me.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),me.eventEmitter.emit("didDestroy"),nv(this)}const nv=e=>{pp(e),delete e.params,delete me.keydownHandler,delete me.keydownTarget,delete me.currentInstance},pp=e=>{e.isAwaitingPromise?(Wl(we,e),e.isAwaitingPromise=!0):(Wl(js,e),Wl(we,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Wl=(e,t)=>{for(const s in e)e[s].delete(t)};var lv=Object.freeze({__proto__:null,_destroy:mp,close:ir,closeModal:ir,closePopup:ir,closeToast:ir,disableButtons:rp,disableInput:ap,disableLoading:Kn,enableButtons:tp,enableInput:sp,getInput:X0,handleAwaitingPromise:Ma,hideLoading:Kn,rejectPromise:J0,resetValidationMessage:lp,showValidationMessage:np,update:up});const ov=(e,t,s)=>{e.toast?iv(e,t,s):(cv(t),uv(t),mv(e,t,s))},iv=(e,t,s)=>{t.popup.onclick=()=>{e&&(dv(e)||e.timer||e.input)||s(Ls.close)}},dv=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let Wn=!1;const cv=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(Wn=!0)}}},uv=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(s){e.popup.onmouseup=()=>{},(s.target===e.popup||s.target instanceof HTMLElement&&e.popup.contains(s.target))&&(Wn=!0)}}},mv=(e,t,s)=>{t.container.onclick=a=>{if(Wn){Wn=!1;return}a.target===t.container&&pl(e.allowOutsideClick)&&s(Ls.backdrop)}},pv=e=>typeof e=="object"&&e.jquery,qc=e=>e instanceof Element||pv(e),xv=e=>{const t={};return typeof e[0]=="object"&&!qc(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((s,a)=>{const n=e[a];typeof n=="string"||qc(n)?t[s]=n:n!==void 0&&Vr(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof n}`)}),t};function hv(...e){return new this(...e)}function fv(e){class t extends this{_main(a,n){return super._main(a,Object.assign({},e,n))}}return t}const gv=()=>me.timeout&&me.timeout.getTimerLeft(),xp=()=>{if(me.timeout)return kg(),me.timeout.stop()},hp=()=>{if(me.timeout){const e=me.timeout.start();return dd(e),e}},bv=()=>{const e=me.timeout;return e&&(e.running?xp():hp())},vv=e=>{if(me.timeout){const t=me.timeout.increase(e);return dd(t,!0),t}},wv=()=>!!(me.timeout&&me.timeout.isRunning());let Uc=!1;const Zo={};function yv(e="data-swal-template"){Zo[e]=this,Uc||(document.body.addEventListener("click",jv),Uc=!0)}const jv=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const s in Zo){const a=t.getAttribute(s);if(a){Zo[s].fire({template:a});return}}};class Nv{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,s){const a=this._getHandlersByEventName(t);a.includes(s)||a.push(s)}once(t,s){const a=(...n)=>{this.removeListener(t,a),s.apply(this,n)};this.on(t,a)}emit(t,...s){this._getHandlersByEventName(t).forEach(a=>{try{a.apply(this,s)}catch(n){console.error(n)}})}removeListener(t,s){const a=this._getHandlersByEventName(t),n=a.indexOf(s);n>-1&&a.splice(n,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}me.eventEmitter=new Nv;const Cv=(e,t)=>{me.eventEmitter.on(e,t)},Sv=(e,t)=>{me.eventEmitter.once(e,t)},kv=(e,t)=>{if(!e){me.eventEmitter.reset();return}t?me.eventEmitter.removeListener(e,t):me.eventEmitter.removeAllListeners(e)};var Ev=Object.freeze({__proto__:null,argsToParams:xv,bindClickHandler:yv,clickCancel:xb,clickConfirm:V0,clickDeny:pb,enableLoading:Ns,fire:hv,getActions:La,getCancelButton:As,getCloseButton:nd,getConfirmButton:Rt,getContainer:tt,getDenyButton:qr,getFocusableElements:ld,getFooter:A0,getHtmlContainer:sd,getIcon:Ps,getIconContent:vg,getImage:P0,getInputLabel:wg,getLoader:Is,getPopup:fe,getProgressSteps:ad,getTimerLeft:gv,getTimerProgressBar:hl,getTitle:T0,getValidationMessage:xl,increaseTimer:vv,isDeprecatedParameter:dp,isLoading:jg,isTimerRunning:wv,isUpdatableParameter:ip,isValidParameter:op,isVisible:mb,mixin:fv,off:kv,on:Cv,once:Sv,resumeTimer:hp,showLoading:Ns,stopTimer:xp,toggleTimer:bv});class Tv{constructor(t,s){this.callback=t,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const s=this.running;return s&&this.stop(),this.remaining+=t,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const fp=["swal-title","swal-html","swal-footer"],Pv=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const s=t.content;return Fv(s),Object.assign(Av(s),Iv(s),Lv(s),_v(s),Dv(s),Mv(s),Ov(s,fp))},Av=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(a=>{Rr(a,["name","value"]);const n=a.getAttribute("name"),l=a.getAttribute("value");!n||!l||(typeof ps[n]=="boolean"?t[n]=l!=="false":typeof ps[n]=="object"?t[n]=JSON.parse(l):t[n]=l)}),t},Iv=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(a=>{const n=a.getAttribute("name"),l=a.getAttribute("value");!n||!l||(t[n]=new Function(`return ${l}`)())}),t},Lv=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(a=>{Rr(a,["type","color","aria-label"]);const n=a.getAttribute("type");!n||!["confirm","cancel","deny"].includes(n)||(t[`${n}ButtonText`]=a.innerHTML,t[`show${ed(n)}Button`]=!0,a.hasAttribute("color")&&(t[`${n}ButtonColor`]=a.getAttribute("color")),a.hasAttribute("aria-label")&&(t[`${n}ButtonAriaLabel`]=a.getAttribute("aria-label")))}),t},_v=e=>{const t={},s=e.querySelector("swal-image");return s&&(Rr(s,["src","width","height","alt"]),s.hasAttribute("src")&&(t.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(t.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(t.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(t.imageAlt=s.getAttribute("alt")||void 0)),t},Dv=e=>{const t={},s=e.querySelector("swal-icon");return s&&(Rr(s,["type","color"]),s.hasAttribute("type")&&(t.icon=s.getAttribute("type")),s.hasAttribute("color")&&(t.iconColor=s.getAttribute("color")),t.iconHtml=s.innerHTML),t},Mv=e=>{const t={},s=e.querySelector("swal-input");s&&(Rr(s,["type","label","placeholder","value"]),t.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(t.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(t.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(t.inputValue=s.getAttribute("value")));const a=Array.from(e.querySelectorAll("swal-input-option"));return a.length&&(t.inputOptions={},a.forEach(n=>{Rr(n,["value"]);const l=n.getAttribute("value");if(!l)return;const o=n.innerHTML;t.inputOptions[l]=o})),t},Ov=(e,t)=>{const s={};for(const a in t){const n=t[a],l=e.querySelector(n);l&&(Rr(l,[]),s[n.replace(/^swal-/,"")]=l.innerHTML.trim())}return s},Fv=e=>{const t=fp.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(s=>{const a=s.tagName.toLowerCase();t.includes(a)||Xe(`Unrecognized element <${a}>`)})},Rr=(e,t)=>{Array.from(e.attributes).forEach(s=>{t.indexOf(s.name)===-1&&Xe([`Unrecognized attribute "${s.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},gp=10,Rv=e=>{const t=tt(),s=fe();typeof e.willOpen=="function"&&e.willOpen(s),me.eventEmitter.emit("willOpen",s);const n=window.getComputedStyle(document.body).overflowY;zv(t,s,e),setTimeout(()=>{Bv(t,s)},gp),od()&&($v(t,e.scrollbarPadding,n),jb()),!fl()&&!me.previousActiveElement&&(me.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(s)),me.eventEmitter.emit("didOpen",s)},Jn=e=>{const t=fe();if(e.target!==t)return;const s=tt();t.removeEventListener("animationend",Jn),t.removeEventListener("transitionend",Jn),s.style.overflowY="auto",Ct(s,se["no-transition"])},Bv=(e,t)=>{_0(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Jn),t.addEventListener("transitionend",Jn)):e.style.overflowY="auto"},$v=(e,t,s)=>{Nb(),t&&s!=="hidden"&&Ab(s),setTimeout(()=>{e.scrollTop=0})},zv=(e,t,s)=>{ge(e,s.showClass.backdrop),s.animation?(t.style.setProperty("opacity","0","important"),$e(t,"grid"),setTimeout(()=>{ge(t,s.showClass.popup),t.style.removeProperty("opacity")},gp)):$e(t,"grid"),ge([document.documentElement,document.body],se.shown),s.heightAuto&&s.backdrop&&!s.toast&&ge([document.documentElement,document.body],se["height-auto"])};var Hc={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Vv(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=Hc.email),e.input==="url"&&(e.inputValidator=Hc.url))}function qv(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Xe('Target parameter is not valid, defaulting to "body"'),e.target="body")}function Uv(e){Vv(e),e.showLoaderOnConfirm&&!e.preConfirm&&Xe(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),qv(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),Dg(e)}let Dt;var Za=new WeakMap;class Le{constructor(...t){if(ug(this,Za,void 0),typeof window>"u")return;Dt=this;const s=Object.freeze(this.constructor.argsToParams(t));this.params=s,this.isAwaitingPromise=!1,mg(Za,this,this._main(Dt.params))}_main(t,s={}){if(cp(Object.assign({},s,t)),me.currentInstance){const l=js.swalPromiseResolve.get(me.currentInstance),{isAwaitingPromise:o}=me.currentInstance;me.currentInstance._destroy(),o||l({isDismissed:!0}),od()&&H0()}me.currentInstance=Dt;const a=Kv(t,s);Uv(a),Object.freeze(a),me.timeout&&(me.timeout.stop(),delete me.timeout),clearTimeout(me.restoreFocusTimeout);const n=Wv(Dt);return z0(Dt,a),we.innerParams.set(Dt,a),Hv(Dt,n,a)}then(t){return Mc(Za,this).then(t)}finally(t){return Mc(Za,this).finally(t)}}const Hv=(e,t,s)=>new Promise((a,n)=>{const l=o=>{e.close({isDismissed:!0,dismiss:o,isConfirmed:!1,isDenied:!1})};js.swalPromiseResolve.set(e,a),js.swalPromiseReject.set(e,n),t.confirmButton.onclick=()=>{Wb(e)},t.denyButton.onclick=()=>{Jb(e)},t.cancelButton.onclick=()=>{Gb(e,l)},t.closeButton.onclick=()=>{l(Ls.close)},ov(s,t,l),hb(me,s,l),Rb(e,s),Rv(s),Jv(me,s,l),Gv(t,s),setTimeout(()=>{t.container.scrollTop=0})}),Kv=(e,t)=>{const s=Pv(e),a=Object.assign({},ps,t,s,e);return a.showClass=Object.assign({},ps.showClass,a.showClass),a.hideClass=Object.assign({},ps.hideClass,a.hideClass),a.animation===!1&&(a.showClass={backdrop:"swal2-noanimation"},a.hideClass={}),a},Wv=e=>{const t={popup:fe(),container:tt(),actions:La(),confirmButton:Rt(),denyButton:qr(),cancelButton:As(),loader:Is(),closeButton:nd(),validationMessage:xl(),progressSteps:ad()};return we.domCache.set(e,t),t},Jv=(e,t,s)=>{const a=hl();Je(a),t.timer&&(e.timeout=new Tv(()=>{s("timer"),delete e.timeout},t.timer),t.timerProgressBar&&($e(a),pt(a,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&dd(t.timer)})))},Gv=(e,t)=>{if(!t.toast){if(!pl(t.allowEnterKey)){E0("allowEnterKey"),Xv();return}Qv(e)||Yv(e,t)||Xo(-1,1)}},Qv=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const s of t)if(s instanceof HTMLElement&&ot(s))return s.focus(),!0;return!1},Yv=(e,t)=>t.focusDeny&&ot(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ot(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&ot(e.confirmButton)?(e.confirmButton.focus(),!0):!1,Xv=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Le.prototype.disableButtons=rp;Le.prototype.enableButtons=tp;Le.prototype.getInput=X0;Le.prototype.disableInput=ap;Le.prototype.enableInput=sp;Le.prototype.hideLoading=Kn;Le.prototype.disableLoading=Kn;Le.prototype.showValidationMessage=np;Le.prototype.resetValidationMessage=lp;Le.prototype.close=ir;Le.prototype.closePopup=ir;Le.prototype.closeModal=ir;Le.prototype.closeToast=ir;Le.prototype.rejectPromise=J0;Le.prototype.update=up;Le.prototype._destroy=mp;Object.assign(Le,Ev);Object.keys(lv).forEach(e=>{Le[e]=function(...t){return Dt&&Dt[e]?Dt[e](...t):null}});Le.DismissReason=Ls;Le.version="11.26.10";const k=Le;k.default=k;typeof document<"u"&&function(e,t){var s=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=t);else try{s.innerHTML=t}catch{s.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const Kc={arenoso:"Arenoso",argiloso:"Argiloso",rochoso:"Rochoso",misturado:"Terra comum",outro:"No sei informar"},Zv={livre:"Acesso livre e desimpedido",limitado:"Algumas limitaes",restrito:"Acesso restrito ou complicado"};function ew({clientId:e,clientName:t,onClose:s}){var H,te;const[a,n]=p.useState("list"),[l,o]=p.useState([]),[c,d]=p.useState([]),[m,L]=p.useState(null),[x,y]=p.useState(!0),[$,Y]=p.useState(!1),[G,M]=p.useState(new Set),[f,u]=p.useState({title:"",services:[],value:0,discountPercent:0,discountValue:0,finalValue:0,selectedAddress:"",travelDistanceKm:0,travelPrice:0,travelDescription:"",status:"pendente",notes:"",validUntil:""}),[N,T]=p.useState(!1);p.useEffect(()=>{J()},[e]);const J=async()=>{try{y(!0);const[i,P]=await Promise.all([le("/budgets/client/"+e,{cache:"no-store"}),le("/catalog",{cache:"no-store"})]),g=await i.json().catch(()=>null),A=await P.json().catch(()=>null);o((g==null?void 0:g.data)||[]),d((A==null?void 0:A.data)||[])}catch(i){console.error("Erro ao carregar dados:",i)}finally{y(!1)}},z=()=>{const i="service-"+Date.now(),P={id:i,service:"",localType:"",soilType:"",access:"",diametro:"",profundidade:"",quantidade:"",categories:[],value:0,discountPercent:0,discountValue:0,finalValue:0,basePrice:0,executionTime:0};u(g=>({...g,services:[...g.services,P]})),M(g=>new Set([...g,i]))},I=i=>{u(P=>({...P,services:P.services.filter(g=>g.id!==i)})),U()},O=(i,P)=>{u(g=>({...g,services:g.services.map(A=>{if(A.id!==i)return A;const D={...A,...P},V=parseFloat(D.quantidade)||0,X=parseFloat(D.profundidade)||0,ne=D.basePrice||0;return D.value=V*X*ne,D.discountValue=D.value*(D.discountPercent||0)/100,D.finalValue=D.value-D.discountValue,D})})),setTimeout(U,100)},U=i=>{u(P=>{const g=i||P,A=g.services.reduce((h,_)=>h+(_.value||0),0),D=g.travelPrice||0,V=A+D,X=V*g.discountPercent/100,ne=V-X;return{...P,...i,value:V,discountValue:X,finalValue:ne}})},E=async(i,P)=>{const g=c.find(A=>A._id===P);g&&O(i,{catalogId:P,service:g.description||g.name||"",categories:g.categories||[]})},Q=(i,P,g,A)=>{var j;const D=f.services.find(S=>S.id===i);if(!D||!D.catalogId)return;const V=c.find(S=>S._id===D.catalogId);if(!V)return;const X=P||D.diametro,ne=g||D.soilType,h=A||D.access;if(!X||!ne||!h)return;const _=parseInt(X,10);if(isNaN(_))return;const ee=(j=V.priceVariations)==null?void 0:j.find(S=>S.diameter===_&&S.soilType===ne&&S.access===h);if(ee){const S={basePrice:ee.price||0,executionTime:ee.executionTime||0};P&&(S.diametro=P),g&&(S.soilType=g),A&&(S.access=A),O(i,S)}},W=async i=>{var P;if(!i||!i.trim()){k.fire("Ateno","Endereo do cliente no informado","warning");return}try{T(!0),console.log("Calculando distncia para:",i);const g=await le("/distance/calculate",{method:"POST",body:JSON.stringify({clientAddress:i})}),A=await g.json().catch(()=>null);if(console.log("Resposta do servidor:",A),!g.ok){const D=(A==null?void 0:A.error)||"No foi possvel calcular a distncia",V=(A==null?void 0:A.detail)||"";if(D.includes("Distance Matrix API")||V.includes("LegacyApiNotActivatedMapError")){k.fire({icon:"error",title:"Distance Matrix API no ativada",html:`
              <div class="text-left space-y-3">
                <p>A API do Google Maps precisa ser ativada no Google Cloud Console.</p>
                <p class="font-semibold"> Como ativar:</p>
                <ol class="list-decimal ml-5 space-y-1">
                  <li>Acesse o <a href="https://console.cloud.google.com/apis/library/distance-matrix-backend.googleapis.com" target="_blank" class="text-blue-500 underline">Google Cloud Console</a></li>
                  <li>Faa login com sua conta Google</li>
                  <li>Clique em "ATIVAR" na Distance Matrix API</li>
                  <li>Aguarde alguns segundos e tente novamente</li>
                </ol>
                <p class="text-sm text-gray-500 mt-3">
                    gratuito at 40.000 requisies/ms!
                </p>
              </div>
            `,confirmButtonText:"Entendi",width:600});return}if(D.includes("Endereo no encontrado")||D.includes("NOT_FOUND")||A!=null&&A.companyAddress||A!=null&&A.clientAddress){k.fire({icon:"error",title:"Endereo no encontrado",html:`
              <div class="text-left space-y-3">
                <p class="text-sm">O Google Maps no conseguiu localizar um dos endereos:</p>
                ${A!=null&&A.companyAddress?`
                  <div class="p-3 bg-blue-50 rounded border-l-4 border-blue-400">
                    <p class="text-xs font-semibold text-blue-700 mb-1"> Endereo da Empresa:</p>
                    <p class="text-xs text-blue-900">${A.companyAddress}</p>
                  </div>
                `:""}
                ${A!=null&&A.clientAddress?`
                  <div class="p-3 bg-amber-50 rounded border-l-4 border-amber-400">
                    <p class="text-xs font-semibold text-amber-700 mb-1"> Endereo do Cliente:</p>
                    <p class="text-xs text-amber-900">${A.clientAddress}</p>
                  </div>
                `:""}
                <p class="text-xs text-gray-600 mt-3">
                   <strong>Dica:</strong> Verifique se os endereos esto completos e corretos. 
                  Endereos incompletos ou com erros de digitao podem no ser encontrados pelo Google Maps.
                </p>
                ${!(A!=null&&A.companyAddress)||A.companyAddress.trim()===""?`
                  <p class="text-xs text-red-600 mt-2">
                     O endereo da empresa no est configurado! Configure em <strong>Configuraes</strong>.
                  </p>
                `:""}
              </div>
            `,confirmButtonText:"Entendi",width:600});return}k.fire("Erro",D+(V?`<br><small>${V}</small>`:""),"error");return}A!=null&&A.data&&(u(D=>({...D,selectedAddress:i,travelDistanceKm:A.data.distanceKm||0,travelPrice:A.data.travelPrice||0,travelDescription:A.data.travelDescription||""})),k.fire({title:"Distncia Calculada",html:`
            <div class="text-left space-y-2">
              <p><strong>Distncia:</strong> ${A.data.distanceText||A.data.distanceKm+" km"}</p>
              <p><strong>Tempo estimado:</strong> ${A.data.durationText||"-"}</p>
              <p><strong>Preo de deslocamento:</strong> R$ ${((P=A.data.travelPrice)==null?void 0:P.toFixed(2))||"0,00"}</p>
              <p class="text-sm text-gray-500">${A.data.travelDescription||""}</p>
            </div>
          `,icon:"success"}),U({...f,travelPrice:A.data.travelPrice||0}))}catch(g){console.error("Error calculating distance:",g),k.fire("Erro","Falha ao calcular distncia","error")}finally{T(!1)}},Z=i=>{L(i),u({title:i.title||"",services:i.services.map((P,g)=>({id:Date.now().toString()+g,catalogId:P.catalogId,service:P.service||"",localType:P.localType||"",soilType:P.soilType||"",access:P.access||"",diametro:P.diametro||"",profundidade:P.profundidade||"",quantidade:P.quantidade||"",categories:P.categories||[],observacoes:P.observacoes||"",basePrice:P.basePrice||0,executionTime:P.executionTime||0,value:P.value||0,discountPercent:P.discountPercent||0,discountValue:P.discountValue||0,finalValue:P.finalValue||0})),value:i.value||0,discountPercent:i.discountPercent||0,discountValue:i.discountValue||0,finalValue:i.finalValue||0,selectedAddress:i.selectedAddress||"",travelDistanceKm:i.travelDistanceKm||0,travelPrice:i.travelPrice||0,travelDescription:i.travelDescription||"",status:i.status||"pendente",notes:i.notes||"",validUntil:i.validUntil||""}),M(new Set(i.services.map((P,g)=>Date.now().toString()+g))),n("form")},K=async()=>{if(f.services.length===0){k.fire("Ateno","Adicione pelo menos um servio ao oramento","warning");return}if(!f.title.trim()){k.fire("Ateno","Informe o ttulo do oramento","warning");return}try{Y(!0);const i={clientId:e,clientName:t,title:f.title,services:f.services.map(V=>({catalogId:V.catalogId,service:V.service,localType:V.localType,soilType:V.soilType,access:V.access,diametro:V.diametro,profundidade:V.profundidade,quantidade:V.quantidade,categories:V.categories,value:V.value,discountPercent:V.discountPercent,discountValue:V.discountValue,finalValue:V.finalValue,basePrice:V.basePrice,executionTime:V.executionTime})),value:f.value,discountPercent:f.discountPercent,discountValue:f.discountValue,finalValue:f.finalValue,selectedAddress:f.selectedAddress,travelDistanceKm:f.travelDistanceKm,travelPrice:f.travelPrice,travelDescription:f.travelDescription,status:f.status,notes:f.notes,validUntil:f.validUntil||void 0},P=m?"PUT":"POST",g=m?"/budgets/"+m._id:"/budgets",A=await le(g,{method:P,body:JSON.stringify(i)}),D=await A.json().catch(()=>null);if(!A.ok){k.fire("Erro",(D==null?void 0:D.error)||"Falha ao salvar oramento","error");return}k.fire("Sucesso","Oramento salvo com sucesso","success"),await J(),n("list"),w()}catch(i){console.error("Erro ao salvar oramento:",i),k.fire("Erro","Falha ao salvar oramento","error")}finally{Y(!1)}},v=async i=>{if((await k.fire({title:"Excluir Oramento?",text:"Esta ao no pode ser desfeita!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sim, excluir",cancelButtonText:"Cancelar"})).isConfirmed)try{const g=await le("/budgets/"+i,{method:"DELETE"});if(!g.ok){const A=await g.json().catch(()=>null);k.fire("Erro",(A==null?void 0:A.error)||"Falha ao excluir oramento","error");return}k.fire("Sucesso","Oramento excludo com sucesso","success"),await J(),n("list")}catch(g){console.error("Erro ao excluir oramento:",g),k.fire("Erro","Falha ao excluir oramento","error")}},q=async i=>{var A;const P='<div class="space-y-3 text-left"><div><label class="text-sm text-gray-300">Equipe *</label><select id="swal-team" class="swal2-input w-full"><option value="">Selecione...</option><option value="Equipe Alpha">Equipe Alpha</option><option value="Equipe Beta">Equipe Beta</option><option value="Equipe Gamma">Equipe Gamma</option></select></div><div><label class="text-sm text-gray-300">Data e Hora *</label><input id="swal-date" type="datetime-local" class="swal2-input w-full" /></div><div><label class="text-sm text-gray-300">Local</label><input id="swal-site" type="text" class="swal2-input w-full" placeholder="Endereo do servio" /></div><div><label class="text-sm text-gray-300">Observaes</label><textarea id="swal-notes" class="swal2-textarea w-full" placeholder="Observaes adicionais"></textarea></div></div>',{value:g}=await k.fire({title:"Converter em Ordem de Servio",html:P,showCancelButton:!0,confirmButtonText:"Converter",cancelButtonText:"Cancelar",preConfirm:()=>{var h,_,ee,j;const D=(h=document.getElementById("swal-team"))==null?void 0:h.value,V=(_=document.getElementById("swal-date"))==null?void 0:_.value,X=((ee=document.getElementById("swal-site"))==null?void 0:ee.value)||"",ne=((j=document.getElementById("swal-notes"))==null?void 0:j.value)||"";return!D||!V?(k.showValidationMessage("Equipe e Data so obrigatrios"),null):{team:D,plannedDate:V,site:X,notes:ne}}});if(g)try{const D=await le("/budgets/"+i+"/convert",{method:"POST",body:JSON.stringify(g)}),V=await D.json().catch(()=>null);if(!D.ok){k.fire("Erro",(V==null?void 0:V.error)||"Falha ao converter oramento","error");return}const X=(A=V==null?void 0:V.data)!=null&&A.seq?String(V.data.seq).padStart(6,"0"):"";k.fire("Sucesso","Oramento convertido em OS "+X,"success"),await J(),n("list")}catch(D){console.error("Erro ao converter oramento:",D),k.fire("Erro","Falha ao converter oramento","error")}},B=i=>{const g="https://gruporeis.cloud/api"+"/budgets/"+i+"/pdf";window.open(g,"_blank")},b=i=>{M(P=>{const g=new Set(P);return g.has(i)?g.delete(i):g.add(i),g})},w=()=>{u({title:"",services:[],value:0,discountPercent:0,discountValue:0,finalValue:0,selectedAddress:"",travelDistanceKm:0,travelPrice:0,travelDescription:"",status:"pendente",notes:"",validUntil:""}),L(null),M(new Set)},F=i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i),R=i=>new Date(i).toLocaleDateString("pt-BR"),C={pendente:{label:"Pendente",color:"yellow"},aprovado:{label:"Aprovado",color:"green"},rejeitado:{label:"Rejeitado",color:"red"},convertido:{label:"Convertido em OS",color:"blue"}};return x?r.jsxs("div",{className:"text-center text-white py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-3"}),"Carregando oramentos..."]}):r.jsxs("div",{className:"flex flex-col h-full max-h-[85vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-white/10 flex-shrink-0",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white",children:[" Oramentos - ",t]}),r.jsx("button",{onClick:s,className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Voltar"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto mt-4 pr-2 space-y-4 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-900",children:[a==="list"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>{w(),n("form")},className:"w-full rounded-lg border border-blue-400/50 bg-blue-500/20 px-4 py-3 text-sm font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-500/30",children:"+ Novo Oramento"}),l.length===0?r.jsx("div",{className:"text-center text-slate-400 py-8",children:"Nenhum oramento encontrado para este cliente"}):r.jsx("div",{className:"space-y-2",children:l.map(i=>{var P,g;return r.jsx("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition cursor-pointer",onClick:()=>{L(i),n("detail")},children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-white",children:i.title}),r.jsxs("div",{className:"text-xs text-slate-300",children:[i.servicesCount||((P=i.services)==null?void 0:P.length)||0," servio(s) "," ",i.createdAt&&R(i.createdAt)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-lg font-bold text-emerald-300",children:F(i.finalValue||0)}),r.jsx("span",{className:"inline-block rounded-full px-2 py-1 text-xs font-semibold "+(i.status==="aprovado"?"bg-green-500/20 text-green-300":i.status==="convertido"?"bg-blue-500/20 text-blue-300":i.status==="rejeitado"?"bg-red-500/20 text-red-300":"bg-yellow-500/20 text-yellow-300"),children:((g=C[i.status])==null?void 0:g.label)||i.status})]})]})},i._id)})})]}),a==="detail"&&m&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:m.title}),r.jsxs("div",{className:"text-xs text-slate-300",children:["Criado em ",m.createdAt&&R(m.createdAt)]}),m.validUntil&&r.jsxs("div",{className:"text-xs text-orange-300",children:["Vlido at ",R(m.validUntil)]})]}),r.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold "+(m.status==="aprovado"?"bg-green-500/20 text-green-300":m.status==="convertido"?"bg-blue-500/20 text-blue-300":m.status==="rejeitado"?"bg-red-500/20 text-red-300":"bg-yellow-500/20 text-yellow-300"),children:((H=C[m.status])==null?void 0:H.label)||m.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-200",children:"Servios:"}),(te=m.services)==null?void 0:te.map((i,P)=>r.jsxs("div",{className:"rounded border border-white/5 bg-white/5 p-3 text-xs text-slate-300",children:[r.jsx("div",{className:"font-semibold text-white",children:i.service}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.diametro&&r.jsxs("div",{children:["Dimetro: ",i.diametro]}),i.soilType&&r.jsxs("div",{children:["Solo: ",Kc[i.soilType]||i.soilType]}),i.access&&r.jsxs("div",{children:["Acesso: ",Zv[i.access]||i.access]}),i.profundidade&&r.jsxs("div",{children:["Profundidade: ",i.profundidade,"m"]}),i.quantidade&&r.jsxs("div",{children:["Quantidade: ",i.quantidade," un."]}),r.jsxs("div",{className:"col-span-2 font-semibold text-emerald-300",children:["Valor: ",F(i.finalValue||0)]})]})]},P))]}),r.jsxs("div",{className:"border-t border-white/10 pt-3 space-y-2 text-sm",children:[m.travelDistanceKm&&m.travelDistanceKm>0&&r.jsxs(r.Fragment,{children:[m.selectedAddress&&r.jsxs("div",{className:"text-xs text-slate-400 mb-1",children:[" Endereo: ",m.selectedAddress]}),r.jsxs("div",{className:"flex justify-between text-blue-300",children:[r.jsxs("span",{children:["Deslocamento (",m.travelDistanceKm,"km):"]}),r.jsx("span",{children:F(m.travelPrice||0)})]}),m.travelDescription&&r.jsx("div",{className:"text-xs text-slate-400 italic",children:m.travelDescription})]}),m.value&&r.jsxs("div",{className:"flex justify-between text-slate-300",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:F(m.value)})]}),m.discountValue&&m.discountValue>0&&r.jsxs("div",{className:"flex justify-between text-red-300",children:[r.jsxs("span",{children:["Desconto (",m.discountPercent,"%):"]}),r.jsxs("span",{children:["- ",F(m.discountValue)]})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold text-emerald-300",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:F(m.finalValue||0)})]})]}),m.notes&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[r.jsx("div",{className:"text-xs font-semibold text-slate-200 mb-1",children:"Observaes:"}),r.jsx("div",{className:"text-xs text-slate-300",children:m.notes})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>B(m._id),className:"flex-1 rounded-lg border border-emerald-400/50 bg-emerald-500/20 px-4 py-2 text-sm font-semibold text-emerald-100 transition hover:border-emerald-400 hover:bg-emerald-500/30",children:" Baixar PDF"}),m.status!=="convertido"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>Z(m),className:"flex-1 rounded-lg border border-yellow-400/50 bg-yellow-500/20 px-4 py-2 text-sm font-semibold text-yellow-100 transition hover:border-yellow-400 hover:bg-yellow-500/30",children:" Editar"}),r.jsx("button",{onClick:()=>q(m._id),className:"flex-1 rounded-lg border border-blue-400/50 bg-blue-500/20 px-4 py-2 text-sm font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-500/30",children:" Converter em OS"}),r.jsx("button",{onClick:()=>v(m._id),className:"flex-1 rounded-lg border border-red-400/50 bg-red-500/20 px-4 py-2 text-sm font-semibold text-red-100 transition hover:border-red-400 hover:bg-red-500/30",children:" Excluir"})]}),r.jsx("button",{onClick:()=>{L(null),n("list")},className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-white/20 hover:bg-white/10",children:"Voltar"})]})]}),a==="form"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-semibold text-slate-200",children:"Ttulo do Oramento *"}),r.jsx("input",{type:"text",value:f.title,onChange:i=>u(P=>({...P,title:i.target.value})),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",placeholder:"Ex: Oramento - Fundaes Residenciais"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-slate-900 py-2 z-10",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-200",children:["Servios ",f.services.length>0&&"("+f.services.length+")"]}),r.jsxs("div",{className:"flex gap-2",children:[f.services.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>M(new Set(f.services.map(i=>i.id))),className:"rounded border border-slate-500/50 bg-slate-700/20 px-2 py-1 text-xs font-semibold text-slate-300 transition hover:bg-slate-700/30",children:"Expandir Todos"}),r.jsx("button",{onClick:()=>M(new Set),className:"rounded border border-slate-500/50 bg-slate-700/20 px-2 py-1 text-xs font-semibold text-slate-300 transition hover:bg-slate-700/30",children:"Recolher Todos"})]}),r.jsx("button",{onClick:z,className:"rounded border border-blue-400/50 bg-blue-500/20 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:bg-blue-500/30",children:"+ Adicionar Servio"})]})]}),f.services.length===0?r.jsx("div",{className:"text-center text-slate-400 py-4 border border-dashed border-slate-600 rounded-lg",children:'Nenhum servio adicionado. Clique em "Adicionar Servio" para comear.'}):r.jsx("div",{className:"space-y-3",children:f.services.map((i,P)=>{const g=G.has(i.id);return r.jsxs("div",{className:"rounded-lg border overflow-hidden transition-all "+(!i.service||!i.diametro||!i.quantidade||!i.profundidade?"border-yellow-500/30 bg-yellow-500/5":i.finalValue>0?"border-emerald-500/30 bg-emerald-500/5":"border-white/10 bg-white/5"),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer transition "+(g?"bg-white/5":"hover:bg-white/5"),onClick:()=>b(i.id),children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("button",{type:"button",className:"text-slate-400 hover:text-white transition transform "+(g?"rotate-90":""),onClick:A=>{A.stopPropagation(),b(i.id)},children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"text-sm font-semibold text-white",children:["Servio ",P+1]}),!i.service||!i.diametro||!i.quantidade||!i.profundidade?r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",children:"Incompleto"}):i.finalValue>0?r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-500/30",children:" Completo"}):null,i.service&&r.jsxs("div",{className:"text-sm text-slate-300",children:[i.service.substring(0,40),i.service.length>40?"...":""]})]}),!g&&r.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs",children:[i.finalValue>0&&r.jsx("span",{className:"text-emerald-300 font-semibold",children:F(i.finalValue)}),i.diametro&&r.jsxs("span",{className:"text-slate-400",children:[" ",i.diametro]}),i.soilType&&r.jsx("span",{className:"text-slate-400",children:Kc[i.soilType]}),i.quantidade&&i.profundidade&&r.jsxs("span",{className:"text-slate-400",children:[i.quantidade,"un.  ",i.profundidade,"m"]}),i.basePrice>0&&r.jsxs("span",{className:"text-blue-400",children:["R$ ",i.basePrice.toFixed(2),"/m"]})]})]})]}),r.jsx("button",{onClick:A=>{A.stopPropagation(),I(i.id)},className:"text-red-400 hover:text-red-300 text-xs px-2 py-1 rounded hover:bg-red-500/10 transition",children:" Remover"})]}),g&&r.jsxs("div",{className:"p-4 pt-0 space-y-3 border-t border-white/5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Catlogo de Servios"}),r.jsxs("select",{value:i.catalogId||"",onChange:A=>E(i.id,A.target.value),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",children:[r.jsx("option",{value:"",children:"Selecione do catlogo..."}),c.map(A=>r.jsx("option",{value:A._id,children:A.name||A.description},A._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Nome do Servio *"}),r.jsx("input",{type:"text",value:i.service,onChange:A=>O(i.id,{service:A.target.value}),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",placeholder:"Ex: Perfurao de Estaca"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Dimetro"}),r.jsxs("select",{value:i.diametro,onChange:A=>{O(i.id,{diametro:A.target.value}),setTimeout(()=>Q(i.id,A.target.value),50)},className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",children:[r.jsx("option",{value:"",children:"Selecione..."}),[...Array(19)].map((A,D)=>{const V=30+D*5;return r.jsxs("option",{value:V+"cm",children:[V,"cm"]},V)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Tipo de Solo"}),r.jsxs("select",{value:i.soilType,onChange:A=>{O(i.id,{soilType:A.target.value}),setTimeout(()=>Q(i.id,void 0,A.target.value),50)},className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",children:[r.jsx("option",{value:"",children:"Selecione..."}),r.jsx("option",{value:"arenoso",children:"Arenoso"}),r.jsx("option",{value:"argiloso",children:"Argiloso"}),r.jsx("option",{value:"rochoso",children:"Rochoso"}),r.jsx("option",{value:"misturado",children:"Terra comum"}),r.jsx("option",{value:"outro",children:"No sei informar"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Acesso para Mquina"}),r.jsxs("select",{value:i.access,onChange:A=>{O(i.id,{access:A.target.value}),setTimeout(()=>Q(i.id,void 0,void 0,A.target.value),50)},className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",children:[r.jsx("option",{value:"",children:"Selecione..."}),r.jsx("option",{value:"livre",children:"Acesso livre e desimpedido"}),r.jsx("option",{value:"limitado",children:"Algumas limitaes"}),r.jsx("option",{value:"restrito",children:"Acesso restrito ou complicado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Preo Base/m"}),r.jsx("input",{type:"number",value:i.basePrice||"",onChange:A=>O(i.id,{basePrice:parseFloat(A.target.value)||0}),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",step:"0.01",min:"0",readOnly:!!i.catalogId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Profundidade (m)"}),r.jsx("input",{type:"number",value:i.profundidade,onChange:A=>O(i.id,{profundidade:A.target.value}),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",step:"0.01",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-300",children:"Quantidade"}),r.jsx("input",{type:"number",value:i.quantidade,onChange:A=>O(i.id,{quantidade:A.target.value}),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",min:"1"})]})]}),r.jsxs("div",{className:"rounded border p-3 text-sm "+(i.finalValue>0?"bg-emerald-500/10 border-emerald-400/30":"bg-slate-800/50 border-slate-700/30"),children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-slate-400",children:"Preo Base/m:"}),r.jsx("div",{className:"font-semibold "+(i.basePrice>0?"text-blue-300":"text-slate-500"),children:i.basePrice>0?"R$ "+i.basePrice.toFixed(2):"Aguardando..."})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-slate-400",children:"Valor Total:"}),r.jsx("div",{className:"font-semibold text-lg "+(i.finalValue>0?"text-emerald-300":"text-slate-500"),children:F(i.finalValue)})]})]}),i.basePrice>0&&i.quantidade&&i.profundidade&&r.jsxs("div",{className:"text-slate-400 mt-2 pt-2 border-t border-slate-700/30 text-xs",children:[r.jsx("strong",{children:"Clculo:"})," ",i.quantidade," un.  ",i.profundidade,"m  R$ ",i.basePrice.toFixed(2),"/m = ",F(i.value||0)]})]})]})]},i.id)})})]}),r.jsxs("div",{className:"rounded-lg border border-blue-400/30 bg-blue-500/10 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:" Deslocamento"}),r.jsx("button",{type:"button",onClick:async()=>{var i,P;try{const A=await(await le(`/clients/${e}`)).json();console.log("Dados do cliente:",A);let D=[];if((i=A==null?void 0:A.data)!=null&&i.addresses&&Array.isArray(A.data.addresses)&&A.data.addresses.length>0?D=A.data.addresses.map(X=>X.address).filter(X=>X&&X.trim()):(P=A==null?void 0:A.data)!=null&&P.address&&(D=[A.data.address]),D.length===0){k.fire("Ateno","Cliente sem endereo cadastrado","warning");return}let V=D[0];if(D.length>1){const{value:X}=await k.fire({title:"Selecione o Endereo",html:`
                            <div class="text-left">
                              <p class="mb-3 text-sm text-slate-600">Este cliente possui ${D.length} endereos cadastrados. Selecione qual usar para o clculo de deslocamento:</p>
                              <select id="addressSelect" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                                ${D.map((ne,h)=>`<option value="${h}">${ne}</option>`).join("")}
                              </select>
                            </div>
                          `,showCancelButton:!0,confirmButtonText:"Calcular",cancelButtonText:"Cancelar",preConfirm:()=>{const ne=document.getElementById("addressSelect");return ne?parseInt(ne.value):0}});if(X===void 0)return;V=D[X]}V&&V.trim()?W(V.trim()):k.fire("Ateno","Endereo invlido","warning")}catch(g){console.error(g),k.fire("Erro","Falha ao buscar endereo do cliente","error")}},disabled:N,className:"px-3 py-1 rounded text-xs font-semibold border border-blue-400/50 bg-blue-500/20 text-blue-100 hover:bg-blue-500/30 transition disabled:opacity-50",children:N?"Calculando...":" Calcular"})]}),f.travelDistanceKm>0?r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between text-slate-300",children:[r.jsx("span",{children:"Distncia:"}),r.jsxs("span",{className:"font-semibold",children:[f.travelDistanceKm," km"]})]}),r.jsxs("div",{className:"flex justify-between text-slate-300",children:[r.jsx("span",{children:"Preo:"}),r.jsxs("span",{className:"font-semibold text-emerald-300",children:["R$ ",f.travelPrice.toFixed(2)]})]}),f.travelDescription&&r.jsx("div",{className:"text-xs text-slate-400 pt-2 border-t border-blue-400/20",children:f.travelDescription})]}):r.jsx("p",{className:"text-xs text-slate-400",children:'Clique em "Calcular" para obter a distncia e o preo de deslocamento.'})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-200",children:"Desconto (%)"}),r.jsx("input",{type:"number",value:f.discountPercent,onChange:i=>{const P=parseFloat(i.target.value)||0;u(g=>({...g,discountPercent:P,discountValue:g.value*P/100,finalValue:g.value-g.value*P/100}))},className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",step:"0.01",min:"0",max:"100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-200",children:"Vlido at"}),r.jsx("input",{type:"date",value:f.validUntil,onChange:i=>u(P=>({...P,validUntil:i.target.value})),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-200",children:"Observaes"}),r.jsx("textarea",{value:f.notes,onChange:i=>u(P=>({...P,notes:i.target.value})),className:"mt-1 w-full rounded border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white",rows:3,placeholder:"Observaes ou condies do oramento..."})]}),r.jsxs("div",{className:"rounded-lg border p-4 "+(f.finalValue>0?"border-emerald-400/30 bg-emerald-500/10":"border-slate-700/30 bg-slate-800/30"),children:[r.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-3",children:"RESUMO DO ORAMENTO"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[f.services.length>0&&r.jsx("div",{className:"flex justify-between text-slate-400",children:r.jsxs("span",{children:[f.services.length," servio(s) adicionado(s)"]})}),f.services.reduce((i,P)=>i+(P.value||0),0)>0&&r.jsxs("div",{className:"flex justify-between text-slate-300",children:[r.jsx("span",{children:"Servios:"}),r.jsx("span",{className:"font-semibold",children:F(f.services.reduce((i,P)=>i+(P.value||0),0))})]}),f.travelPrice>0&&r.jsxs("div",{className:"flex justify-between text-blue-300",children:[r.jsxs("span",{children:["Deslocamento (",f.travelDistanceKm,"km):"]}),r.jsx("span",{className:"font-semibold",children:F(f.travelPrice)})]}),f.value>0&&(f.travelPrice>0||f.services.length>0)&&r.jsxs("div",{className:"flex justify-between text-slate-300 pt-2 border-t border-slate-700/30",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:F(f.value)})]}),f.discountValue>0&&r.jsxs("div",{className:"flex justify-between text-red-300",children:[r.jsxs("span",{children:["Desconto (",f.discountPercent,"%):"]}),r.jsxs("span",{className:"font-semibold",children:["- ",F(f.discountValue)]})]}),r.jsxs("div",{className:"flex justify-between text-xl font-bold pt-3 border-t "+(f.finalValue>0?"border-emerald-400/30 text-emerald-300":"border-slate-700/30 text-slate-500"),children:[r.jsx("span",{children:"TOTAL:"}),r.jsx("span",{children:F(f.finalValue)})]})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[r.jsx("button",{onClick:()=>{n("list"),w()},className:"flex-1 rounded-lg border border-white/10 bg-white/5 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-white/20 hover:bg-white/10",disabled:$,children:"Cancelar"}),r.jsx("button",{onClick:K,className:"flex-1 rounded-lg border border-emerald-400/50 bg-emerald-500/20 px-4 py-2 text-sm font-semibold text-emerald-100 transition hover:border-emerald-400 hover:bg-emerald-500/30 disabled:opacity-50",disabled:$,children:$?"Salvando...":" Salvar Oramento"})]})]})]})]})}const Vs=e=>{const t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`${t.slice(0,3)}.${t.slice(3)}`:t.length<=9?`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6)}`:`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6,9)}-${t.slice(9,11)}`},qs=e=>{const t=e.replace(/\D/g,"");return t.length<=2?t:t.length<=5?`${t.slice(0,2)}.${t.slice(2)}`:t.length<=8?`${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5)}`:t.length<=12?`${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5,8)}/${t.slice(8)}`:`${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5,8)}/${t.slice(8,12)}-${t.slice(12,14)}`},Us=e=>{const t=e.replace(/\D/g,"");return t.length<=2?t.length>0?`(${t}`:t:t.length<=6?`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`},Wc=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],Bt=e=>[[e.addressStreet,e.addressNumber].filter(Boolean).join(", "),e.addressNeighborhood,[e.addressCity,e.addressState].filter(Boolean).join(" - "),e.addressZip].filter(t=>t&&t.trim().length>0).join(", ");function tw(){const[e,t]=p.useState(null),[s,a]=p.useState(null),[n,l]=p.useState([]),[o,c]=p.useState(""),[d,m]=p.useState("all"),[L,x]=p.useState(!1),[y,$]=p.useState(null),[Y,G]=p.useState(!1),[M,f]=p.useState(!1),[u,N]=p.useState(!0),[T,J]=p.useState(null),[z,I]=p.useState(null),[O,U]=p.useState([]),[E,Q]=p.useState(null),W={label:"",address:"",addressStreet:"",addressNumber:"",addressNeighborhood:"",addressCity:"",addressState:"",addressZip:"",latitude:void 0,longitude:void 0},[Z,K]=p.useState({name:"",personType:"cpf",docNumber:"",phone:"",email:"",addresses:[]}),[v,q]=p.useState({name:"",docNumber:"",phone:"",email:"",addresses:[]}),[B,b]=p.useState(W);p.useEffect(()=>{(async()=>{try{N(!0);const S=await le("/clients",{cache:"no-store"}),re=await S.json().catch(()=>null);if(!S.ok){console.error("Erro ao carregar clientes",re);return}l((re==null?void 0:re.data)||[])}catch(S){console.error(S)}finally{N(!1)}})()},[]);const w=p.useMemo(()=>[{label:"Total de clientes",value:String(n.length||0)},{label:"Clientes com servios",value:"0"},{label:"Servios finalizados",value:"0"},{label:"Servios pendentes",value:"0"}],[n]),F=p.useMemo(()=>{const j=o.trim().toLowerCase();return n.filter(S=>{var oe,de,ue;const re=d==="all"?!0:S.personType===d,ae=j.length===0||((oe=S.name)==null?void 0:oe.toLowerCase().includes(j))||((de=S.docNumber)==null?void 0:de.toLowerCase().includes(j))||((ue=S.phone)==null?void 0:ue.toLowerCase().includes(j));return re&&ae})},[n,d,o]);p.useEffect(()=>{if(y){G(!1),I(null);const j=y.personType||"cpf",S=(y.docNumber||"").replace(/\D/g,""),re=j==="cpf"?Vs(S):qs(S),ae=(y.phone||"").replace(/\D/g,""),oe=Us(ae);let de=[];y.addresses&&Array.isArray(y.addresses)&&y.addresses.length>0?de=y.addresses.map(ue=>({_id:ue._id,label:ue.label||"",address:ue.address||Bt(ue),addressStreet:ue.addressStreet||"",addressNumber:ue.addressNumber||"",addressNeighborhood:ue.addressNeighborhood||"",addressCity:ue.addressCity||"",addressState:ue.addressState||"",addressZip:ue.addressZip||"",latitude:ue.latitude,longitude:ue.longitude})):(y.addressStreet||y.address)&&(de=[{label:"Endereo Principal",address:y.address||Bt({addressStreet:y.addressStreet||"",addressNumber:y.addressNumber||"",addressNeighborhood:y.addressNeighborhood||"",addressCity:y.addressCity||"",addressState:y.addressState||"",addressZip:y.addressZip||""}),addressStreet:y.addressStreet||"",addressNumber:y.addressNumber||"",addressNeighborhood:y.addressNeighborhood||"",addressCity:y.addressCity||"",addressState:y.addressState||"",addressZip:y.addressZip||"",latitude:void 0,longitude:void 0}]),K({name:y.name||"",personType:j,docNumber:re,phone:oe,email:y.email||"",addresses:de}),R(y._id)}},[y]);const R=async j=>{try{const S=await le(`/budgets/client/${j}`,{cache:"no-store"}),re=await S.json().catch(()=>null);S.ok&&U((re==null?void 0:re.data)||[])}catch(S){console.error("Erro ao carregar oramentos:",S)}},C=()=>{t("select"),a(null),q({name:"",docNumber:"",phone:"",email:"",addresses:[]}),b(W)},H=()=>{t(null),a(null),q({name:"",docNumber:"",phone:"",email:"",addresses:[]}),b(W),J(null)},te=async()=>{if(M||!s)return;if(!v.name.trim()){k.fire("Ateno","Informe o nome/razo social.","warning");return}if(!v.docNumber.trim()){k.fire("Ateno","Informe o CPF/CNPJ.","warning");return}const j=v.addresses.map(S=>({...S,address:Bt(S)}));try{f(!0);const S=await le("/clients",{method:"POST",body:JSON.stringify({name:v.name,personType:s,docNumber:v.docNumber.replace(/\D/g,""),phone:v.phone.replace(/\D/g,""),email:v.email,addresses:j})}),re=await S.json().catch(()=>null);if(!S.ok){k.fire("Erro",(re==null?void 0:re.error)||"No foi possvel salvar","error");return}k.fire("Sucesso","Cliente salvo com sucesso.","success"),l(ae=>[re.data,...ae]),H()}catch(S){console.error(S),k.fire("Erro","Falha ao salvar cliente.","error")}finally{f(!1)}},i=async()=>{if(M||!y)return;if(!Z.name.trim()){k.fire("Ateno","Informe o nome/razo social.","warning");return}if(!Z.docNumber.trim()){k.fire("Ateno","Informe o CPF/CNPJ.","warning");return}const j=Z.addresses.map(S=>({...S,address:Bt(S)}));try{f(!0);const S=await le(`/clients/${y._id}`,{method:"PUT",body:JSON.stringify({name:Z.name,personType:Z.personType,docNumber:Z.docNumber.replace(/\D/g,""),phone:Z.phone.replace(/\D/g,""),email:Z.email,addresses:j})}),re=await S.json().catch(()=>null);if(!S.ok){k.fire("Erro",(re==null?void 0:re.error)||"No foi possvel atualizar","error");return}console.log(" Cliente atualizado:",re.data),console.log(" Endereos aps atualizao:",re.data.addresses),k.fire("Sucesso","Cliente atualizado.","success"),l(ae=>ae.map(oe=>oe._id===y._id?re.data:oe)),$(re.data),G(!1),J(null),b(W)}catch(S){console.error(S),k.fire("Erro","Falha ao atualizar cliente.","error")}finally{f(!1)}},P=()=>{Y?K(j=>({...j,addresses:[...j.addresses,{...B}]})):q(j=>({...j,addresses:[...j.addresses,{...B}]})),b(W)},g=async j=>{const re=(Y?Z.addresses:v.addresses)[j],ae=(re==null?void 0:re.label)||`Endereo ${j+1}`;(await k.fire({title:"Remover Endereo?",html:`
        <div class="text-left">
          <p class="mb-3 text-sm text-slate-600">Tem certeza que deseja remover este endereo?</p>
          <div class="rounded-lg bg-red-50 border border-red-200 p-3">
            <p class="text-sm font-semibold text-red-900">${ae}</p>
            <p class="text-xs text-red-700 mt-1">${(re==null?void 0:re.address)||Bt(re)||"Endereo incompleto"}</p>
          </div>
          <p class="mt-3 text-xs text-slate-500">Esta ao no pode ser desfeita.</p>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonText:"Sim, remover",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280"})).isConfirmed&&(console.log(` Removendo endereo ${j}:`,re),Y?K(de=>{const ue=de.addresses.filter((pe,Ge)=>Ge!==j);return console.log(` Endereos restantes (${ue.length}):`,ue),{...de,addresses:ue}}):q(de=>{const ue=de.addresses.filter((pe,Ge)=>Ge!==j);return console.log(` Endereos restantes (${ue.length}):`,ue),{...de,addresses:ue}}),T===j&&(J(null),b(W)),k.fire({title:"Removido!",html:'<p>Endereo removido com sucesso.</p><p class="text-sm text-gray-600 mt-2">Lembre-se de clicar em <strong>"Salvar alteraes"</strong> para persistir esta mudana.</p>',icon:"success",timer:3e3,showConfirmButton:!1}))},A=j=>{J(j);const S=Y?Z.addresses:v.addresses;b({...S[j]})},D=()=>{if(T===null||T===-1){P();return}Y?K(j=>{const S=[...j.addresses];return S[T]={...B},{...j,addresses:S}}):q(j=>{const S=[...j.addresses];return S[T]={...B},{...j,addresses:S}}),b(W),J(null)},V=()=>{b(W),J(null)},X=()=>{b(W),J(-1)},ne=async()=>{var re;const j=Y&&(y!=null&&y._id)?y._id:null;if(!j){k.fire({title:"Ateno",text:"Para gerar um link de captura,  necessrio salvar o cliente primeiro. As coordenadas podem ser inseridas manualmente nos campos abaixo.",icon:"warning",confirmButtonText:"Entendi"});return}let S=B==null?void 0:B._id;if(!S&&T!==null){if(!(await k.fire({title:"Ateno",html:"Para capturar a localizao de um novo endereo, voc precisa salv-lo primeiro.<br/><br/>Deseja salvar este endereo agora?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sim, salvar",cancelButtonText:"Cancelar"})).isConfirmed)return;k.fire({title:"Salvando...",text:"Aguarde enquanto salvamos o endereo",allowOutsideClick:!1,didOpen:()=>{k.showLoading()}});try{const de=(T===null||T===-1?[...Z.addresses,B]:Z.addresses.map((Fe,it)=>it===T?B:Fe)).map(Fe=>({...Fe,address:Bt(Fe)})),ue=await le(`/clients/${j}`,{method:"PUT",body:JSON.stringify({name:Z.name,personType:Z.personType,docNumber:Z.docNumber.replace(/\D/g,""),phone:Z.phone.replace(/\D/g,""),email:Z.email,addresses:de})}),pe=await ue.json().catch(()=>null);if(!ue.ok){k.fire("Erro",(pe==null?void 0:pe.error)||"No foi possvel salvar","error");return}l(Fe=>Fe.map(it=>it._id===j?pe.data:it)),$(pe.data);const Ge=pe.data.addresses||[];if(Ge.length>0)if(T===null||T===-1)S=Ge[Ge.length-1]._id,console.log(` Cliente salvo, novo endereo ID: ${S}`);else{const Fe=Ge.find(it=>it.addressStreet===B.addressStreet&&it.addressNumber===B.addressNumber&&it.label===B.label);Fe&&(S=Fe._id,console.log(` Cliente salvo, endereo atualizado ID: ${S}`))}if(!S){k.fire("Erro","No foi possvel obter o ID do endereo. Tente novamente.","error");return}J(null),b(W)}catch(oe){console.error("Erro ao salvar cliente:",oe),k.fire("Erro","Falha ao salvar o cliente. Tente novamente.","error");return}}try{k.fire({title:"Gerando link...",allowOutsideClick:!1,didOpen:()=>{k.showLoading()}});const ae=await le("/location-capture/create",{method:"POST",body:JSON.stringify({description:`Confirme a localizao - ${y.name}`,resourceType:"client",resourceId:j,addressId:S,expiresInHours:72})}),oe=await ae.json();if(k.close(),!ae.ok)throw new Error((oe==null?void 0:oe.error)||"Erro ao gerar link");const de=window.location.protocol,ue=window.location.host,pe=`${de}//${ue}/location-capture/${oe.data.token}`,Ge=`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(pe)}`,Fe=await k.fire({title:" Link de Captura Gerado",html:`
          <div class="text-left space-y-4">
            <p class="text-sm text-gray-600">
              Envie este link para <strong>${y.name}</strong> confirmar a localizao:
            </p>
            
            <div class="p-3 bg-blue-50 rounded border border-blue-200">
              <p class="text-xs text-gray-500 mb-1">Link:</p>
              <input 
                type="text" 
                value="${pe}" 
                readonly 
                class="w-full p-2 text-sm border rounded"
                id="locationLink"
              />
            </div>

            <div class="flex gap-2">
              <button 
                onclick="navigator.clipboard.writeText('${pe}'); this.innerText=' Copiado!'; this.classList.add('bg-green-500'); this.classList.remove('bg-blue-500')"
                class="flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm"
              >
                 Copiar Link
              </button>
              <button 
                onclick="window.open('https://wa.me/${(re=y.phone)==null?void 0:re.replace(/\D/g,"")}?text=${encodeURIComponent("Ol! Por favor, confirme sua localizao atravs deste link: "+pe)}', '_blank')"
                class="flex-1 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 text-sm"
              >
                 WhatsApp
              </button>
            </div>

            <div class="text-center">
              <p class="text-xs text-gray-500 mb-2">QR Code:</p>
              <img src="${Ge}" alt="QR Code" class="mx-auto rounded" />
            </div>

            <p class="text-xs text-gray-500">
               Link vlido por 72 horas. As coordenadas sero atualizadas automaticamente quando o cliente confirmar.
            </p>
          </div>
        `,width:600,confirmButtonText:"Fechar",showCloseButton:!0})}catch(ae){k.close(),console.error("Erro ao gerar link:",ae),k.fire("Erro",(ae==null?void 0:ae.message)||"Erro ao gerar link. Tente novamente.","error")}},h=(j,S,re)=>j&&S?`https://www.google.com/maps?q=${j},${S}`:"#",_=async()=>{var j;if(y)try{const S="https://gruporeis.cloud/api",re=await le("/location-capture/create",{method:"POST",body:JSON.stringify({description:`Confirme a localizao - ${y.name}`,resourceType:"client",resourceId:y._id,expiresInHours:72})}),ae=await re.json();if(!re.ok){k.fire("Erro",ae.error||"Falha ao gerar link","error");return}const oe=window.location.protocol,de=window.location.host,ue=`${oe}//${de}/location-capture/${ae.data.token}`,pe=`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(ue)}`;k.fire({title:" Link de Captura Gerado",html:`
          <div class="text-left space-y-4">
            <div class="p-3 bg-blue-50 rounded border border-blue-200 mb-3">
              <p class="text-xs text-blue-700 font-semibold mb-1"> Novo Endereo</p>
              <p class="text-xs text-blue-600">Quando o cliente confirmar a localizao, um NOVO endereo ser adicionado automaticamente.</p>
            </div>
            <p class="text-sm text-gray-600">
              Envie este link para <strong>${y.name}</strong> confirmar a localizao:
            </p>
            
            <div class="p-3 bg-blue-50 rounded border border-blue-200">
              <p class="text-xs text-gray-500 mb-1">Link:</p>
              <input 
                type="text" 
                value="${ue}" 
                readonly 
                class="w-full p-2 text-sm border rounded"
                id="locationLink"
              />
            </div>

            <div class="flex gap-2">
              <button 
                onclick="navigator.clipboard.writeText('${ue}'); this.innerText=' Copiado!'; this.classList.add('bg-green-500')"
                class="flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm"
              >
                 Copiar Link
              </button>
              <button 
                onclick="window.open('https://wa.me/${(j=y.phone)==null?void 0:j.replace(/\D/g,"")}?text=${encodeURIComponent("Ol! Por favor, confirme sua localizao atravs deste link: "+ue)}', '_blank')"
                class="flex-1 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 text-sm"
              >
                 WhatsApp
              </button>
            </div>

            <div class="text-center">
              <p class="text-xs text-gray-500 mb-2">QR Code:</p>
              <img src="${pe}" alt="QR Code" class="mx-auto rounded" />
            </div>

            <p class="text-xs text-gray-500">
               Link vlido por 72 horas
            </p>
          </div>
        `,width:600,confirmButtonText:"Fechar",showCloseButton:!0})}catch(S){console.error("Error generating location link:",S),k.fire("Erro","Falha ao gerar link de captura","error")}},ee=async()=>{if(!y)return;const j=await k.fire({title:"Excluir cliente?",html:'<p>Essa ao no pode ser desfeita.</p><input id="swal-reason" class="swal2-input" placeholder="Motivo (obrigatrio)">',icon:"warning",showCancelButton:!0,confirmButtonText:"Excluir",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",preConfirm:()=>{const re=document.getElementById("swal-reason"),ae=re==null?void 0:re.value.trim();if(!ae){k.showValidationMessage("Informe um motivo para excluir.");return}return ae}});if(!j.isConfirmed||!j.value)return;const S=j.value;try{const re=await le(`/clients/${y._id}`,{method:"DELETE"}),ae=await re.json();if(!re.ok){k.fire("Erro",(ae==null?void 0:ae.error)||"No foi possvel excluir","error");return}k.fire("Sucesso",`Cliente excludo. Motivo: ${S}`,"success"),l(oe=>oe.filter(de=>de._id!==y._id)),$(null),G(!1)}catch(re){console.error(re),k.fire("Erro","Falha ao excluir cliente.","error")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Clientes e Obras"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Cadastro de clientes, contatos e endereos de obra. Dados sero carregados do banco assim que a API estiver conectada."})]}),e===null&&r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"relative flex flex-wrap items-center gap-2 rounded-lg border border-white/10 bg-white/5 px-3 py-2",children:[r.jsx("input",{value:o,onChange:j=>c(j.target.value),placeholder:"Buscar por nome, CPF/CNPJ ou telefone",className:"w-56 bg-transparent text-sm text-white outline-none placeholder:text-slate-400"}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>x(j=>!j),className:"flex items-center gap-2 rounded-md border border-white/10 bg-slate-900 px-3 py-2 pr-7 text-xs font-semibold text-white transition hover:border-emerald-300/50 focus:border-emerald-400 focus:outline-none",children:[d==="all"?"Todos":d==="cpf"?"CPF":"CNPJ",r.jsx("span",{className:"text-[10px] text-slate-300",children:""})]}),L&&r.jsx("div",{className:"absolute right-0 z-20 mt-1 w-28 overflow-hidden rounded-md border border-white/10 bg-slate-900 shadow-xl shadow-black/40",children:[{label:"Todos",value:"all"},{label:"CPF",value:"cpf"},{label:"CNPJ",value:"cnpj"}].map(j=>r.jsx("button",{type:"button",onClick:()=>{m(j.value),x(!1)},className:"block w-full px-3 py-2 text-left text-xs font-semibold text-slate-200 transition hover:bg-white/10",children:j.label},j.value))})]})]}),r.jsx("button",{onClick:C,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-blue-600 hover:to-emerald-500",children:"+ Novo cliente/obra"})]})]}),e===null&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:w.map(j=>r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:j.label}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:j.value})]},j.label))}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-0 text-sm text-slate-200 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-white",children:"Lista de clientes"}),r.jsx("span",{className:"text-xs text-slate-300",children:u?"Carregando...":`${F.length} registro(s)`})]}),u?r.jsxs("div",{className:"px-6 py-8 text-center text-slate-300",children:[r.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-emerald-400"}),r.jsx("p",{className:"text-sm",children:"Carregando clientes..."})]}):F.length===0?r.jsx("div",{className:"px-6 py-4 text-slate-300",children:"Nenhum cliente cadastrado. Clique em + Novo cliente/obra para adicionar."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-white/5 text-xs uppercase text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Nome"}),r.jsx("th",{className:"px-4 py-3",children:"Documento"}),r.jsx("th",{className:"px-4 py-3",children:"Telefone"}),r.jsx("th",{className:"px-4 py-3",children:"E-mail"}),r.jsx("th",{className:"px-4 py-3",children:"Endereo"}),r.jsx("th",{className:"px-4 py-3 text-right",children:"Aes"})]})}),r.jsx("tbody",{children:F.map(j=>r.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 cursor-pointer",onClick:()=>$(j),children:[r.jsx("td",{className:"px-4 py-3 text-white",children:j.name}),r.jsxs("td",{className:"px-4 py-3 text-slate-200",children:[j.personType==="cnpj"?"CNPJ":"CPF"," ",j.docNumber?j.personType==="cnpj"?qs(j.docNumber.replace(/\D/g,"")):Vs(j.docNumber.replace(/\D/g,"")):"-"]}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:j.phone?Us(j.phone.replace(/\D/g,"")):"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:j.email||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:j.addresses&&Array.isArray(j.addresses)&&j.addresses.length>0?j.addresses[0].address||j.addresses[0].label||"Endereo cadastrado":j.address||"-"}),r.jsx("td",{className:"px-4 py-3 text-right text-slate-200",children:r.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),$(j)},className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Detalhes"})})]},j._id))})]})})]})]}),e==="select"&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:"Novo cliente"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Escolha se o cliente  Pessoa Fsica (CPF) ou Pessoa Jurdica (CNPJ)."})]}),r.jsx("button",{onClick:H,className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})]}),r.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[r.jsxs("button",{onClick:()=>{a("cpf"),t("form")},className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3 text-left text-sm font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:["Pessoa Fsica (CPF)",r.jsx("div",{className:"text-xs font-normal text-slate-300",children:"CPF, nome completo e contato."})]}),r.jsxs("button",{onClick:()=>{a("cnpj"),t("form")},className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3 text-left text-sm font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:["Pessoa Jurdica (CNPJ)",r.jsx("div",{className:"text-xs font-normal text-slate-300",children:"CNPJ, razo social, contato e obra."})]})]})]}),e==="form"&&s&&r.jsxs("div",{className:"space-y-5 rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-lg font-semibold text-white",children:["Cadastro de cliente (",s==="cpf"?"CPF":"CNPJ",")"]}),r.jsx("p",{className:"text-xs text-slate-300",children:"Preencha os dados. Integrao com API vir em seguida."})]}),r.jsx("button",{onClick:H,className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:s==="cpf"?"Nome completo":"Razo social"}),r.jsx("input",{value:v.name,onChange:j=>q(S=>({...S,name:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:s==="cpf"?"Joo da Silva":"Reis Fundaes LTDA"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:s==="cpf"?"CPF":"CNPJ"}),r.jsx("input",{value:v.docNumber,onChange:j=>{const S=j.target.value.replace(/\D/g,""),re=s==="cpf"?Vs(S):qs(S);q(ae=>({...ae,docNumber:re}))},maxLength:s==="cpf"?14:18,className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:s==="cpf"?"000.000.000-00":"00.000.000/0000-00"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Telefone"}),r.jsx("input",{value:v.phone,onChange:j=>{const S=Us(j.target.value);q(re=>({...re,phone:S}))},maxLength:15,className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"(11) 99999-9999"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"E-mail"}),r.jsx("input",{type:"email",value:v.email,onChange:j=>q(S=>({...S,email:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"contato@cliente.com"})]})]}),r.jsxs("div",{className:"space-y-3 rounded-lg border border-white/10 bg-white/5 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Endereos"}),r.jsx("div",{className:"text-xs text-slate-400",children:"Adicione um ou mais endereos para este cliente"})]}),r.jsx("button",{type:"button",onClick:X,className:"rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-1.5 text-xs font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:"+ Novo Endereo"})]}),v.addresses.length>0&&r.jsx("div",{className:"space-y-2",children:v.addresses.map((j,S)=>r.jsxs("div",{className:"flex items-start justify-between rounded-lg border border-white/10 bg-slate-900/60 p-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-white text-sm",children:j.label||`Endereo ${S+1}`}),r.jsx("div",{className:"text-xs text-slate-300 mt-1",children:Bt(j)||"Endereo incompleto"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>A(S),className:"rounded-md border border-white/10 bg-white/5 px-2 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Editar"}),r.jsx("button",{type:"button",onClick:()=>g(S),className:"rounded-md border border-red-500/30 bg-red-500/20 px-2 py-1 text-xs font-semibold text-red-100 transition hover:border-red-400/40 hover:bg-red-500/30",children:"Remover"})]})]},S))}),T!==null||v.addresses.length===0?r.jsxs("div",{className:"space-y-3 rounded-lg border border-emerald-400/30 bg-emerald-500/5 p-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:T!==null?"Editar Endereo":"Novo Endereo"}),T===null&&v.addresses.length>0&&r.jsx("button",{type:"button",onClick:V,className:"text-xs text-slate-400 hover:text-white",children:"Cancelar"})]}),r.jsxs("div",{className:"grid gap-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Etiqueta (ex: Casa, Escritrio, Obra 1)"}),r.jsx("input",{value:B.label,onChange:j=>b(S=>({...S,label:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Endereo Principal"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Logradouro"}),r.jsx("input",{value:B.addressStreet,onChange:j=>b(S=>({...S,addressStreet:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Rua, Avenida, etc."})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Nmero"}),r.jsx("input",{value:B.addressNumber,onChange:j=>b(S=>({...S,addressNumber:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"123"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Bairro"}),r.jsx("input",{value:B.addressNeighborhood,onChange:j=>b(S=>({...S,addressNeighborhood:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Centro"})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Cidade"}),r.jsx("input",{value:B.addressCity,onChange:j=>b(S=>({...S,addressCity:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"So Paulo"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"UF"}),r.jsxs("select",{value:B.addressState,onChange:j=>b(S=>({...S,addressState:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),Wc.map(j=>r.jsx("option",{value:j,children:j},j))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"CEP"}),r.jsx("input",{value:B.addressZip,onChange:j=>b(S=>({...S,addressZip:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"00000-000"})]})]}),r.jsxs("div",{className:"rounded-lg border border-blue-400/30 bg-blue-500/5 p-3",children:[r.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-200",children:"Localizao (Latitude / Longitude)"}),r.jsx("button",{type:"button",onClick:ne,className:"rounded-md border border-blue-400/50 bg-blue-500/20 px-2 py-1 text-xs font-semibold text-blue-50 transition hover:border-blue-300 hover:bg-blue-500/30",children:" Gerar Link de Captura"})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-300",children:"Latitude"}),r.jsx("input",{type:"number",step:"any",value:B.latitude??"",onChange:j=>b(S=>({...S,latitude:j.target.value?parseFloat(j.target.value):void 0})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-blue-400/60 focus:ring-blue-500/40",placeholder:"-23.5505199"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-300",children:"Longitude"}),r.jsx("input",{type:"number",step:"any",value:B.longitude??"",onChange:j=>b(S=>({...S,longitude:j.target.value?parseFloat(j.target.value):void 0})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-blue-400/60 focus:ring-blue-500/40",placeholder:"-46.6333094"})]})]}),B.latitude&&B.longitude&&r.jsx("div",{className:"mt-2",children:r.jsx("a",{href:h(B.latitude,B.longitude),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-1.5 text-xs font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:" Ver no Google Maps"})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:V,className:"rounded-md border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"}),r.jsx("button",{type:"button",onClick:D,className:"rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-1.5 text-xs font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:T!==null?"Salvar":"Adicionar"})]})]})]}):null]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:te,disabled:M,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:M?"Salvando...":"Salvar"})})]}),y&&r.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60 px-4 py-4",children:r.jsxs("div",{className:"flex h-full max-h-[90vh] w-full max-w-2xl flex-col rounded-2xl border border-white/10 bg-slate-900 shadow-2xl shadow-black/50 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-white/10 flex-shrink-0",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:y.name}),r.jsxs("div",{className:"text-xs text-slate-300",children:[y.personType==="cnpj"?"CNPJ":"CPF"," ",y.docNumber?y.personType==="cnpj"?qs(y.docNumber.replace(/\D/g,"")):Vs(y.docNumber.replace(/\D/g,"")):"-"]})]}),r.jsx("button",{onClick:()=>$(null),className:"h-9 w-9 rounded-lg border border-white/10 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white","aria-label":"Fechar",children:""})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:z?r.jsx(ew,{clientId:y._id,clientName:y.name,onClose:()=>I(null)}):Y?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:Z.personType==="cpf"?"Nome completo":"Razo social"}),r.jsx("input",{value:Z.name,onChange:j=>K(S=>({...S,name:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:Z.personType==="cpf"?"CPF":"CNPJ"}),r.jsx("input",{value:Z.docNumber,onChange:j=>{const S=j.target.value.replace(/\D/g,""),re=Z.personType==="cpf"?Vs(S):qs(S);K(ae=>({...ae,docNumber:re}))},maxLength:Z.personType==="cpf"?14:18,className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:Z.personType==="cpf"?"000.000.000-00":"00.000.000/0000-00"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo"}),r.jsxs("select",{value:Z.personType,onChange:j=>K(S=>({...S,personType:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"cpf",children:"CPF"}),r.jsx("option",{value:"cnpj",children:"CNPJ"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Telefone"}),r.jsx("input",{value:Z.phone,onChange:j=>{const S=Us(j.target.value);K(re=>({...re,phone:S}))},maxLength:15,className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"(11) 99999-9999"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"E-mail"}),r.jsx("input",{value:Z.email,onChange:j=>K(S=>({...S,email:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]})]}),r.jsxs("div",{className:"mt-4 space-y-3 rounded-lg border border-white/10 bg-white/5 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Endereos"}),r.jsx("div",{className:"text-xs text-slate-400",children:"Gerencie os endereos do cliente"})]}),r.jsx("button",{type:"button",onClick:X,className:"rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-1.5 text-xs font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:"+ Novo Endereo"})]}),Z.addresses.length>0&&r.jsx("div",{className:"space-y-2",children:Z.addresses.map((j,S)=>r.jsxs("div",{className:"flex items-start justify-between rounded-lg border border-white/10 bg-slate-900/60 p-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-white text-sm",children:j.label||`Endereo ${S+1}`}),r.jsx("div",{className:"text-xs text-slate-300 mt-1",children:Bt(j)||"Endereo incompleto"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>A(S),className:"rounded-md border border-white/10 bg-white/5 px-2 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Editar"}),r.jsx("button",{type:"button",onClick:()=>g(S),className:"rounded-md border border-red-500/30 bg-red-500/20 px-2 py-1 text-xs font-semibold text-red-100 transition hover:border-red-400/40 hover:bg-red-500/30",children:"Remover"})]})]},S))}),(T!==null||Z.addresses.length===0)&&r.jsxs("div",{className:"space-y-3 rounded-lg border border-emerald-400/30 bg-emerald-500/5 p-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:T!==null&&T!==-1?"Editar Endereo":"Novo Endereo"}),(T===null||T===-1)&&Z.addresses.length>0&&r.jsx("button",{type:"button",onClick:V,className:"text-xs text-slate-400 hover:text-white",children:"Cancelar"})]}),r.jsxs("div",{className:"grid gap-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Etiqueta (ex: Casa, Escritrio, Obra 1)"}),r.jsx("input",{value:B.label||"",onChange:j=>b(S=>({...S,label:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Endereo Principal"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Logradouro"}),r.jsx("input",{value:B.addressStreet,onChange:j=>b(S=>({...S,addressStreet:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Rua, Avenida, etc."})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Nmero"}),r.jsx("input",{value:B.addressNumber,onChange:j=>b(S=>({...S,addressNumber:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"123"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Bairro"}),r.jsx("input",{value:B.addressNeighborhood,onChange:j=>b(S=>({...S,addressNeighborhood:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Centro"})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Cidade"}),r.jsx("input",{value:B.addressCity,onChange:j=>b(S=>({...S,addressCity:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"So Paulo"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"UF"}),r.jsxs("select",{value:B.addressState,onChange:j=>b(S=>({...S,addressState:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),Wc.map(j=>r.jsx("option",{value:j,children:j},j))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"CEP"}),r.jsx("input",{value:B.addressZip,onChange:j=>b(S=>({...S,addressZip:j.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"00000-000"})]})]}),r.jsxs("div",{className:"rounded-lg border border-blue-400/30 bg-blue-500/5 p-3",children:[r.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-200",children:"Localizao (Latitude / Longitude)"}),r.jsx("button",{type:"button",onClick:ne,className:"rounded-md border border-blue-400/50 bg-blue-500/20 px-2 py-1 text-xs font-semibold text-blue-50 transition hover:border-blue-300 hover:bg-blue-500/30",children:" Gerar Link de Captura"})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-300",children:"Latitude"}),r.jsx("input",{type:"number",step:"any",value:B.latitude??"",onChange:j=>b(S=>({...S,latitude:j.target.value?parseFloat(j.target.value):void 0})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-blue-400/60 focus:ring-blue-500/40",placeholder:"-23.5505199"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-300",children:"Longitude"}),r.jsx("input",{type:"number",step:"any",value:B.longitude??"",onChange:j=>b(S=>({...S,longitude:j.target.value?parseFloat(j.target.value):void 0})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-blue-400/60 focus:ring-blue-500/40",placeholder:"-46.6333094"})]})]}),B.latitude&&B.longitude&&r.jsx("div",{className:"mt-2",children:r.jsx("a",{href:h(B.latitude,B.longitude),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-1.5 text-xs font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:" Ver no Google Maps"})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:V,className:"rounded-md border border-white/10 bg-white/5 px-3 py-1.5 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"}),r.jsx("button",{type:"button",onClick:D,className:"rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-1.5 text-xs font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:T!==null?"Salvar":"Adicionar"})]})]})]})]})]}):r.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Telefone"}),r.jsx("div",{className:"text-white",children:y.phone?Us(y.phone.replace(/\D/g,"")):"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"E-mail"}),r.jsx("div",{className:"text-white",children:y.email||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200 sm:col-span-2 space-y-1",children:[r.jsxs("div",{className:"text-[11px] uppercase text-slate-400",children:["Endereos ",y.addresses&&y.addresses.length>0&&`(${y.addresses.length})`]}),y.addresses&&Array.isArray(y.addresses)&&y.addresses.length>0?r.jsx("div",{className:"space-y-2",children:y.addresses.map((j,S)=>r.jsxs("div",{className:"text-white",children:[r.jsx("div",{className:"font-semibold text-sm",children:j.label||`Endereo ${S+1}`}),r.jsx("div",{className:"text-xs text-slate-300 mt-0.5",children:j.address||Bt(j)}),j.latitude&&j.longitude&&r.jsx("div",{className:"mt-1",children:r.jsx("a",{href:h(j.latitude,j.longitude),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 underline",children:" Ver localizao no Google Maps"})})]},j._id||S))}):r.jsxs("div",{children:[r.jsx("div",{className:"text-slate-400 text-sm italic",children:"Nenhum endereo cadastrado"}),y.address&&r.jsxs("div",{className:"mt-2 p-2 bg-yellow-500/10 border border-yellow-500/30 rounded text-xs",children:[r.jsx("div",{className:"text-yellow-300 font-semibold mb-1",children:" Endereo legado (ser limpo ao editar):"}),r.jsx("div",{className:"text-yellow-200",children:y.address})]})]})]})]})}),r.jsxs("div",{className:"border-t border-white/10 p-6 pt-4 flex justify-end gap-2 text-xs flex-shrink-0",children:[r.jsx("button",{onClick:()=>$(null),className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Fechar"}),z?r.jsx("button",{onClick:()=>I(null),className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Voltar"}):Y?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>G(!1),className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar edio"}),r.jsx("button",{onClick:i,className:"rounded-md border border-emerald-400/50 bg-emerald-500/20 px-3 py-2 font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/30",children:"Salvar alteraes"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>I("form"),className:"rounded-md border border-blue-400/50 bg-blue-500/20 px-3 py-2 font-semibold text-blue-50 transition hover:border-blue-300/50 hover:bg-blue-500/30",children:" Fazer Oramento"}),r.jsx("button",{onClick:_,className:"rounded-md border border-purple-400/50 bg-purple-500/20 px-3 py-2 font-semibold text-purple-50 transition hover:border-purple-300/50 hover:bg-purple-500/30",children:" Gerar Link de Captura"}),r.jsx("button",{onClick:()=>G(!0),className:"rounded-md border border-white/10 bg-emerald-500/20 px-3 py-2 font-semibold text-emerald-50 transition hover:border-emerald-300/50 hover:bg-emerald-500/30",children:"Editar"}),r.jsx("button",{onClick:ee,className:"rounded-md border border-red-500/30 bg-red-500/20 px-3 py-2 font-semibold text-red-100 transition hover:border-red-400/40 hover:bg-red-500/30",children:"Excluir"})]})]})]})})]})}function rw(){return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Novo cliente/obra"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Formulrio ser conectado ao backend para criar clientes e endereos de obra. Preencheremos aqui quando a API estiver pronta."})]}),r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-sm text-slate-200 shadow-inner shadow-black/20",children:"Em breve: formulrio de cadastro."})]})}function sw({jobs:e}){const t=p.useRef(null),s=p.useRef(null),a=p.useRef([]),[n,l]=p.useState(!0),[o,c]=p.useState(null),[d,m]=p.useState([]),[L,x]=p.useState(!1),y="AIzaSyAUoyCSevBWa4CkeDcBuYd-R0mbR2NtpIs",$=M=>{console.log(`[JobsMap] ${M}`),m(f=>[...f.slice(-9),`${new Date().toLocaleTimeString()}: ${M}`])};p.useEffect(()=>{$("Iniciando carregamento do Google Maps"),(u=>{let N=0;const T=50,J=setInterval(()=>{N++,t.current?($(`mapRef disponvel aps ${N*100}ms`),clearInterval(J),u()):N>=T&&($("TIMEOUT: mapRef no est disponvel aps 5 segundos"),clearInterval(J),c("Elemento do mapa no foi encontrado. Recarregue a pgina."),l(!1))},100)})(()=>{if(window.google&&window.google.maps&&typeof window.google.maps.Map=="function"){$("Google Maps j est disponvel!"),Y();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){$("Script j existe no DOM, aguardando carregamento...");let T=0;const J=100,z=setInterval(()=>{T++,window.google&&window.google.maps&&typeof window.google.maps.Map=="function"?($(`Google Maps carregado aps ${T*100}ms`),clearInterval(z),Y()):T>=J&&($("TIMEOUT: Google Maps no carregou aps 10 segundos"),clearInterval(z),c("Timeout ao carregar Google Maps. Verifique sua conexo e recarregue a pgina."),l(!1))},100);return()=>clearInterval(z)}$("Criando novo script do Google Maps");const N=document.createElement("script");N.src=`https://maps.googleapis.com/maps/api/js?key=${y}&libraries=places`,N.async=!0,N.defer=!0,N.onload=()=>{$("Script carregado com sucesso (onload)"),setTimeout(()=>{window.google&&window.google.maps&&typeof window.google.maps.Map=="function"?($("Google Maps confirmado disponvel aps onload"),Y()):($("ERRO: Google Maps no disponvel aps onload"),c("Google Maps no est disponvel aps carregar o script."),l(!1))},500)},N.onerror=()=>{$("ERRO: Falha ao carregar script do Google Maps"),c("Erro ao carregar Google Maps. Verifique sua conexo com a internet."),l(!1)},document.head.appendChild(N),$("Script adicionado ao DOM")})},[]);const Y=()=>{if($("Tentando inicializar mapa..."),!t.current){$("ERRO: mapRef.current  null"),c("Elemento do mapa no encontrado."),l(!1);return}if(!window.google||!window.google.maps||typeof window.google.maps.Map!="function"){$("ERRO: window.google.maps.Map no est disponvel"),c("Google Maps API no est disponvel."),l(!1);return}try{$("Criando instncia do mapa...");const M={lat:-15.7975,lng:-47.8919},f=new window.google.maps.Map(t.current,{zoom:4,center:M,disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#242f3e"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c3e50"}]}]});s.current=f,$(" Mapa inicializado com sucesso!"),l(!1),c(null),x(!0)}catch(M){$(`ERRO ao inicializar mapa: ${M.message}`),console.error("Erro detalhado:",M),c(`Erro ao inicializar mapa: ${M.message}`),l(!1)}},G=async M=>{var I,O;if(!window.google||!window.google.maps||!M){$("Geocodificao cancelada: Google Maps no disponvel");return}$(`Iniciando geocodificao para ${e.length} job(s)`),a.current.forEach(U=>{U&&U.setMap(null)}),a.current=[];const f=new window.google.maps.Geocoder,u=new window.google.maps.LatLngBounds,N=e.filter(U=>U.site&&U.site.trim());if($(`Jobs com endereo: ${N.length}`),N.length===0){$("Nenhum job com endereo para geocodificar");return}const T=new Map;for(const U of N){const Q=(((I=U.site)==null?void 0:I.replace(/\s*\|\s*/g,", ").replace(/\s+/g," ").trim())||"").toLowerCase();T.has(Q)||T.set(Q,[]),T.get(Q).push(U)}$(`Endereos nicos para geocodificar: ${T.size}`);const J={pendente:"#fbbf24",em_execucao:"#3b82f6",concluida:"#10b981",cancelada:"#ef4444"},z={pendente:4,em_execucao:3,concluida:2,cancelada:1};for(const[U,E]of T.entries()){const Q=(O=E[0].site)==null?void 0:O.replace(/\s*\|\s*/g,", ").replace(/\s+/g," ").trim();$(`Geocodificando endereo agrupado: ${Q} (${E.length} OS)`);try{await new Promise(W=>{f.geocode({address:Q},(Z,K)=>{if(K==="OK"&&Z&&Z[0]){const v=Z[0].geometry.location,q={lat:v.lat(),lng:v.lng()};$(` Geocodificado: ${Q} -> ${q.lat}, ${q.lng} (${E.length} OS)`);let B="cancelada",b=0;E.forEach(C=>{const H=z[C.status]??0;H>b&&(b=H,B=C.status)});const w=J[B]||"#6b7280",F=new window.google.maps.Marker({position:q,map:M,title:E.length===1?E[0].title:`${E.length} OS neste endereo`,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:w,fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},label:E.length>1?{text:String(E.length),color:"#111827",fontSize:"11px",fontWeight:"bold"}:void 0,zIndex:B==="pendente"?400:B==="em_execucao"?300:B==="concluida"?200:100}),R=new window.google.maps.InfoWindow({content:`
                  <div style="color: #1f2937; padding: 8px; min-width: 220px; max-width: 260px;">
                    <h3 style="margin: 0 0 6px 0; font-size: 14px; font-weight: bold; color: #111827;">
                      ${E.length===1?"Ordem de Servio":`${E.length} Ordens de Servio`}
                    </h3>
                    <p style="margin: 4px 0 8px 0; font-size: 12px; color: #4b5563;">
                      <strong>Local:</strong> ${Q}
                    </p>
                    <div style="max-height: 160px; overflow-y: auto; padding-right: 4px;">
                      ${E.map(C=>`
                        <div style="margin-bottom: 8px; padding: 6px; border-radius: 6px; background: #f9fafb; border: 1px solid #e5e7eb;">
                          <div style="font-size: 12px; font-weight: 600; color: #111827; margin-bottom: 2px;">
                            ${C.title}
                          </div>
                          <div style="font-size: 11px; color: #4b5563; margin-bottom: 1px;">
                            <strong>Cliente:</strong> ${C.clientName||"N/A"}
                          </div>
                          <div style="font-size: 11px; color: #4b5563; margin-bottom: 1px;">
                            <strong>Status:</strong> ${C.status}
                          </div>
                          ${C.team?`<div style="font-size: 11px; color: #4b5563;"><strong>Equipe:</strong> ${C.team}</div>`:""}
                        </div>
                      `).join("")}
                    </div>
                  </div>
                `});F.addListener("click",()=>{R.open(M,F)}),a.current.push(F),u.extend(q)}else $(` Erro na geocodificao (${K}): ${Q}`);W()})}),await new Promise(W=>setTimeout(W,200))}catch(W){$(`ERRO ao geocodificar ${Q}: ${W.message}`)}}a.current.length>0?(M.fitBounds(u),a.current.length===1&&M.setZoom(15),$(` ${a.current.length} marcador(es) adicionado(s)`)):$(" Nenhum marcador foi criado")};return p.useEffect(()=>{$(`useEffect jobs/mapReady: mapa=${!!s.current}, google=${!!(window.google&&window.google.maps)}, jobs=${e.length}, mapReady=${L}`),L&&s.current&&window.google&&window.google.maps?e.length>0?($(`Jobs atualizados: ${e.length}, processando...`),setTimeout(()=>{G(s.current)},500)):($("Nenhum job para processar"),a.current.forEach(M=>{M&&M.setMap(null)}),a.current=[]):$("Mapa ou Google Maps no disponvel para atualizar marcadores")},[e,L]),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Mapa de Locais de Servio"}),r.jsxs("p",{className:"text-xs text-slate-400",children:[e.filter(M=>M.site&&M.site.trim()).length," local(is) com endereo"]})]}),!n&&!o&&r.jsxs("div",{className:"flex gap-2 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),r.jsx("span",{className:"text-slate-300",children:"Pendente"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-slate-300",children:"Em execuo"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-slate-300",children:"Concluda"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),r.jsx("span",{className:"text-slate-300",children:"Cancelada"})]})]})]}),r.jsxs("div",{className:"relative h-[300px] sm:h-[400px] md:h-[500px] rounded-lg border border-white/10 overflow-hidden bg-slate-800",children:[r.jsx("div",{ref:t,className:"w-full h-full"}),n&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300 mb-2",children:"Carregando mapa..."}),d.length>0&&r.jsxs("div",{className:"mt-4 p-3 bg-black/50 rounded text-left max-h-32 overflow-y-auto",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Debug:"}),d.map((M,f)=>r.jsx("p",{className:"text-xs text-slate-500 font-mono",children:M},f))]})]})}),o&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-10",children:r.jsxs("div",{className:"text-center text-slate-300",children:[r.jsx("p",{className:"text-sm mb-4",children:o}),d.length>0&&r.jsxs("div",{className:"mb-4 p-3 bg-black/50 rounded text-left max-h-40 overflow-y-auto",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"ltimos logs:"}),d.map((M,f)=>r.jsx("p",{className:"text-xs text-slate-500 font-mono",children:M},f))]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-600",children:"Recarregar Pgina"})]})})]})]})}const Jl={pendente:"Pendente",em_execucao:"Em execuo",concluida:"Concluda",cancelada:"Cancelada"},Jc={pendente:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",em_execucao:"bg-blue-500/20 text-blue-300 border-blue-500/50",concluida:"bg-emerald-500/20 text-emerald-300 border-emerald-500/50",cancelada:"bg-red-500/20 text-red-300 border-red-500/50"},aw=[{group:"1. Construo civil e fundaes",value:"1.1",label:"Perfurao de Estacas para Fundaes Residenciais e Comerciais"},{group:"1. Construo civil e fundaes",value:"1.3",label:"Abertura de Furos para Sapatas, Brocas e Pilares"},{group:"1. Construo civil e fundaes",value:"1.4",label:"Perfurao para Estacas Profundas"},{group:"2. Saneamento e drenagem",value:"2.1",label:"Perfurao de Fossas Spticas"},{group:"2. Saneamento e drenagem",value:"2.2",label:"Abertura de Sumidouros"},{group:"2. Saneamento e drenagem",value:"2.3",label:"Poos de Infiltrao"},{group:"2. Saneamento e drenagem",value:"2.4",label:"Perfurao para Drenagem de guas Pluviais"},{group:"2. Saneamento e drenagem",value:"2.5",label:"Ampliao e Recuperao de Sistemas Antigos"},{group:"3. Construo e estruturas",value:"3.1",label:"Abertura de Furos para Alambrados e Postes"},{group:"3. Construo e estruturas",value:"3.2",label:"Perfurao para Bases de Torres, Placas e Estruturas Metlicas"},{group:"3. Construo e estruturas",value:"3.3",label:"Abertura de Furos para Contenes, Ancoragens e Reforo Estrutural"},{group:"4. Servios rurais e agro",value:"4.1",label:"Abertura de Buracos para Moures e Cercas"},{group:"4. Servios rurais e agro",value:"4.2",label:"Perfurao para Irrigao"},{group:"4. Servios rurais e agro",value:"4.3",label:"Sondagem Leve do Solo (Avaliao Inicial)"}],nw=["Residencial","Comercial","Industrial","Rural"],lw=["Terra comum","Argiloso","Arenoso","Rochoso","No sei informar"],Kr=e=>({Argiloso:"argiloso",Arenoso:"arenoso",Rochoso:"rochoso","Terra comum":"misturado","No sei informar":"outro"})[e]||"outro",Wr=e=>({"Acesso livre e desimpedido":"livre","Algumas limitaes":"limitado","Acesso restrito ou complicado":"restrito"})[e]||"livre",Gl=e=>{if(!e)return"-";try{const t=new Date(e);if(isNaN(t.getTime()))return e;const s=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear(),l=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0");return`${s}/${a}/${n} ${l}:${o}`}catch{return e}},Gc=e=>{if(!e||e.trim()==="")return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString()}catch{return""}},ow=e=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"";const s=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),l=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0");return`${s}-${a}-${n}T${l}:${o}`}catch{return""}},Hs=(e,t,s,a,n,l)=>{var G;if(!e||!t||!s||!a)return{value:""};const o=Kr(s),c=Wr(a),d=parseInt(t,10),m=(G=e.priceVariations)==null?void 0:G.find(M=>M.diameter===d&&M.soilType===o&&M.access===c);if(!m)return{value:""};const L=parseFloat(n)||0,x=parseFloat(l)||0,y=m.price||0,$=m.executionTime,Y=L*x*y;return{value:Y>0?Y.toFixed(2):"",executionTime:$}},iw=[30,35,40,45,50,60,70,80,90,100,110,120],dw=["Acesso livre e desimpedido","Algumas limitaes","Acesso restrito ou complicado"],cw=[{value:"dinheiro",label:"Dinheiro"},{value:"pix",label:"PIX"},{value:"transferencia",label:"Transferncia"},{value:"cartao",label:"Carto"},{value:"cheque",label:"Cheque"},{value:"outro",label:"Outro"}],uw={"1.1":["Estacas para fundao"],"1.3":["Estacas para fundao"],"1.4":["Estacas para fundao"],"2.1":["Fossa sptica"],"2.2":["Sumidouro / Poo"],"2.3":["Drenagem pluvial"],"2.4":["Drenagem pluvial"],"2.5":["Drenagem pluvial"],"3.1":["Postes / Cercas / Alambrados"],"3.2":["Estacas para fundao"],"3.3":["Estacas para fundao"],"4.1":["Postes / Cercas / Alambrados"],"4.2":["Outro (especifique)"],"4.3":["Outro (especifique)"]};function mw(){var H,te;const[e,t]=p.useState("list"),[s,a]=p.useState(null),[n,l]=p.useState([]),[o,c]=p.useState([]),[d,m]=p.useState([]),[L,x]=p.useState(""),[y,$]=p.useState("all"),[Y,G]=p.useState(!1),[M,f]=p.useState(!0),[u,N]=p.useState([]),[T,J]=p.useState([]),[z,I]=p.useState(null),[O,U]=p.useState(!1),[E,Q]=p.useState(!1),[W,Z]=p.useState({clientId:"",clientName:"",site:"",team:"",status:"pendente",plannedDate:"",notes:"",value:"",discountPercent:"",selectedAddress:"",travelDistanceKm:0,travelPrice:0,travelDescription:"",services:[]});p.useEffect(()=>{const P=setTimeout(async()=>{if(!W.team||!W.plannedDate){I(null);return}try{U(!0);const g=W.plannedDate.split("T")[0],A=W.services.filter(ne=>ne.executionTime&&ne.quantidade&&ne.profundidade).map(ne=>({executionTime:ne.executionTime,quantidade:ne.quantidade,profundidade:ne.profundidade})),D=new URLSearchParams({team:W.team,date:g});A.length>0&&D.append("services",JSON.stringify(A));const V=await le(`/jobs/availability?${D.toString()}`),X=await V.json();if(V.ok&&(X!=null&&X.data)&&(I(X.data),W.plannedDate)){const ne=new Date(W.plannedDate),h=`${ne.getHours().toString().padStart(2,"0")}:${ne.getMinutes().toString().padStart(2,"0")}`;X.data.booked.includes(h)&&k.fire({icon:"warning",title:"Equipe Indisponvel",html:`
                  <p class="text-sm text-gray-700 mb-2">A equipe <strong>${W.team}</strong> j possui uma OS agendada neste horrio.</p>
                  ${X.data.durationText?`<p class="text-xs text-gray-500 mb-2">Durao estimada: <strong>${X.data.durationText}</strong></p>`:""}
                  <p class="text-xs text-gray-500">Horrios disponveis neste dia:</p>
                  <div class="mt-2 max-h-40 overflow-y-auto">
                    ${X.data.available.length>0?`<div class="flex flex-wrap gap-1">${X.data.available.map(_=>`<span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">${_}</span>`).join("")}</div>`:'<p class="text-xs text-red-600">Nenhum horrio disponvel neste dia.</p>'}
                  </div>
                `,confirmButtonText:"Entendi"})}}catch(g){console.error("Error checking availability:",g)}finally{U(!1)}},500);return()=>clearTimeout(P)},[W.team,W.plannedDate,W.services]),p.useEffect(()=>{(async()=>{try{f(!0);const g=await(await le("/clients",{cache:"no-store"})).json();c(Array.isArray(g==null?void 0:g.data)?g.data:[])}catch(P){console.error(P)}})()},[]),p.useEffect(()=>{(async()=>{try{const P=await le("/teams",{cache:"no-store"}),g=await P.json().catch(()=>null);if(!P.ok){console.error("Erro ao carregar equipes",g);return}m(Array.isArray(g==null?void 0:g.data)?g.data:[])}catch(P){console.error(P)}})()},[]),p.useEffect(()=>{(async()=>{try{const P=await le("/jobs",{cache:"no-store"}),g=await P.json().catch(()=>null);if(!P.ok){console.error("Erro ao carregar OS",g);return}l(Array.isArray(g==null?void 0:g.data)?g.data:[])}catch(P){console.error(P)}finally{f(!1)}})()},[]),p.useEffect(()=>{(async()=>{try{const g=await(await le("/cash",{cache:"no-store"})).json().catch(()=>null);g!=null&&g.data&&N(Array.isArray(g.data)?g.data:[])}catch(P){console.error("Erro ao carregar transaes",P)}})()},[]),p.useEffect(()=>{(async()=>{try{const P=await le("/catalog",{cache:"no-store"}),g=await P.json().catch(()=>null);P.ok&&(g!=null&&g.data)&&J(Array.isArray(g.data)?g.data.filter(A=>A.active!==!1):[])}catch(P){console.error("Erro ao carregar catlogo",P)}})()},[]);const K=p.useMemo(()=>{const i=L.trim().toLowerCase();return n.filter(P=>{const g=i.length===0||P.title.toLowerCase().includes(i)||(P.clientName||"").toLowerCase().includes(i)||P.site.toLowerCase().includes(i),A=y==="all"?!0:P.status===y;return g&&A})},[n,L,y]),v=p.useMemo(()=>W.services.map(i=>`${i.id}:${i.value||""}:${i.discountPercent||""}`).join("|"),[W.services]);p.useEffect(()=>{if(e!=="form"&&e!=="edit")return;let i=0,P=0,g=!1;if(W.services.forEach(A=>{if(A.value&&A.value.trim()!==""){const D=parseFloat(A.value);if(!isNaN(D)&&D>=0){g=!0,i+=D;const V=A.discountPercent&&A.discountPercent.trim()!==""?parseFloat(A.discountPercent):0;!isNaN(V)&&V>=0&&V<=100&&(P+=D*V/100)}}}),W.travelPrice&&W.travelPrice>0&&(i+=W.travelPrice,g=!0),g&&i>0){const A=i>0?P/i*100:0,D=i.toFixed(2),V=A>0?A.toFixed(2):"0",X=W.value?parseFloat(W.value):0,ne=W.discountPercent?parseFloat(W.discountPercent):0;(Math.abs(X-i)>.01||Math.abs(ne-A)>.01)&&Z(h=>({...h,value:D,discountPercent:V}))}else!g&&W.value&&parseFloat(W.value)>0},[v,W.travelPrice,e]);const q=()=>Z({clientId:"",clientName:"",site:"",team:"",status:"pendente",plannedDate:"",notes:"",value:"",discountPercent:"",selectedAddress:"",travelDistanceKm:0,travelPrice:0,travelDescription:"",services:[]}),B=i=>{Z({clientId:i.clientId||"",clientName:i.clientName||"",site:i.site||"",team:i.team||"",status:i.status||"pendente",plannedDate:i.plannedDate||"",notes:i.notes||"",value:i.value?String(i.value):"",discountPercent:i.discountPercent?String(i.discountPercent):"",selectedAddress:i.selectedAddress||"",travelDistanceKm:i.travelDistanceKm||0,travelPrice:i.travelPrice||0,travelDescription:i.travelDescription||"",services:(i.services||[]).map((P,g)=>({id:`service-${Date.now()}-${g}`,catalogId:P.catalogId||void 0,service:P.service||"",localType:P.localType||"",soilType:P.soilType||"",sptInfo:P.sptInfo||"",sptFileName:P.sptFileName||"",access:P.access||"",categories:P.categories||[],diametro:P.diametro||"",profundidade:P.profundidade||"",quantidade:P.quantidade||"",observacoes:P.observacoes||"",value:P.value!==void 0?String(P.value):"",discountPercent:P.discountPercent!==void 0?String(P.discountPercent):"",executionTime:P.executionTime||0}))})},b=()=>{q(),t("form"),a(null)},w=async()=>{var i,P;if(!W.clientId){k.fire("Ateno","Selecione um cliente primeiro.","warning");return}try{Q(!0);const g=await le(`/clients/${W.clientId}`);if(!g.ok)throw new Error("Falha ao buscar endereo do cliente");const A=await g.json();console.log("Dados do cliente:",A);let D=[];if((i=A==null?void 0:A.data)!=null&&i.addresses&&Array.isArray(A.data.addresses)&&A.data.addresses.length>0?D=A.data.addresses.map(h=>h.address).filter(h=>h&&h.trim()):(P=A==null?void 0:A.data)!=null&&P.address&&(D=[A.data.address]),D.length===0){k.fire("Ateno","Cliente no possui endereo cadastrado.","warning"),Q(!1);return}let V=D[0];if(D.length>1){const{value:h}=await k.fire({title:"Selecione o Endereo",html:`
            <div class="text-left">
              <p class="mb-3 text-sm text-slate-600">Este cliente possui ${D.length} endereos cadastrados. Selecione qual usar para o clculo de deslocamento:</p>
              <select id="addressSelect" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                ${D.map((_,ee)=>`<option value="${ee}">${_}</option>`).join("")}
              </select>
            </div>
          `,showCancelButton:!0,confirmButtonText:"Calcular",cancelButtonText:"Cancelar",preConfirm:()=>{const _=document.getElementById("addressSelect");return _?parseInt(_.value):0}});if(h===void 0){Q(!1);return}V=D[h]}if(!V||!V.trim()){k.fire("Ateno","Endereo invlido","warning"),Q(!1);return}console.log("Calculando distncia para:",V);const X=await le("/distance/calculate",{method:"POST",body:JSON.stringify({clientAddress:V})}),ne=await X.json();if(console.log("Resposta do servidor:",ne),!X.ok){const h=(ne==null?void 0:ne.error)||"No foi possvel calcular a distncia",_=(ne==null?void 0:ne.detail)||"";if(h.includes("Distance Matrix API")||_.includes("LegacyApiNotActivatedMapError")){k.fire({icon:"error",title:"Distance Matrix API no ativada",html:`
              <div class="text-left space-y-3">
                <p>A API do Google Maps precisa ser ativada no Google Cloud Console.</p>
                <p class="font-semibold"> Como ativar:</p>
                <ol class="list-decimal ml-5 space-y-1">
                  <li>Acesse o <a href="https://console.cloud.google.com/apis/library/distance-matrix-backend.googleapis.com" target="_blank" class="text-blue-500 underline">Google Cloud Console</a></li>
                  <li>Faa login com sua conta Google</li>
                  <li>Clique em "ATIVAR" na Distance Matrix API</li>
                  <li>Aguarde alguns segundos e tente novamente</li>
                </ol>
                <p class="text-sm text-gray-500 mt-3">
                    gratuito at 40.000 requisies/ms!
                </p>
              </div>
            `,confirmButtonText:"Entendi",width:600});return}if(h.includes("Endereo no encontrado")||h.includes("NOT_FOUND")){k.fire({icon:"error",title:"Endereo no encontrado",html:`
              <div class="text-left space-y-3">
                <p class="text-sm">O Google Maps no conseguiu localizar um dos endereos:</p>
                ${ne.companyAddress?`
                  <div class="p-3 bg-blue-50 rounded border-l-4 border-blue-400">
                    <p class="text-xs font-semibold text-blue-700 mb-1"> Endereo da Empresa:</p>
                    <p class="text-xs text-blue-900">${ne.companyAddress}</p>
                  </div>
                `:""}
                ${ne.clientAddress?`
                  <div class="p-3 bg-amber-50 rounded border-l-4 border-amber-400">
                    <p class="text-xs font-semibold text-amber-700 mb-1"> Endereo do Cliente:</p>
                    <p class="text-xs text-amber-900">${ne.clientAddress}</p>
                  </div>
                `:""}
                <p class="text-xs text-gray-600 mt-3">
                   <strong>Dica:</strong> Verifique se os endereos esto completos e corretos. 
                  Endereos incompletos ou com erros de digitao podem no ser encontrados pelo Google Maps.
                </p>
                ${!ne.companyAddress||ne.companyAddress.trim()===""?`
                  <p class="text-xs text-red-600 mt-2">
                     O endereo da empresa no est configurado! Configure em <strong>Configuraes</strong>.
                  </p>
                `:""}
              </div>
            `,confirmButtonText:"Entendi",width:600});return}k.fire("Erro",h+(_?`<br><small>${_}</small>`:""),"error");return}Z(h=>({...h,selectedAddress:V,travelDistanceKm:ne.data.distanceKm,travelPrice:ne.data.travelPrice,travelDescription:ne.data.travelDescription})),k.fire({icon:"success",title:"Distncia Calculada",html:`
          <div class="text-left space-y-2">
            <p><strong>Distncia:</strong> ${ne.data.distanceText}</p>
            <p><strong>Tempo estimado:</strong> ${ne.data.durationText}</p>
            <p><strong>Preo de deslocamento:</strong> R$ ${ne.data.travelPrice.toFixed(2)}</p>
            <p class="text-sm text-gray-500">${ne.data.travelDescription}</p>
          </div>
        `,confirmButtonText:"OK"})}catch(g){console.error("Erro ao calcular distncia:",g),k.fire("Erro",g.message||"Erro ao calcular distncia","error")}finally{Q(!1)}},F=async()=>{var A,D;if(Y)return;if(!(W.services.length>0&&W.services.every(V=>V.service))){k.fire("Ateno","Adicione ao menos um servio e selecione o tipo.","warning");return}const P=W.clientId&&((A=o.find(V=>V._id===W.clientId))!=null&&A.name)?(D=o.find(V=>V._id===W.clientId))==null?void 0:D.name:W.clientName||"No informado",g=e==="edit"&&s;try{G(!0);const{value:V,discountPercent:X,...ne}=W,h=W.services.map(oe=>{const de={catalogId:oe.catalogId||void 0,service:oe.service,localType:oe.localType,soilType:oe.soilType,access:oe.access,sptInfo:oe.sptInfo,sptFileName:oe.sptFileName,categories:oe.categories,diametro:oe.diametro,profundidade:oe.profundidade,quantidade:oe.quantidade,observacoes:oe.observacoes};if(oe.value&&oe.value.trim()!==""){const ue=parseFloat(oe.value);if(!isNaN(ue)&&ue>=0){de.value=ue;const pe=oe.discountPercent&&oe.discountPercent.trim()!==""?parseFloat(oe.discountPercent):0;!isNaN(pe)&&pe>=0&&pe<=100?(de.discountPercent=pe,de.discountValue=pe>0?ue*pe/100:0,de.finalValue=ue-de.discountValue):(de.discountPercent=0,de.discountValue=0,de.finalValue=ue)}}else delete de.value,delete de.discountPercent,delete de.discountValue,delete de.finalValue;return oe.executionTime!==void 0&&(de.executionTime=oe.executionTime),de}),_={...ne,services:h,clientName:P,status:"pendente"};W.travelDistanceKm&&W.travelDistanceKm>0&&(_.selectedAddress=W.selectedAddress,_.travelDistanceKm=W.travelDistanceKm,_.travelPrice=W.travelPrice,_.travelDescription=W.travelDescription),W.plannedDate&&W.plannedDate.trim()!==""?_.plannedDate=W.plannedDate:delete _.plannedDate;let ee=0;if(W.services.forEach(oe=>{var ue;const de=T.find(pe=>pe._id===oe.catalogId);if(de&&oe.diametro&&oe.soilType&&oe.access&&oe.quantidade&&oe.profundidade){const pe=Kr(oe.soilType),Ge=Wr(oe.access),Fe=parseInt(oe.diametro,10),it=(ue=de.priceVariations)==null?void 0:ue.find(_s=>_s.diameter===Fe&&_s.soilType===pe&&_s.access===Ge);if(it!=null&&it.executionTime){const _s=parseFloat(oe.quantidade)||0,vp=parseFloat(oe.profundidade)||0;ee+=it.executionTime*_s*vp}}}),ee>0&&(_.estimatedDuration=ee+30),V&&V.trim()!==""){const oe=parseFloat(V);if(!isNaN(oe)&&oe>=0)if(_.value=oe,X&&X.trim()!==""){const de=parseFloat(X);!isNaN(de)&&de>=0&&de<=100&&(_.discountPercent=de)}else _.discountPercent=0}const j=g?`/jobs/${s._id}`:"/jobs",re=await le(j,{method:g?"PUT":"POST",body:JSON.stringify(_)}),ae=await re.json().catch(()=>null);if(!re.ok){k.fire("Erro",(ae==null?void 0:ae.error)||`No foi possvel ${g?"atualizar":"salvar"} a OS.`,"error");return}l(g?oe=>oe.map(de=>de._id===s._id?ae.data:de):oe=>[ae.data,...oe]),q(),a(null),t("list"),k.fire("Sucesso",`OS ${g?"atualizada":"salva"} com sucesso.`,"success")}catch(V){console.error(V),k.fire("Erro","Falha ao salvar OS.","error")}finally{G(!1)}},R=i=>{if(!i||!u||u.length===0)return!1;const P=String(i);return u.some(g=>!g||!g.jobId?!1:String(g.jobId)===P)},C=async(i,P)=>{var A;if(P&&P.stopPropagation(),i.status!=="concluida"){k.fire("Ateno","Apenas OS concludas podem ser marcadas como recebidas.","warning");return}if(R(i._id)){const D=await k.fire({title:"Marcar como Recebido",html:`
          <div class="text-left" style="max-width: 500px;">
            <div class="mb-4 p-3 rounded-lg bg-blue-50 border border-blue-200">
              <p class="text-sm text-blue-700">
                Uma transao j existe para esta OS. Confirme para marcar como recebida.
              </p>
            </div>
            
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Nmero do Recibo/Comprovante
                <span class="text-gray-400 text-xs font-normal">(opcional)</span>
              </label>
              <input 
                id="swal-receipt" 
                type="text" 
                class="w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"
                placeholder="Ex: 001234, COMP-2024-001, etc."
              >
            </div>
          </div>
        `,width:"600px",showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",title:"text-gray-800 text-xl font-semibold mb-4",htmlContainer:"text-gray-600",confirmButton:"px-6 py-2.5 rounded-lg font-medium",cancelButton:"px-6 py-2.5 rounded-lg font-medium"},preConfirm:()=>{const V=document.getElementById("swal-receipt");return{receipt:(V==null?void 0:V.value.trim())||void 0}}});if(!D.isConfirmed||!D.value)return;try{const V=await le(`/jobs/${i._id}/received`,{method:"POST",body:JSON.stringify(D.value)}),X=await V.json().catch(()=>null);if(!V.ok){k.fire("Erro",(X==null?void 0:X.error)||"No foi possvel marcar como recebido.","error");return}l(ne=>ne.map(h=>h._id===i._id?{...h,received:!0,receivedAt:new Date,receipt:D.value.receipt}:h)),s&&s._id===i._id&&a({...s,received:!0,receivedAt:new Date,receipt:D.value.receipt}),k.fire("Sucesso","OS marcada como recebida.","success")}catch(V){console.error(V),k.fire("Erro","Falha ao marcar como recebido.","error")}return}if(i.received){k.fire("Ateno","Esta OS j foi marcada como recebida.","info");return}const g=await k.fire({title:"Confirmar Recebimento",html:`
        <div class="text-left" style="max-width: 500px;">
          <div class="mb-4 p-4 rounded-lg bg-emerald-50 border border-emerald-200">
            <div class="text-xs text-emerald-600 mb-1">Valor a Receber</div>
            <div class="text-2xl font-bold text-emerald-700">
              ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.finalValue||i.value||0)}
            </div>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Forma de Pagamento <span class="text-red-500">*</span>
            </label>
            <select 
              id="swal-payment-method" 
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"
              required
            >
              <option value="">Selecione a forma de pagamento...</option>
              ${cw.map(D=>`<option value="${D.value}">${D.label}</option>`).join("")}
            </select>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Nmero do Recibo/Comprovante
              <span class="text-gray-400 text-xs font-normal">(opcional)</span>
            </label>
            <input 
              id="swal-receipt" 
              type="text" 
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"
              placeholder="Ex: 001234, COMP-2024-001, etc."
            >
          </div>
          
          <div class="mb-2">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Comprovante/Recibo (PDF, Foto, etc.)
              <span class="text-gray-400 text-xs font-normal">(opcional)</span>
            </label>
            <input 
              id="swal-receipt-file" 
              type="file" 
              accept=".pdf,.jpg,.jpeg,.png,.heic,.heif"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100"
            >
            <p class="mt-1 text-xs text-gray-500">Formatos aceitos: PDF, JPG, PNG, HEIC (mx. 50MB)</p>
          </div>
        </div>
      `,width:"600px",showCancelButton:!0,confirmButtonText:"Confirmar Recebimento",cancelButtonText:"Cancelar",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",title:"text-gray-800 text-xl font-semibold mb-4",htmlContainer:"text-gray-600",confirmButton:"px-6 py-2.5 rounded-lg font-medium",cancelButton:"px-6 py-2.5 rounded-lg font-medium"},preConfirm:async()=>{var h;const D=document.getElementById("swal-payment-method"),V=document.getElementById("swal-receipt"),X=document.getElementById("swal-receipt-file");if(!(D!=null&&D.value))return k.showValidationMessage("Por favor, selecione a forma de pagamento"),D==null||D.focus(),!1;let ne;if(X!=null&&X.files&&X.files.length>0){const _=X.files[0];if(_.size>50*1024*1024)return k.showValidationMessage("O arquivo  muito grande. Tamanho mximo: 50MB"),!1;if(!["application/pdf","image/jpeg","image/jpg","image/png","image/heic","image/heif"].includes(_.type))return k.showValidationMessage("Tipo de arquivo no permitido. Use PDF, JPG, PNG ou HEIC"),!1;try{k.showLoading();const j=new FormData;j.append("file",_),j.append("category","receipts"),j.append("id",i._id);const S=await le("/files/upload",{method:"POST",headers:{},body:j}),re=await S.json().catch(()=>null);if(!S.ok||!((h=re==null?void 0:re.data)!=null&&h.key))return k.showValidationMessage("Falha ao fazer upload do arquivo. Tente novamente."),!1;ne=re.data.key}catch(j){return console.error("File upload error:",j),k.showValidationMessage("Erro ao fazer upload do arquivo. Tente novamente."),!1}}return{paymentMethod:D.value,receipt:(V==null?void 0:V.value.trim())||void 0,receiptFileKey:ne}}});if(!(!g.isConfirmed||!g.value))try{const D=await le(`/jobs/${i._id}/received`,{method:"POST",body:JSON.stringify(g.value)}),V=await D.json().catch(()=>null);if(!D.ok){k.fire("Erro",(V==null?void 0:V.error)||"No foi possvel marcar como recebido.","error");return}const ne=await(await le("/cash",{cache:"no-store"})).json().catch(()=>null);ne!=null&&ne.data&&N(ne.data);const h=(A=ne==null?void 0:ne.data)==null?void 0:A.some(_=>_.jobId===i._id||_.jobId&&_.jobId.toString()===i._id.toString());!h&&(V!=null&&V.transaction)&&N(_=>[..._,V.transaction]),h||V!=null&&V.transaction?(l(_=>_.map(ee=>ee._id===i._id?{...ee,received:!0,receivedAt:new Date,receipt:g.value.receipt,receiptFileKey:g.value.receiptFileKey}:ee)),s&&s._id===i._id&&a({...s,received:!0,receivedAt:new Date,receipt:g.value.receipt,receiptFileKey:g.value.receiptFileKey}),k.fire("Sucesso","OS marcada como recebida e transao criada no caixa.","success")):k.fire("Erro","Transao no foi criada. Job no foi marcado como recebido.","error")}catch(D){console.error(D),k.fire("Erro","Falha ao marcar como recebido.","error")}};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-4 sm:pb-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Ordens de Servio"}),r.jsx("p",{className:"text-xs sm:text-sm text-slate-300 mt-1",children:"Abertura e acompanhamento de OS, horrios de incio e trmino, status e vnculo com cliente/obra e equipe. Dados so salvos no banco."})]}),e==="list"&&r.jsx("button",{onClick:b,className:"w-full sm:w-auto rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-3 py-2.5 text-sm font-semibold text-white shadow-lg transition hover:from-blue-600 hover:to-emerald-500",children:"+ Nova OS"})]}),e==="list"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-3 sm:px-4 py-3",children:[r.jsx("input",{value:L,onChange:i=>x(i.target.value),placeholder:"Buscar por ttulo, cliente ou obra",className:"w-full sm:w-64 bg-transparent text-sm text-white outline-none placeholder:text-slate-400 px-2 py-2 sm:px-0"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-200",children:[r.jsx("span",{className:"hidden sm:inline",children:"Status:"}),r.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[r.jsxs("select",{value:y,onChange:i=>$(i.target.value),className:"w-full sm:w-auto appearance-none rounded-md border border-white/10 bg-slate-900 px-3 py-2 pr-7 text-xs font-semibold text-white outline-none transition hover:border-emerald-300/50 focus:border-emerald-400",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"pendente",children:"Pendente"}),r.jsx("option",{value:"em_execucao",children:"Em execuo"}),r.jsx("option",{value:"concluida",children:"Concluda"}),r.jsx("option",{value:"cancelada",children:"Cancelada"})]}),r.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-slate-300",children:""})]})]})]}),r.jsx(sw,{jobs:K}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-0 text-sm text-slate-200 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 px-3 sm:px-6 py-3 sm:py-4",children:[r.jsx("div",{className:"font-semibold text-white text-sm sm:text-base",children:"Lista de OS"}),r.jsx("span",{className:"text-xs text-slate-300",children:M?"Carregando...":`${K.length} registro(s)`})]}),M?r.jsxs("div",{className:"px-3 sm:px-6 py-6 text-center text-slate-300 text-sm",children:[r.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-emerald-400"}),r.jsx("p",{children:"Carregando ordens de servio..."})]}):K.length===0?r.jsx("div",{className:"px-3 sm:px-6 py-4 text-slate-300 text-sm",children:"Nenhuma ordem de servio encontrada."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-white/5 text-xs uppercase text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Ttulo"}),r.jsx("th",{className:"px-4 py-3",children:"Servios"}),r.jsx("th",{className:"px-4 py-3",children:"Cliente"}),r.jsx("th",{className:"px-4 py-3",children:"Obra"}),r.jsx("th",{className:"px-4 py-3",children:"Equipe"}),r.jsx("th",{className:"px-4 py-3",children:"Data"}),r.jsx("th",{className:"px-4 py-3",children:"Valor"}),r.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),r.jsx("tbody",{children:K.map(i=>{var P;return r.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 cursor-pointer",onClick:()=>{a(i),t("detail")},children:[r.jsx("td",{className:"px-4 py-3 text-white",children:i.title}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:(P=i.services)!=null&&P.length?i.services.map(g=>g.service).filter(Boolean).join(", "):"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:i.clientName||i.client||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:i.site||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:i.team||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:Gl(i.plannedDate)}),r.jsxs("td",{className:"px-4 py-3 text-slate-200",children:[i.finalValue!==void 0&&i.finalValue!==null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.finalValue):i.value!==void 0&&i.value!==null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.value):"-",i.discountPercent&&i.discountPercent>0&&r.jsxs("div",{className:"text-xs text-emerald-300",children:["-",i.discountPercent,"%"]})]}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold whitespace-nowrap text-center ${Jc[i.status]||"bg-white/5 text-white border-white/10"}`,children:Jl[i.status]||"-"}),i.status==="concluida"&&!R(i._id)&&i.finalValue&&i.finalValue>0&&r.jsx("button",{onClick:g=>C(i,g),className:"rounded-full border border-emerald-400/50 bg-emerald-500/20 px-3 py-1 text-xs font-semibold text-emerald-300 whitespace-nowrap hover:bg-emerald-500/30 transition",children:"Receber"}),R(i._id)&&r.jsx("span",{className:"rounded-full border border-emerald-400/50 bg-emerald-500/20 px-3 py-1 text-xs font-semibold text-emerald-300 whitespace-nowrap",children:" Recebido"})]})})]},i._id)})})]})}),r.jsx("div",{className:"md:hidden space-y-3 p-3",children:K.map(i=>{var P;return r.jsxs("div",{onClick:()=>{a(i),t("detail")},className:"rounded-xl border border-white/10 bg-white/5 p-4 space-y-3 cursor-pointer active:bg-white/10 transition",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-white truncate",children:i.title}),r.jsx("div",{className:"text-xs text-slate-400 mt-1",children:Gl(i.plannedDate)||"Sem data"})]}),r.jsx("span",{className:`rounded-full border px-2 py-1 text-[10px] font-semibold whitespace-nowrap shrink-0 ${Jc[i.status]||"bg-white/5 text-white border-white/10"}`,children:Jl[i.status]||"-"})]}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-slate-400 shrink-0",children:"Cliente:"}),r.jsx("span",{className:"text-slate-200 flex-1",children:i.clientName||i.client||"-"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-slate-400 shrink-0",children:"Obra:"}),r.jsx("span",{className:"text-slate-200 flex-1 line-clamp-2",children:i.site||"-"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-slate-400 shrink-0",children:"Equipe:"}),r.jsx("span",{className:"text-slate-200 flex-1",children:i.team||"-"})]}),((P=i.services)==null?void 0:P.length)>0&&r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-slate-400 shrink-0",children:"Servios:"}),r.jsxs("span",{className:"text-slate-200 flex-1 line-clamp-2",children:[i.services.map(g=>g.service).filter(Boolean).slice(0,2).join(", "),i.services.length>2&&` +${i.services.length-2} mais`]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/10",children:[r.jsx("span",{className:"text-slate-400",children:"Valor:"}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-emerald-300 font-semibold",children:i.finalValue!==void 0&&i.finalValue!==null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.finalValue):i.value!==void 0&&i.value!==null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.value):"-"}),i.discountPercent&&i.discountPercent>0&&r.jsxs("div",{className:"text-[10px] text-emerald-300",children:["-",i.discountPercent,"%"]})]})]}),i.status==="concluida"&&r.jsx("div",{className:"pt-2 border-t border-white/10",children:!R(i._id)&&i.finalValue&&i.finalValue>0?r.jsx("button",{onClick:g=>{g.stopPropagation(),C(i)},className:"w-full rounded-lg border border-emerald-400/50 bg-emerald-500/20 px-3 py-2 text-xs font-semibold text-emerald-300 hover:bg-emerald-500/30 transition",children:"Receber"}):R(i._id)?r.jsx("div",{className:"text-center text-xs text-emerald-300 font-semibold",children:" Recebido"}):null})]})]},i._id)})})]})]})]}),(e==="form"||e==="edit")&&r.jsxs("div",{className:"space-y-4 sm:space-y-5 rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-base sm:text-lg font-semibold text-white",children:e==="edit"?"Editar OS":"Nova OS"}),r.jsx("p",{className:"text-xs text-slate-300 mt-1",children:e==="edit"?"Atualize os dados e salve as alteraes.":"Preencha os dados. A OS ser salva e listada abaixo."})]}),r.jsx("button",{onClick:()=>{t("list"),q(),a(null)},className:"w-full sm:w-auto rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Cliente"}),r.jsxs("select",{value:W.clientId,onChange:i=>{o.find(P=>P._id===i.target.value),Z(P=>({...P,clientId:i.target.value,site:""}))},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione um cliente"}),o.map(i=>r.jsx("option",{value:i._id,children:i.name},i._id))]}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Vincule a OS a um cliente/empresa existente."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Endereo da Obra"}),W.clientId?(()=>{const i=o.find(g=>g._id===W.clientId),P=i!=null&&i.addresses&&Array.isArray(i.addresses)&&i.addresses.length>0?i.addresses:i!=null&&i.addressStreet||i!=null&&i.address?[{label:"Endereo Principal",address:i.address||`${i.addressStreet||""} ${i.addressNumber||""}`.trim(),addressStreet:i.addressStreet||"",addressNumber:i.addressNumber||"",addressNeighborhood:i.addressNeighborhood||"",addressCity:i.addressCity||"",addressState:i.addressState||"",addressZip:i.addressZip||""}]:[];return P.length>0?r.jsxs("select",{value:W.site,onChange:g=>Z(A=>({...A,site:g.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione um endereo"}),P.map((g,A)=>{const D=g.label||`Endereo ${A+1}`,V=g.address||[[g.addressStreet,g.addressNumber].filter(Boolean).join(", "),g.addressNeighborhood,[g.addressCity,g.addressState].filter(Boolean).join(" - "),g.addressZip].filter(X=>X&&X.trim().length>0).join(", ");return r.jsxs("option",{value:V,children:[D," - ",V]},A)})]}):r.jsx("input",{value:W.site,onChange:g=>Z(A=>({...A,site:g.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Digite o endereo da obra"})})():r.jsx("input",{value:W.site,onChange:i=>Z(P=>({...P,site:i.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Selecione um cliente primeiro",disabled:!0}),r.jsx("div",{className:"text-[11px] text-slate-400",children:W.clientId?"Selecione um endereo do cliente ou digite um novo endereo.":"Selecione um cliente para ver os endereos disponveis."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Equipe"}),r.jsxs("select",{value:W.team,onChange:i=>Z(P=>({...P,team:i.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione uma equipe"}),d.map(i=>r.jsx("option",{value:i.name,children:i.name},i._id))]}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Equipes cadastradas em /teams."}),O&&r.jsxs("div",{className:"text-xs text-blue-300 flex items-center gap-1",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-300"}),"Verificando disponibilidade..."]})]})]}),r.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-white/5 p-3 sm:p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Servios (mltiplos)  selecione e detalhe"}),r.jsx("button",{type:"button",onClick:()=>Z(i=>({...i,services:[...i.services,{id:crypto.randomUUID(),service:"",catalogId:void 0,localType:"",soilType:"",sptInfo:"",access:"",categories:[],diametro:"",profundidade:"",quantidade:"",observacoes:"",sptFileName:"",value:"",discountPercent:"",executionTime:0}]})),className:"w-full sm:w-auto rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"+ Adicionar servio"})]}),r.jsxs("div",{className:"space-y-4",children:[W.services.length===0?r.jsx("div",{className:"rounded-lg border border-dashed border-white/20 bg-slate-900/40 px-3 py-3 text-xs text-slate-300",children:"Nenhum servio adicionado. Clique em + Adicionar servio para inserir o primeiro tipo."}):null,W.services.map((i,P)=>r.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/50 p-3 sm:p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-200",children:[r.jsxs("span",{className:"text-xs sm:text-sm",children:["Servio #",P+1]}),W.services.length>1&&r.jsx("button",{type:"button",onClick:()=>Z(g=>({...g,services:g.services.filter(A=>A.id!==i.id)})),className:"rounded-md border border-white/10 px-2 py-1 text-[10px] sm:text-xs font-semibold text-red-100 hover:border-red-400/50 hover:text-red-100",children:"Remover"})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de servio"}),r.jsxs("select",{value:i.catalogId||i.service,onChange:g=>{const A=g.target.value,D=T.find(V=>V._id===A);Z(V=>{if(D)return{...V,services:V.services.map(X=>X.id===i.id?{...X,catalogId:D._id,service:D.name,categories:D.category?[D.category]:[],value:"",discountPercent:"",diametro:"",soilType:"",executionTime:0}:X)};{const X=A.split(" ")[0];return{...V,services:V.services.map(ne=>ne.id===i.id?{...ne,catalogId:void 0,service:A,categories:uw[X]||[],executionTime:0}:ne)}}})},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione um servio"}),T.length>0&&(()=>{const g=T.reduce((D,V)=>{const X=V.category||"Sem categoria";return D[X]||(D[X]=[]),D[X].push(V),D},{}),A=Object.keys(g).sort();return r.jsx("optgroup",{label:"Catlogo",children:A.flatMap(D=>g[D].map(V=>r.jsxs("option",{value:V._id,children:[D,"  ",V.name]},V._id)))})})(),r.jsx("optgroup",{label:"Servios Legados",children:aw.map(g=>r.jsxs("option",{value:`${g.value} - ${g.label}`,children:[g.group,"  ",g.label]},g.value))})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de local"}),r.jsxs("select",{value:i.localType,onChange:g=>Z(A=>({...A,services:A.services.map(D=>D.id===i.id?{...D,localType:g.target.value}:D)})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),nw.map(g=>r.jsx("option",{value:g,children:g},g))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de solo"}),r.jsxs("select",{value:i.soilType,onChange:g=>{const A=g.target.value;Z(D=>{const V=D.services.map(X=>{if(X.id===i.id){const ne=T.find(_=>_._id===X.catalogId),h=Hs(ne,X.diametro,A,X.access,X.quantidade,X.profundidade);return{...X,soilType:A,value:h.value,executionTime:h.executionTime}}return X});return{...D,services:V}})},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),lw.map(g=>r.jsx("option",{value:g,children:g},g))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Acesso para mquina"}),r.jsxs("select",{value:i.access,onChange:g=>{const A=g.target.value;Z(D=>{const V=D.services.map(X=>{if(X.id===i.id){const ne=T.find(_=>_._id===X.catalogId),h=Hs(ne,X.diametro,X.soilType,A,X.quantidade,X.profundidade);return{...X,access:A,value:h.value,executionTime:h.executionTime}}return X});return{...D,services:V}})},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),dw.map(g=>r.jsx("option",{value:g,children:g},g))]})]}),r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Categorias"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(i.categories&&i.categories.length>0?i.categories:[""]).map(g=>r.jsx("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-slate-100",children:g},g))})]}),r.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-3 sm:col-span-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200 text-xs sm:text-sm",children:"Dimetro (30120 cm)"}),i.catalogId?r.jsxs("select",{value:i.diametro,onChange:g=>{const A=g.target.value;Z(D=>{const V=D.services.map(X=>{if(X.id===i.id){const ne=T.find(_=>_._id===X.catalogId),h=Hs(ne,A,X.soilType,X.access,X.quantidade,X.profundidade);return{...X,diametro:A,value:h.value,executionTime:h.executionTime}}return X});return{...D,services:V}})},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),iw.map(g=>r.jsxs("option",{value:g,children:[g," cm"]},g))]}):r.jsx("input",{type:"number",min:30,max:120,value:i.diametro,onChange:g=>Z(A=>({...A,services:A.services.map(D=>D.id===i.id?{...D,diametro:g.target.value}:D)})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"cm"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200 text-xs sm:text-sm",children:"Profundidade (118 m)"}),r.jsx("input",{type:"number",min:1,max:18,value:i.profundidade,onChange:g=>{const A=g.target.value;Z(D=>{const V=D.services.map(X=>{if(X.id===i.id){const ne=T.find(_=>_._id===X.catalogId),h=Hs(ne,X.diametro,X.soilType,X.access,X.quantidade,A);return{...X,profundidade:A,value:h.value,executionTime:h.executionTime}}return X});return{...D,services:V}})},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"m"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200 text-xs sm:text-sm",children:"Quantidade"}),r.jsx("input",{type:"number",min:1,value:i.quantidade,onChange:g=>{const A=g.target.value;Z(D=>{const V=D.services.map(X=>{if(X.id===i.id){const ne=T.find(_=>_._id===X.catalogId),h=Hs(ne,X.diametro,X.soilType,X.access,A,X.profundidade);return{...X,quantidade:A,value:h.value,executionTime:h.executionTime}}return X});return{...D,services:V}})},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Qtd"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"SPT / Diagnstico do Solo (resumo ou link)"}),r.jsx("textarea",{value:i.sptInfo,onChange:g=>Z(A=>({...A,services:A.services.map(D=>D.id===i.id?{...D,sptInfo:g.target.value}:D)})),rows:2,className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Cole o laudo SPT, link ou resumo"}),r.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-300",children:[r.jsxs("label",{className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10 cursor-pointer",children:[r.jsx("input",{type:"file",accept:".pdf,.doc,.docx",className:"hidden",onChange:g=>{var D;const A=(D=g.target.files)==null?void 0:D[0];A&&Z(V=>({...V,services:V.services.map(X=>X.id===i.id?{...X,sptFileName:A.name}:X)}))}}),"Anexar SPT (pdf/word)"]}),r.jsx("span",{className:"text-slate-200",children:i.sptFileName?`Arquivo: ${i.sptFileName}`:"Nenhum arquivo selecionado"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Observaes do servio"}),r.jsx("textarea",{value:i.observacoes,onChange:g=>Z(A=>({...A,services:A.services.map(D=>D.id===i.id?{...D,observacoes:g.target.value}:D)})),rows:2,className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Detalhes especficos deste servio"})]}),r.jsxs("div",{className:"sm:col-span-2 rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 sm:p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-xs sm:text-sm font-semibold text-emerald-200",children:"Valores deste Servio"}),(()=>{var ee;const g=T.find(j=>j._id===i.catalogId),A=!!g,D=!!i.diametro,V=!!i.soilType,X=!!i.access,ne=!!i.quantidade&&parseFloat(i.quantidade)>0,h=!!i.profundidade&&parseFloat(i.profundidade)>0,_=(()=>{var oe;if(!A||!D||!V||!X)return!1;const j=Kr(i.soilType),S=Wr(i.access),re=parseInt(i.diametro,10);return!!((oe=g.priceVariations)==null?void 0:oe.find(de=>de.diameter===re&&de.soilType===j&&de.access===S))})();if(A&&_&&ne&&h){const j=Kr(i.soilType),S=Wr(i.access),re=parseInt(i.diametro,10),ae=(ee=g.priceVariations)==null?void 0:ee.find(oe=>oe.diameter===re&&oe.soilType===j&&oe.access===S);if(ae){const oe=parseFloat(i.quantidade)||0,de=parseFloat(i.profundidade)||0,ue=ae.price||0,pe=oe*de*ue;return r.jsxs("div",{className:"text-[10px] sm:text-xs text-slate-300 font-mono bg-slate-800/50 px-2 py-1 rounded border border-slate-600/50",children:["(",oe,"  ",de,")  ",ue.toFixed(2)," = ",pe.toFixed(2)]})}}return null})()]}),r.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-4",children:[(()=>{var _;const g=T.find(ee=>ee._id===i.catalogId);let A=null,D=null;if(g&&i.diametro&&i.soilType&&i.access){const ee=Kr(i.soilType),j=Wr(i.access),S=parseInt(i.diametro,10),re=(_=g.priceVariations)==null?void 0:_.find(ae=>ae.diameter===S&&ae.soilType===ee&&ae.access===j);re&&(A=re.price,D=re.executionTime)}const V=parseFloat(i.quantidade)||0,X=parseFloat(i.profundidade)||0,ne=D&&V>0&&X>0?D*V*X:null,h=ee=>{const j=Math.floor(ee/60),S=Math.round(ee%60);return j>0?S>0?`${j}h ${S}min`:`${j}h`:`${S}min`};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Preo Base/m (R$)"}),r.jsx("div",{className:"w-full rounded-lg border border-blue-400/50 bg-blue-500/10 px-3 py-2 text-sm font-semibold text-blue-100",children:A!==null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A):""})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("label",{className:"text-slate-200 flex items-center gap-1",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tempo/m"]}),r.jsx("div",{className:"w-full rounded-lg border border-purple-400/50 bg-purple-500/10 px-3 py-2 text-sm font-semibold text-purple-100",children:D!=null?`${D} min/m`:""})]}),r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsxs("label",{className:"text-slate-200 flex items-center gap-1",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tempo Total Estimado (este servio)"]}),r.jsx("div",{className:"w-full rounded-lg border border-orange-400/50 bg-orange-500/10 px-3 py-2 text-sm font-semibold text-orange-100",children:ne!==null?h(ne):""}),r.jsx("div",{className:"text-[10px] text-slate-400",children:ne!==null&&D?`${V}  ${X}m  ${D} min/m = ${ne.toFixed(0)} min`:"Preencha todos os campos para calcular"})]})]})})(),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Valor (R$)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:i.value||"",onChange:g=>{const A=g.target.value;Z(D=>({...D,services:D.services.map(V=>V.id===i.id?{...V,value:A}:V)}))},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Desconto (%)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:i.discountPercent||"",onChange:g=>{const A=g.target.value;Z(D=>({...D,services:D.services.map(V=>V.id===i.id?{...V,discountPercent:A}:V)}))},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Valor Final (R$)"}),r.jsx("div",{className:"w-full rounded-lg border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm font-semibold text-emerald-100",children:(()=>{const g=i.value?parseFloat(i.value):0,A=i.discountPercent?parseFloat(i.discountPercent):0,D=A>0?g*A/100:0,V=g-D;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(V)})()})]})]})]})]})]},i.id))]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:"Valores do Servio"}),(()=>{let i=0,P=!1;if(W.services.forEach(g=>{var D;const A=T.find(V=>V._id===g.catalogId);if(A&&g.diametro&&g.soilType&&g.access&&g.quantidade&&g.profundidade){const V=Kr(g.soilType),X=Wr(g.access),ne=parseInt(g.diametro,10),h=(D=A.priceVariations)==null?void 0:D.find(_=>_.diameter===ne&&_.soilType===V&&_.access===X);if(h!=null&&h.executionTime){const _=parseFloat(g.quantidade)||0,ee=parseFloat(g.profundidade)||0;i+=h.executionTime*_*ee,P=!0}}}),P&&i>0){const g=Math.floor(i/60),A=Math.round(i%60),D=g>0?A>0?`${g}h ${A}min`:`${g}h`:`${A}min`;return r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-orange-500/20 border border-orange-400/50",children:[r.jsx("svg",{className:"w-4 h-4 text-orange-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"text-xs font-semibold text-orange-200",children:["Tempo Total: ",D]})]})}return null})()]}),r.jsxs("div",{className:"rounded-xl border border-blue-400/30 bg-blue-500/5 p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-semibold text-blue-200",children:" Deslocamento"}),W.clientId&&r.jsx("button",{type:"button",onClick:w,disabled:E,className:"px-3 py-1.5 text-xs font-semibold rounded-lg bg-blue-500 hover:bg-blue-600 text-white transition disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Calculando...":" Calcular"})]}),!W.clientId&&r.jsx("div",{className:"text-xs text-slate-400",children:"Selecione um cliente para calcular o deslocamento automaticamente."}),W.travelDistanceKm>0&&r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Distncia:"}),r.jsxs("span",{className:"text-white font-semibold",children:[W.travelDistanceKm," km"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Preo:"}),r.jsxs("span",{className:"text-emerald-300 font-semibold",children:["R$ ",W.travelPrice.toFixed(2)]})]}),r.jsx("div",{className:"text-xs text-slate-400 pt-1 border-t border-blue-400/20",children:W.travelDescription})]})]}),r.jsxs("div",{className:"mb-2 text-xs text-slate-400",children:["O valor total  calculado automaticamente a partir dos valores dos servios individuais",W.travelPrice>0?" + deslocamento":"","."]}),r.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Valor Total (R$) *"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:W.value,onChange:i=>Z(P=>({...P,value:i.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0.00",readOnly:W.services.some(i=>i.value&&i.value.trim()!=="")}),W.services.some(i=>i.value&&i.value.trim()!=="")&&r.jsx("div",{className:"text-[10px] text-emerald-300 mt-1",children:"Calculado automaticamente"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Desconto (%)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:W.discountPercent,onChange:i=>Z(P=>({...P,discountPercent:i.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0.00",readOnly:W.services.some(i=>i.value&&i.value.trim()!=="")}),W.services.some(i=>i.value&&i.value.trim()!=="")&&r.jsx("div",{className:"text-[10px] text-emerald-300 mt-1",children:"Calculado automaticamente"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Valor Final (R$)"}),r.jsx("div",{className:"w-full rounded-lg border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm font-semibold text-emerald-100",children:(()=>{const i=W.value?parseFloat(W.value):0,P=W.discountPercent?parseFloat(W.discountPercent):0,g=P>0?i*P/100:0,A=i-g;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A)})()}),(()=>{const i=W.value?parseFloat(W.value):0,P=W.discountPercent?parseFloat(W.discountPercent):0,g=P>0?i*P/100:0;return g>0?r.jsxs("div",{className:"text-xs text-slate-400",children:["Desconto: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g)]}):null})()]})]})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Data e hora agendada"}),r.jsx("input",{type:"datetime-local",value:ow(W.plannedDate),onChange:i=>{const P=Gc(i.target.value);Z(g=>({...g,plannedDate:P}))},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"}),W.team&&W.plannedDate&&z&&r.jsxs("div",{className:"mt-2 space-y-2",children:[z.durationText&&r.jsxs("div",{className:"text-xs text-blue-300 bg-blue-500/10 border border-blue-400/30 rounded p-2",children:[" Durao estimada: ",r.jsx("strong",{children:z.durationText})]}),z.available.length>0?r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-emerald-300 mb-1",children:"Horrios disponveis neste dia:"}),r.jsx("div",{className:"flex flex-wrap gap-1 max-h-24 overflow-y-auto",children:z.available.map(i=>r.jsx("span",{className:"px-2 py-1 bg-emerald-500/20 border border-emerald-400/30 text-emerald-300 rounded text-xs cursor-pointer hover:bg-emerald-500/30",onClick:()=>{const P=W.plannedDate.split("T")[0],[g,A]=i.split(":"),D=`${P}T${g}:${A}`,V=Gc(D);Z(X=>({...X,plannedDate:V}))},children:i},i))})]}):r.jsx("div",{className:"text-xs text-red-300 bg-red-500/10 border border-red-400/30 rounded p-2",children:" Nenhum horrio disponvel para esta equipe neste dia."}),z.booked.length>0&&r.jsxs("details",{className:"text-xs text-amber-300 bg-amber-500/10 border border-amber-400/30 rounded p-2",children:[r.jsxs("summary",{className:"cursor-pointer font-semibold",children:[" ",z.booked.length," horrio(s) ocupado(s) - Ver detalhes"]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1 max-h-32 overflow-y-auto",children:z.booked.map(i=>r.jsx("span",{className:"px-2 py-1 bg-amber-500/20 border border-amber-400/30 text-amber-200 rounded text-xs",children:i},i))}),r.jsx("p",{className:"text-[10px] text-amber-200/70 mt-2",children:"Estes horrios tm conflito com outras OSs j agendadas para esta equipe."})]})]})]}),r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Observaes gerais da OS"}),r.jsx("textarea",{value:W.notes,onChange:i=>Z(P=>({...P,notes:i.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",rows:3})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx("button",{onClick:F,disabled:Y,className:"w-full sm:w-auto rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2.5 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:Y?e==="edit"?"Atualizando...":"Salvando...":e==="edit"?"Atualizar OS":"Salvar OS"})})]}),e==="detail"&&s&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-base sm:text-lg font-semibold text-white break-words",children:s.title}),r.jsx("div",{className:"text-xs text-slate-300 mt-1",children:Jl[s.status]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto",children:[r.jsx("button",{onClick:()=>{const P=`https://gruporeis.cloud/api/jobs/${s._id}/pdf`;window.open(P,"_blank")},className:"w-full sm:w-auto rounded-lg border border-blue-400/50 bg-blue-500/20 px-3 py-2 text-xs font-semibold text-blue-300 transition hover:border-blue-400 hover:bg-blue-500/30",children:" Baixar PDF"}),s.status!=="cancelada"&&r.jsx("button",{onClick:()=>{B(s),t("edit")},className:"w-full sm:w-auto rounded-lg border border-amber-400/50 bg-amber-500/20 px-3 py-2 text-xs font-semibold text-amber-300 transition hover:border-amber-400 hover:bg-amber-500/30",children:" Editar"}),s.status==="concluida"&&!R(s._id)&&s.finalValue&&s.finalValue>0&&r.jsx("button",{onClick:()=>C(s),className:"w-full sm:w-auto rounded-lg border border-emerald-400/50 bg-emerald-500/20 px-3 py-2 text-xs font-semibold text-emerald-300 transition hover:border-emerald-400 hover:bg-emerald-500/30",children:"Receber"}),R(s._id)&&r.jsx("div",{className:"w-full sm:w-auto rounded-lg border border-emerald-400/50 bg-emerald-500/20 px-3 py-2 text-xs font-semibold text-emerald-300 text-center",children:" Recebido"}),s.status!=="cancelada"&&s.status!=="concluida"&&r.jsx("button",{onClick:async()=>{const{value:i}=await k.fire({title:"Cancelar Servio",html:`
                        <div class="text-left">
                          <p class="mb-4 text-slate-300">Tem certeza que deseja cancelar esta OS?</p>
                          <label class="block text-sm text-slate-300 mb-2">Motivo do cancelamento:</label>
                          <textarea 
                            id="cancellationReason" 
                            class="swal2-textarea bg-slate-800 text-white border-slate-600 rounded p-2 w-full" 
                            placeholder="Digite o motivo do cancelamento..."
                            rows="4"
                          ></textarea>
                        </div>
                      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sim, cancelar",cancelButtonText:"No",focusConfirm:!1,preConfirm:()=>{var g;const P=(g=document.getElementById("cancellationReason"))==null?void 0:g.value;return!P||P.trim()===""?(k.showValidationMessage("Por favor, informe o motivo do cancelamento"),!1):{reason:P.trim()}},customClass:{popup:"bg-slate-800 border border-slate-700",title:"text-white",htmlContainer:"text-slate-300",confirmButton:"bg-red-500 hover:bg-red-600",cancelButton:"bg-slate-600 hover:bg-slate-700"}});if(i&&i.reason)try{const P=await le(`/jobs/${s._id}`,{method:"PATCH",body:JSON.stringify({status:"cancelada",cancellationReason:i.reason})}),g=await P.json().catch(()=>null);if(!P.ok){k.fire("Erro",(g==null?void 0:g.error)||"No foi possvel cancelar a OS.","error");return}l(A=>A.map(D=>D._id===s._id?{...D,status:"cancelada",cancellationReason:i.reason}:D)),a({...s,status:"cancelada",cancellationReason:i.reason}),k.fire("Sucesso","OS cancelada com sucesso.","success")}catch(P){console.error(P),k.fire("Erro","Falha ao cancelar OS.","error")}},className:"w-full sm:w-auto rounded-lg border border-red-500/50 bg-red-500/10 px-3 py-2 text-xs font-semibold text-red-300 transition hover:border-red-400 hover:bg-red-500/20",children:"Cancelar Servio"}),s.status==="cancelada"&&r.jsx("button",{onClick:async()=>{if((await k.fire({title:"Excluir OS Cancelada",html:`
                        <div class="text-left">
                          <p class="mb-4 text-slate-300">Tem certeza que deseja excluir permanentemente esta OS?</p>
                          <p class="text-sm text-red-300"> Esta ao no pode ser desfeita!</p>
                        </div>
                      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sim, excluir",cancelButtonText:"Cancelar",customClass:{popup:"bg-slate-800 border border-slate-700",title:"text-white",htmlContainer:"text-slate-300",confirmButton:"bg-red-500 hover:bg-red-600",cancelButton:"bg-slate-600 hover:bg-slate-700"}})).isConfirmed)try{const P=await le(`/jobs/${s._id}`,{method:"DELETE"}),g=await P.json().catch(()=>null);if(!P.ok){k.fire("Erro",(g==null?void 0:g.error)||"No foi possvel excluir a OS.","error");return}l(A=>A.filter(D=>D._id!==s._id)),t("list"),a(null),k.fire("Sucesso","OS excluda com sucesso.","success")}catch(P){console.error(P),k.fire("Erro","Falha ao excluir OS.","error")}},className:"w-full sm:w-auto rounded-lg border border-red-500/50 bg-red-500/10 px-3 py-2 text-xs font-semibold text-red-300 transition hover:border-red-400 hover:bg-red-500/20",children:" Excluir"}),r.jsx("button",{onClick:()=>{t("list"),a(null)},className:"w-full sm:w-auto rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Fechar"})]})]}),r.jsxs("div",{className:"mt-4 grid gap-3 grid-cols-1 sm:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Servio principal"}),r.jsx("div",{className:"text-white",children:((te=(H=s.services)==null?void 0:H[0])==null?void 0:te.service)||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Cliente"}),r.jsx("div",{className:"text-white",children:s.clientName||s.client||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Obra"}),r.jsx("div",{className:"text-white",children:s.site||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Equipe"}),r.jsx("div",{className:"text-white",children:s.team||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Data"}),r.jsx("div",{className:"text-white",children:Gl(s.plannedDate)})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Valor Total"}),r.jsx("div",{className:"text-white font-semibold",children:s.finalValue!==void 0&&s.finalValue!==null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.finalValue):s.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.value):"-"})]}),s.travelDistanceKm&&s.travelDistanceKm>0&&r.jsxs(r.Fragment,{children:[s.selectedAddress&&r.jsxs("div",{className:"sm:col-span-2 rounded-lg border border-blue-400/30 bg-blue-500/5 px-3 py-2 text-sm text-slate-200",children:[r.jsxs("div",{className:"text-[11px] uppercase text-blue-300 flex items-center gap-1",children:[r.jsx("span",{children:""}),"Endereo Utilizado"]}),r.jsx("div",{className:"text-blue-100 text-xs mt-0.5",children:s.selectedAddress})]}),r.jsxs("div",{className:"rounded-lg border border-blue-400/50 bg-blue-500/10 px-3 py-2 text-sm text-slate-200",children:[r.jsxs("div",{className:"text-[11px] uppercase text-blue-300 flex items-center gap-1",children:[r.jsx("span",{children:""}),"Distncia"]}),r.jsxs("div",{className:"text-blue-100 font-semibold",children:[s.travelDistanceKm," km"]})]}),r.jsxs("div",{className:"rounded-lg border border-blue-400/50 bg-blue-500/10 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-blue-300",children:"Deslocamento"}),r.jsx("div",{className:"text-blue-100 font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.travelPrice)}),r.jsx("div",{className:"text-[10px] text-blue-200/60 mt-0.5",children:s.travelDescription})]})]}),(()=>{const i=s.estimatedDuration||0;if(i>0){const P=Math.floor(i/60),g=Math.round(i%60),A=P>0?g>0?`${P}h ${g}min`:`${P}h`:`${g}min`;let D=null;if(s.plannedDate)try{const V=new Date(s.plannedDate);isNaN(V.getTime())||(D=new Date(V.getTime()+i*60*1e3).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))}catch{}return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-lg border border-orange-400/50 bg-orange-500/10 px-3 py-2 text-sm text-slate-200",children:[r.jsxs("div",{className:"text-[11px] uppercase text-orange-300 flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tempo Estimado"]}),r.jsx("div",{className:"text-orange-100 font-semibold",children:A}),r.jsx("div",{className:"text-[10px] text-orange-200/70 mt-1",children:"Durao total estimada"})]}),D&&r.jsxs("div",{className:"rounded-lg border border-purple-400/50 bg-purple-500/10 px-3 py-2 text-sm text-slate-200",children:[r.jsxs("div",{className:"text-[11px] uppercase text-purple-300 flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Trmino Previsto"]}),r.jsx("div",{className:"text-purple-100 font-semibold",children:D}),r.jsx("div",{className:"text-[10px] text-purple-200/70 mt-1",children:"Data + tempo estimado"})]})]})}return null})(),R(s._id)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-emerald-300",children:"Status de Recebimento"}),r.jsx("div",{className:"text-emerald-300 font-semibold",children:" Recebido"}),s.receivedAt&&r.jsx("div",{className:"text-xs text-emerald-200/70 mt-1",children:new Date(s.receivedAt).toLocaleString("pt-BR")}),r.jsx("div",{className:"text-xs text-emerald-200/70 mt-1",children:"Transao registrada no caixa"})]}),s.receipt&&r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Recibo/Comprovante"}),r.jsx("div",{className:"text-white",children:s.receipt})]})]}),s.discountPercent&&s.discountPercent>0?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Desconto"}),r.jsxs("div",{className:"text-red-300 font-semibold",children:[s.discountPercent,"% (",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.discountValue||0),")"]})]}),r.jsxs("div",{className:"rounded-lg border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-emerald-300",children:"Valor Final"}),r.jsx("div",{className:"text-emerald-100 font-semibold text-lg",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.finalValue||s.value||0)})]})]}):r.jsxs("div",{className:"rounded-lg border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-emerald-300",children:"Valor Final"}),r.jsx("div",{className:"text-emerald-100 font-semibold text-lg",children:s.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.value):"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200 sm:col-span-2",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Observaes gerais"}),r.jsx("div",{className:"text-white",children:s.notes||"-"})]}),s.status==="cancelada"&&s.cancellationReason&&r.jsxs("div",{className:"rounded-lg border border-red-500/50 bg-red-500/10 px-3 py-2 text-sm text-slate-200 sm:col-span-2",children:[r.jsx("div",{className:"text-[11px] uppercase text-red-300",children:"Motivo do Cancelamento"}),r.jsx("div",{className:"text-red-200 mt-1",children:s.cancellationReason})]})]}),r.jsxs("div",{className:"mt-4 sm:mt-5 space-y-3",children:[r.jsxs("div",{className:"text-sm font-semibold text-white",children:["Servios detalhados (",(s.services||[]).length,")"]}),(s.services||[]).map((i,P)=>{var g;return r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 sm:p-4 text-sm text-slate-200",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-300 mb-3 pb-3 border-b border-white/10",children:[r.jsxs("span",{children:["Servio #",P+1]}),r.jsx("span",{children:i.service||"-"})]}),i.value!==void 0&&i.value!==null||i.finalValue!==void 0&&i.finalValue!==null?r.jsx("div",{className:"mb-3 p-2 sm:p-3 rounded-lg border border-emerald-400/30 bg-emerald-500/10",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] uppercase text-emerald-300",children:"Valor Total"}),r.jsx("div",{className:"text-emerald-100 font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.value||0)})]}),i.discountPercent&&i.discountPercent>0?r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] uppercase text-red-300",children:"Desconto"}),r.jsxs("div",{className:"text-red-200 font-semibold",children:[i.discountPercent,"%"]})]}):r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] uppercase text-slate-400",children:"Desconto"}),r.jsx("div",{className:"text-slate-300 font-semibold",children:"0%"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] uppercase text-emerald-300",children:"Valor Final"}),r.jsx("div",{className:"text-emerald-100 font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.finalValue!==void 0&&i.finalValue!==null?i.finalValue:i.value||0)})]})]})}):r.jsx("div",{className:"mb-3 p-3 rounded-lg border border-slate-600/30 bg-slate-800/10",children:r.jsx("div",{className:"text-xs text-slate-400 text-center",children:"Nenhum valor informado para este servio"})}),(()=>{if(i.executionTime&&i.quantidade&&i.profundidade){const A=parseFloat(i.quantidade)||0,D=parseFloat(i.profundidade)||0,V=i.executionTime*A*D,X=Math.floor(V/60),ne=Math.round(V%60),h=X>0?ne>0?`${X}h ${ne}min`:`${X}h`:`${ne}min`;return r.jsx("div",{className:"mb-3 p-2 sm:p-3 rounded-lg border border-orange-400/30 bg-orange-500/10",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-[10px] uppercase text-orange-300 flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tempo/metro"]}),r.jsxs("div",{className:"text-orange-100 font-semibold",children:[i.executionTime," min/m"]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-[10px] uppercase text-orange-300 flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tempo Total Estimado"]}),r.jsx("div",{className:"text-orange-100 font-semibold text-base",children:h}),r.jsxs("div",{className:"text-[9px] text-orange-200/70 mt-0.5",children:[A,"  ",D,"m  ",i.executionTime," min/m"]})]})]})})}return null})(),r.jsxs("div",{className:"mt-2 grid gap-2 grid-cols-1 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Local"}),r.jsx("div",{className:"text-white text-xs sm:text-sm",children:i.localType||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Solo"}),r.jsx("div",{className:"text-white text-xs sm:text-sm",children:i.soilType||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Acesso"}),r.jsx("div",{className:"text-white text-xs sm:text-sm break-words",children:i.access||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Dimetro"}),r.jsx("div",{className:"text-white text-xs sm:text-sm",children:i.diametro||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Profundidade"}),r.jsx("div",{className:"text-white text-xs sm:text-sm",children:i.profundidade||"-"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Quantidade"}),r.jsx("div",{className:"text-white text-xs sm:text-sm",children:i.quantidade||"-"})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Categorias"}),r.jsx("div",{className:"text-white text-xs sm:text-sm break-words",children:(g=i.categories)!=null&&g.length?i.categories.join(", "):"-"})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"SPT / Diagnstico"}),r.jsx("div",{className:"text-white text-xs sm:text-sm break-words",children:i.sptInfo||"-"})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("div",{className:"text-[10px] sm:text-[11px] uppercase text-slate-400",children:"Observaes do servio"}),r.jsx("div",{className:"text-white text-xs sm:text-sm break-words",children:i.observacoes||"-"})]})]})]},i.id||P)})]}),r.jsxs("div",{className:"mt-4 sm:mt-5 rounded-xl border border-white/10 bg-white/5 p-3 sm:p-4",children:[r.jsx("div",{className:"text-sm font-semibold text-white mb-3",children:"Assinatura do Cliente"}),s.clientSignature?r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 p-3",children:[r.jsx("div",{className:"text-xs text-emerald-300 mb-2",children:" Assinatura coletada"}),r.jsx("img",{src:s.clientSignature,alt:"Assinatura do cliente",className:"w-full max-w-md mx-auto border border-white/20 rounded bg-white"}),s.clientSignedAt&&r.jsxs("div",{className:"text-xs text-emerald-200/70 mt-2 text-center",children:["Assinado em: ",new Date(s.clientSignedAt).toLocaleString("pt-BR")]})]})}):r.jsxs("div",{className:"rounded-lg border border-white/20 bg-slate-800/50 p-4 text-center",children:[r.jsx("div",{className:"text-sm text-slate-400",children:"Nenhuma assinatura coletada ainda."}),r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"A assinatura pode ser coletada na pgina de operaes pblicas."})]})]})]})]})}function pw(){return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Nova ordem de servio"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Formulrio ser ligado ao backend para criar OS com cliente, obra, equipe e horrios. Em breve disponvel."})]}),r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-sm text-slate-200 shadow-inner shadow-black/20",children:"Em breve: formulrio de abertura de OS."})]})}function xw(){const[e,t]=p.useState("list"),[s,a]=p.useState([]),[n,l]=p.useState([]),[o,c]=p.useState([]),[d,m]=p.useState(""),[L,x]=p.useState("all"),[y,$]=p.useState(!1),[Y,G]=p.useState(!0),[M,f]=p.useState(null),[u,N]=p.useState({name:"",role:"",email:"",phone:"",document:"",docRg:"",docCnh:"",docAddressProof:"",docCv:"",docRgFile:null,docCnhFile:null,docAddressProofFile:null,docCvFile:null,status:"ativo",hireDate:"",salary:"",teamId:"",teamName:"",machineId:"",machineName:"",notes:""}),T=(E,Q)=>{if(!E){N(K=>({...K,[Q]:null}));return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/png","image/jpeg"].includes(E.type)){k.fire("Ateno","Formatos permitidos: PDF, Word, PNG, JPG.","warning");return}const Z=new FileReader;Z.onload=()=>{var v;const K=(v=Z.result)==null?void 0:v.split(",")[1];N(q=>({...q,[Q]:{name:E.name,mime:E.type,size:E.size,data:K}}))},Z.readAsDataURL(E)};p.useEffect(()=>{(async()=>{try{G(!0);const[Q,W,Z]=await Promise.all([le("/employees",{cache:"no-store"}),le("/teams",{cache:"no-store"}),le("/machines",{cache:"no-store"})]),K=await Q.json().catch(()=>null),v=await W.json().catch(()=>null),q=await Z.json().catch(()=>null);Q.ok?a(Array.isArray(K==null?void 0:K.data)?K.data:[]):console.error("Erro ao carregar funcionrios",K),W.ok&&l(Array.isArray(v==null?void 0:v.data)?v.data:[]),Z.ok&&c(Array.isArray(q==null?void 0:q.data)?q.data:[])}catch(Q){console.error(Q)}finally{G(!1)}})()},[]);const J=p.useMemo(()=>{const E=d.trim().toLowerCase();return s.filter(Q=>{var K,v,q,B;const W=L==="all"?!0:Q.status===L,Z=E.length===0||((K=Q.name)==null?void 0:K.toLowerCase().includes(E))||((v=Q.role)==null?void 0:v.toLowerCase().includes(E))||((q=Q.document)==null?void 0:q.toLowerCase().includes(E))||((B=Q.teamName)==null?void 0:B.toLowerCase().includes(E));return W&&Z})},[s,d,L]),z=()=>N({name:"",role:"",email:"",phone:"",document:"",docRg:"",docCnh:"",docAddressProof:"",docCv:"",docRgFile:null,docCnhFile:null,docAddressProofFile:null,docCvFile:null,status:"ativo",hireDate:"",salary:"",teamId:"",teamName:"",machineId:"",machineName:"",notes:""}),I=async()=>{var Q,W,Z,K;if(y)return;if(!u.name.trim()){k.fire("Ateno","Informe o nome do funcionrio.","warning");return}const E={...u,salary:u.salary?parseFloat(u.salary):void 0,docRgFile:u.docRgFile||void 0,docCnhFile:u.docCnhFile||void 0,docAddressProofFile:u.docAddressProofFile||void 0,docCvFile:u.docCvFile||void 0,teamName:u.teamId&&((Q=n.find(v=>v._id===u.teamId))!=null&&Q.name)?(W=n.find(v=>v._id===u.teamId))==null?void 0:W.name:u.teamName||void 0,machineName:u.machineId&&((Z=o.find(v=>v._id===u.machineId))!=null&&Z.name)?(K=o.find(v=>v._id===u.machineId))==null?void 0:K.name:u.machineName||void 0};try{if($(!0),M){const v=await le(`/employees/${M}`,{method:"PUT",body:JSON.stringify(E)}),q=await v.json().catch(()=>null);if(!v.ok){k.fire("Erro",(q==null?void 0:q.error)||"No foi possvel atualizar.","error");return}a(B=>B.map(b=>b._id===M?q.data:b)),k.fire("Sucesso","Funcionrio atualizado.","success")}else{const v=await le("/employees",{method:"POST",body:JSON.stringify(E)}),q=await v.json().catch(()=>null);if(!v.ok){k.fire("Erro",(q==null?void 0:q.error)||"No foi possvel criar.","error");return}a(B=>[q.data,...B]),k.fire("Sucesso","Funcionrio criado.","success")}z(),f(null),t("list")}catch(v){console.error(v),k.fire("Erro","Falha ao salvar.","error")}finally{$(!1)}},O=E=>{f(E._id),t("form"),N({name:E.name||"",role:E.role||"",email:E.email||"",phone:E.phone||"",document:E.document||"",docRg:E.docRg||"",docCnh:E.docCnh||"",docAddressProof:E.docAddressProof||"",docCv:E.docCv||"",docRgFile:E.docRgFile||null,docCnhFile:E.docCnhFile||null,docAddressProofFile:E.docAddressProofFile||null,docCvFile:E.docCvFile||null,status:E.status||"ativo",hireDate:E.hireDate||"",salary:E.salary?String(E.salary):"",teamId:E.teamId||"",teamName:E.teamName||"",machineId:E.machineId||"",machineName:E.machineName||"",notes:E.notes||""})},U=async E=>{const Q=await k.fire({title:"Excluir funcionrio?",html:'<p>Essa ao no pode ser desfeita.</p><input id="swal-reason" class="swal2-input" placeholder="Motivo (obrigatrio)">',icon:"warning",showCancelButton:!0,confirmButtonText:"Excluir",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",preConfirm:()=>{const W=document.getElementById("swal-reason"),Z=W==null?void 0:W.value.trim();if(!Z){k.showValidationMessage("Informe um motivo para excluir.");return}return Z}});if(!(!Q.isConfirmed||!Q.value))try{const W=await le(`/employees/${E._id}`,{method:"DELETE"}),Z=await W.json().catch(()=>null);if(!W.ok){k.fire("Erro",(Z==null?void 0:Z.error)||"No foi possvel excluir","error");return}a(K=>K.filter(v=>v._id!==E._id)),k.fire("Sucesso","Funcionrio excludo.","success"),M===E._id&&(z(),f(null),t("list"))}catch(W){console.error(W),k.fire("Erro","Falha ao excluir.","error")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Funcionrios"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Cadastre colaboradores, funes, status e vincule a equipes."})]}),e==="list"?r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("input",{value:d,onChange:E=>m(E.target.value),placeholder:"Buscar por nome, funo, documento...",className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"}),r.jsxs("select",{value:L,onChange:E=>x(E.target.value),className:"rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"ativo",children:"Ativos"}),r.jsx("option",{value:"inativo",children:"Inativos"})]}),r.jsx("button",{onClick:()=>{z(),f(null),t("form")},className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-blue-600 hover:to-emerald-500",children:"+ Novo funcionrio"})]}):r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>{z(),f(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})})]}),e==="form"&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:M?"Editar funcionrio":"Novo funcionrio"}),r.jsx("p",{className:"text-xs text-slate-300",children:"Nome, funo, contato, equipe e status."})]}),M&&r.jsx("button",{onClick:()=>{z(),f(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar edio"})]}),r.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Nome"}),r.jsx("input",{value:u.name,onChange:E=>N(Q=>({...Q,name:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Nome completo"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Funo / Cargo"}),r.jsx("input",{value:u.role,onChange:E=>N(Q=>({...Q,role:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Operador, Supervisor, Financeiro..."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"CPF/CNPJ"}),r.jsx("input",{value:u.document,onChange:E=>N(Q=>({...Q,document:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Documento"})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"RG (link/arquivo)"}),r.jsx("input",{value:u.docRg,onChange:E=>N(Q=>({...Q,docRg:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"URL ou referncia"}),r.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:E=>{var Q;return T(((Q=E.target.files)==null?void 0:Q[0])||null,"docRgFile")},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white file:mr-3 file:rounded-md file:border-0 file:bg-emerald-500/80 file:px-3 file:py-1 file:text-sm file:font-semibold file:text-white file:hover:bg-emerald-500/90"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"CNH (link/arquivo)"}),r.jsx("input",{value:u.docCnh,onChange:E=>N(Q=>({...Q,docCnh:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"URL ou referncia"}),r.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:E=>{var Q;return T(((Q=E.target.files)==null?void 0:Q[0])||null,"docCnhFile")},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white file:mr-3 file:rounded-md file:border-0 file:bg-emerald-500/80 file:px-3 file:py-1 file:text-sm file:font-semibold file:text-white file:hover:bg-emerald-500/90"})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Comprovante de endereo"}),r.jsx("input",{value:u.docAddressProof,onChange:E=>N(Q=>({...Q,docAddressProof:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"URL ou referncia"}),r.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:E=>{var Q;return T(((Q=E.target.files)==null?void 0:Q[0])||null,"docAddressProofFile")},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white file:mr-3 file:rounded-md file:border-0 file:bg-emerald-500/80 file:px-3 file:py-1 file:text-sm file:font-semibold file:text-white file:hover:bg-emerald-500/90"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Currculo"}),r.jsx("input",{value:u.docCv,onChange:E=>N(Q=>({...Q,docCv:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"URL ou referncia"}),r.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:E=>{var Q;return T(((Q=E.target.files)==null?void 0:Q[0])||null,"docCvFile")},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white file:mr-3 file:rounded-md file:border-0 file:bg-emerald-500/80 file:px-3 file:py-1 file:text-sm file:font-semibold file:text-white file:hover:bg-emerald-500/90"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Telefone"}),r.jsx("input",{value:u.phone,onChange:E=>N(Q=>({...Q,phone:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"(11) 99999-9999"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"E-mail"}),r.jsx("input",{type:"email",value:u.email,onChange:E=>N(Q=>({...Q,email:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"contato@empresa.com"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Status"}),r.jsxs("select",{value:u.status,onChange:E=>N(Q=>({...Q,status:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"ativo",children:"Ativo"}),r.jsx("option",{value:"inativo",children:"Inativo"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Data de admisso"}),r.jsx("input",{type:"date",value:u.hireDate,onChange:E=>N(Q=>({...Q,hireDate:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Salrio (R$)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:u.salary,onChange:E=>N(Q=>({...Q,salary:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0.00"}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Valor mensal do salrio do funcionrio"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Equipe"}),r.jsxs("select",{value:u.teamId,onChange:E=>{const Q=E.target.value,W=n.find(Z=>Z._id===Q);N(Z=>({...Z,teamId:Q,teamName:(W==null?void 0:W.name)||""}))},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Sem equipe"}),n.map(E=>r.jsx("option",{value:E._id,children:E.name},E._id))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Mquina"}),r.jsxs("select",{value:u.machineId,onChange:E=>{const Q=E.target.value,W=o.find(Z=>Z._id===Q);N(Z=>({...Z,machineId:Q,machineName:(W==null?void 0:W.name)||""}))},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Sem mquina"}),o.filter(E=>E.status==="ativa").map(E=>r.jsxs("option",{value:E._id,children:[E.name," ",E.plate?`(${E.plate})`:""]},E._id))]}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Vincule o funcionrio a uma mquina ativa"})]}),r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Observaes"}),r.jsx("textarea",{value:u.notes,onChange:E=>N(Q=>({...Q,notes:E.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",rows:3,placeholder:"Documentos pendentes, treinamentos, etc."})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx("button",{onClick:I,disabled:y,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:y?"Salvando...":M?"Salvar alteraes":"Criar funcionrio"})})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-0 text-sm text-slate-200 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-white",children:"Funcionrios cadastrados"}),r.jsx("span",{className:"text-xs text-slate-300",children:Y?"Carregando...":`${J.length} registro(s)`})]}),Y?r.jsxs("div",{className:"px-6 py-8 text-center text-slate-300",children:[r.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-emerald-400"}),r.jsx("p",{className:"text-sm",children:"Carregando funcionrios..."})]}):J.length===0?r.jsx("div",{className:"px-6 py-4 text-slate-300",children:"Nenhum funcionrio cadastrado. Clique em + Novo funcionrio para adicionar."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-white/5 text-xs uppercase text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Nome"}),r.jsx("th",{className:"px-4 py-3",children:"Funo"}),r.jsx("th",{className:"px-4 py-3",children:"Documento"}),r.jsx("th",{className:"px-4 py-3",children:"E-mail"}),r.jsx("th",{className:"px-4 py-3",children:"Telefone"}),r.jsx("th",{className:"px-4 py-3",children:"Equipe"}),r.jsx("th",{className:"px-4 py-3",children:"Mquina"}),r.jsx("th",{className:"px-4 py-3",children:"Salrio"}),r.jsx("th",{className:"px-4 py-3",children:"Status"}),r.jsx("th",{className:"px-4 py-3",children:"Admisso"}),r.jsx("th",{className:"px-4 py-3 text-right",children:"Aes"})]})}),r.jsx("tbody",{children:J.map(E=>r.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-4 py-3 text-white",children:E.name}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.role||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.document||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.email||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.phone||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.teamName||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.machineName||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.salary?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(E.salary):"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${E.status==="ativo"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:E.status==="ativo"?"Ativo":"Inativo"})}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:E.hireDate||"-"}),r.jsx("td",{className:"px-4 py-3 text-right text-slate-200",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>O(E),className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Editar"}),r.jsx("button",{type:"button",onClick:()=>U(E),className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-red-100 transition hover:border-red-400/40 hover:bg-red-500/10",children:"Excluir"})]})})]},E._id))})]})})]})]})}function hw(){const[e,t]=p.useState("list"),[s,a]=p.useState([]),[n,l]=p.useState([]),[o,c]=p.useState(""),[d,m]=p.useState("all"),[L,x]=p.useState(!1),[y,$]=p.useState(!0),[Y,G]=p.useState(null),[M,f]=p.useState(null),[u,N]=p.useState({name:"",leader:"",status:"ativa",membersText:"",selectedEmployeeIds:[],notes:"",operationPass:""});p.useEffect(()=>{(async()=>{try{$(!0);const[v,q]=await Promise.all([le("/teams",{cache:"no-store"}),le("/employees",{cache:"no-store"})]),B=await v.json().catch(()=>null),b=await q.json().catch(()=>null);v.ok?a(Array.isArray(B==null?void 0:B.data)?B.data:[]):console.error("Erro ao carregar equipes",B),q.ok&&l(Array.isArray(b==null?void 0:b.data)?b.data:[])}catch(v){console.error(v)}finally{$(!1)}})()},[]);const T=p.useMemo(()=>{const K=o.trim().toLowerCase();return s.filter(v=>{var b,w;const q=d==="all"?!0:v.status===d,B=K.length===0||((b=v.name)==null?void 0:b.toLowerCase().includes(K))||((w=v.leader)==null?void 0:w.toLowerCase().includes(K));return q&&B})},[s,o,d]),J=()=>N({name:"",leader:"",status:"ativa",membersText:"",selectedEmployeeIds:[],notes:"",operationPass:""}),z=K=>K.split(/[\n,;]+/).map(v=>v.trim()).filter(v=>v.length>0),I=async()=>{if(L)return;if(!u.name.trim()){k.fire("Ateno","Informe o nome da equipe.","warning");return}const K=u.selectedEmployeeIds.map(B=>{var b;return(b=n.find(w=>w._id===B))==null?void 0:b.name}).filter(Boolean),v=z(u.membersText),q=[...K,...v];if(q.length===0){k.fire("Ateno","Adicione ao menos um membro (selecione funcionrios ou digite nomes).","warning");return}try{x(!0);const B={name:u.name,leader:u.leader,status:u.status,notes:u.notes,members:q,employeeIds:u.selectedEmployeeIds,operationPass:u.operationPass||void 0};if(Y){const F=await le(`/teams/${Y}`,{method:"PUT",body:JSON.stringify(B)}),R=await F.json().catch(()=>null);if(!F.ok){k.fire("Erro",(R==null?void 0:R.error)||"No foi possvel atualizar a equipe.","error");return}a(C=>C.map(H=>H._id===Y?R.data:H)),k.fire("Sucesso","Equipe atualizada.","success")}else{const F=await le("/teams",{method:"POST",body:JSON.stringify(B)}),R=await F.json().catch(()=>null);if(!F.ok){k.fire("Erro",(R==null?void 0:R.error)||"No foi possvel criar a equipe.","error");return}a(C=>[R.data,...C]),k.fire("Sucesso","Equipe criada.","success")}const b=await le("/employees",{cache:"no-store"}),w=await b.json().catch(()=>null);b.ok&&l(Array.isArray(w==null?void 0:w.data)?w.data:[]),J(),G(null),t("list")}catch(B){console.error(B),k.fire("Erro","Falha ao salvar equipe.","error")}finally{x(!1)}},O=K=>{G(K._id),t("form");const v=n.filter(b=>b.teamId===K._id).map(b=>b._id),B=(Array.isArray(K.members)?K.members:[]).filter(b=>!n.some(w=>w.name===b&&w.teamId===K._id));N({name:K.name||"",leader:K.leader||"",status:K.status||"ativa",membersText:B.join(`
`),selectedEmployeeIds:v,notes:K.notes||"",operationPass:K.operationPass||""})},U=async K=>{const v=await k.fire({title:"Excluir equipe?",html:'<p>Essa ao no pode ser desfeita.</p><input id="swal-reason" class="swal2-input" placeholder="Motivo (obrigatrio)">',icon:"warning",showCancelButton:!0,confirmButtonText:"Excluir",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",preConfirm:()=>{const q=document.getElementById("swal-reason"),B=q==null?void 0:q.value.trim();if(!B){k.showValidationMessage("Informe um motivo para excluir.");return}return B}});if(!(!v.isConfirmed||!v.value))try{const q=await le(`/teams/${K._id}`,{method:"DELETE"}),B=await q.json().catch(()=>null);if(!q.ok){k.fire("Erro",(B==null?void 0:B.error)||"No foi possvel excluir","error");return}a(b=>b.filter(w=>w._id!==K._id)),k.fire("Sucesso","Equipe excluda.","success"),Y===K._id&&(J(),G(null),t("list"))}catch(q){console.error(q),k.fire("Erro","Falha ao excluir equipe.","error")}},E=async(K,v)=>{try{await navigator.clipboard.writeText(K),k.fire("Copiado",v,"success")}catch(q){console.error(q),k.fire("Erro","No foi possvel copiar.","error")}},Q=K=>{const q=`${typeof window<"u"?window.location.origin:""}/operations/team/${K._id}`;E(q,"Link copiado.")},W=K=>{if(!K.operationPass){k.fire("Ateno","Configure a senha primeiro na edio da equipe.","warning");return}E(K.operationPass,"Senha copiada.")},Z=K=>{const q=`${typeof window<"u"?window.location.origin:""}/operations/team/${K._id}`;if(!K.operationPass){k.fire({title:"Link de Operao",html:`
          <div class="text-left text-sm">
            <div class="p-3 mb-3 bg-yellow-50 border border-yellow-200 rounded">
              <p class="text-yellow-800"> Senha no configurada</p>
              <p class="text-xs text-yellow-700 mt-1">Configure a senha na edio da equipe para permitir acesso ao painel.</p>
            </div>
            <div><strong>Equipe:</strong> ${K.name}</div>
            <div class="mt-2"><strong>Link permanente:</strong></div>
            <div class="text-xs text-slate-600 break-all mt-1">${q}</div>
          </div>
        `,icon:"warning"});return}k.fire({title:"Link de Operao",html:`
        <div class="text-left text-sm">
          <div><strong>Equipe:</strong> ${K.name}</div>
          <div class="mt-2"><strong>Link permanente:</strong></div>
          <div class="mt-1 p-2 bg-gray-50 rounded break-all">
            <a href="${q}" target="_blank" class="text-emerald-600 text-xs">${q}</a>
          </div>
          <div class="mt-3"><strong>Senha:</strong> <span class="text-gray-900 font-mono">${K.operationPass}</span></div>
          <div class="mt-3 text-slate-600 text-xs p-2 bg-blue-50 border border-blue-200 rounded">
             Este link  permanente. Compartilhe com a equipe. A senha pode ser alterada na edio da equipe.
          </div>
        </div>
      `,icon:"info",width:600})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Equipes"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Crie equipes, defina lder, status e membros. Todos os dados ficam salvos no banco."})]}),e==="list"?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{value:o,onChange:K=>c(K.target.value),placeholder:"Buscar por nome ou lder",className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"}),r.jsxs("select",{value:d,onChange:K=>m(K.target.value),className:"rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"ativa",children:"Ativas"}),r.jsx("option",{value:"inativa",children:"Inativas"})]}),r.jsx("button",{onClick:()=>{J(),G(null),t("form")},className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-blue-600 hover:to-emerald-500",children:"+ Nova equipe"})]}):r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>{J(),G(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})})]}),e==="form"&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:Y?"Editar equipe":"Nova equipe"}),r.jsx("p",{className:"text-xs text-slate-300",children:"Nome, lder, status e membros (um por linha)."})]}),Y&&r.jsx("button",{onClick:()=>{J(),G(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar edio"})]}),r.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Nome da equipe"}),r.jsx("input",{value:u.name,onChange:K=>N(v=>({...v,name:K.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Equipe de Campo 01"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Lder / Responsvel"}),r.jsx("input",{value:u.leader,onChange:K=>N(v=>({...v,leader:K.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Nome do lder"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Status"}),r.jsxs("select",{value:u.status,onChange:K=>N(v=>({...v,status:K.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"ativa",children:"Ativa"}),r.jsx("option",{value:"inativa",children:"Inativa"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Observaes"}),r.jsx("input",{value:u.notes,onChange:K=>N(v=>({...v,notes:K.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Equipamento, regio, turno..."})]}),r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Senha do Painel de Operaes"}),r.jsx("input",{type:"password",value:u.operationPass,onChange:K=>N(v=>({...v,operationPass:K.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Senha para acesso ao painel pblico (mnimo 4 caracteres)"}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Esta senha ser usada pela equipe para acessar o painel de operaes. Deixe em branco para no permitir acesso."})]}),r.jsxs("div",{className:"space-y-2 text-sm md:col-span-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-slate-200 font-semibold",children:"Funcionrios da Equipe"}),n.filter(K=>K.status==="ativo").length>0&&r.jsx("button",{type:"button",onClick:()=>{const K=n.filter(v=>v.status==="ativo").map(v=>v._id);u.selectedEmployeeIds.length===K.length?N(v=>({...v,selectedEmployeeIds:[]})):N(v=>({...v,selectedEmployeeIds:K}))},className:"text-xs text-emerald-400 hover:text-emerald-300 transition",children:u.selectedEmployeeIds.length===n.filter(K=>K.status==="ativo").length?"Desmarcar todos":"Selecionar todos"})]}),r.jsx("div",{className:"rounded-lg border border-white/10 bg-slate-900/60 p-4 max-h-[300px] overflow-y-auto",children:n.filter(K=>K.status==="ativo").length===0?r.jsx("div",{className:"text-sm text-slate-400 text-center py-4",children:"Nenhum funcionrio ativo cadastrado"}):r.jsx("div",{className:"space-y-2",children:n.filter(K=>K.status==="ativo").map(K=>{var b;const v=u.selectedEmployeeIds.includes(K._id),q=K.teamId&&K.teamId!==Y,B=q?((b=s.find(w=>w._id===K.teamId))==null?void 0:b.name)||"Outra equipe":"";return r.jsxs("label",{className:`flex items-center gap-3 rounded-lg border p-3 cursor-pointer transition ${v?"border-emerald-400/50 bg-emerald-500/20":"border-white/10 bg-white/5 hover:border-emerald-400/30 hover:bg-emerald-500/10"}`,children:[r.jsx("input",{type:"checkbox",checked:v,onChange:w=>{w.target.checked?N(F=>({...F,selectedEmployeeIds:[...F.selectedEmployeeIds,K._id]})):N(F=>({...F,selectedEmployeeIds:F.selectedEmployeeIds.filter(R=>R!==K._id)}))},className:"h-4 w-4 rounded border-white/20 bg-slate-800 text-emerald-500 focus:ring-2 focus:ring-emerald-500/50"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-white",children:K.name}),r.jsxs("div",{className:"text-xs text-slate-300 mt-0.5",children:[K.role&&r.jsxs("span",{children:["Cargo: ",K.role]}),K.role&&K.phone&&r.jsx("span",{className:"mx-2",children:""}),K.phone&&r.jsxs("span",{children:["Tel: ",K.phone]})]}),q&&r.jsxs("div",{className:"text-xs text-orange-400 mt-1",children:[" J est na equipe: ",B]})]})]},K._id)})})}),r.jsxs("div",{className:"text-[11px] text-slate-400",children:["Funcionrios selecionados sero automaticamente vinculados  equipe.",u.selectedEmployeeIds.length>0&&r.jsxs("span",{className:"text-emerald-400 ml-1 font-semibold",children:[u.selectedEmployeeIds.length," selecionado(s)"]})]})]}),r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Outros Membros (texto livre - um por linha)"}),r.jsx("textarea",{value:u.membersText,onChange:K=>N(v=>({...v,membersText:K.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",rows:3,placeholder:`Joo Silva
Maria Souza
Carlos Pereira`}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Para membros que no so funcionrios cadastrados. Separe por quebras de linha, vrgula ou ponto e vrgula."})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx("button",{onClick:I,disabled:L,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:L?"Salvando...":Y?"Salvar alteraes":"Criar equipe"})})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-0 text-sm text-slate-200 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-white",children:"Equipes cadastradas"}),r.jsx("span",{className:"text-xs text-slate-300",children:y?"Carregando...":`${T.length} registro(s)`})]}),y?r.jsxs("div",{className:"px-6 py-8 text-center text-slate-300",children:[r.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-emerald-400"}),r.jsx("p",{className:"text-sm",children:"Carregando equipes..."})]}):T.length===0?r.jsx("div",{className:"px-6 py-4 text-slate-300",children:"Nenhuma equipe cadastrada. Crie uma nova equipe no formulrio acima."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-white/5 text-xs uppercase text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Equipe"}),r.jsx("th",{className:"px-4 py-3",children:"Lder"}),r.jsx("th",{className:"px-4 py-3",children:"Status"}),r.jsx("th",{className:"px-4 py-3",children:"Membros"}),r.jsx("th",{className:"px-4 py-3",children:"Observaes"}),r.jsx("th",{className:"px-4 py-3 text-right",children:"Aes"})]})}),r.jsx("tbody",{children:T.map(K=>r.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 cursor-pointer",onClick:()=>f(K),children:[r.jsx("td",{className:"px-4 py-3 text-white",children:r.jsx("div",{className:"font-semibold",children:K.name})}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:K.leader||"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${K.status==="ativa"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:K.status==="ativa"?"Ativa":"Inativa"})}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:(()=>{const v=n.filter(B=>B.teamId===K._id),q=Array.isArray(K.members)?K.members.length:0;return v.length>0||q>0?r.jsxs("span",{className:"text-emerald-300 font-semibold",children:[q," membro(s)"]}):"-"})()}),r.jsx("td",{className:"px-4 py-3 text-slate-200 truncate max-w-xs",children:K.notes||"-"}),r.jsx("td",{className:"px-4 py-3 text-right text-slate-200",children:r.jsx("div",{className:"flex flex-col items-end gap-2",children:r.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),O(K)},className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Editar"}),r.jsx(Ca,{to:`/teams/${K._id}/jobs`,onClick:v=>v.stopPropagation(),className:"rounded-md border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/80 hover:bg-emerald-500/20",children:"Servios"}),r.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),Z(K)},className:"rounded-md border border-blue-400/50 bg-blue-500/10 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:border-blue-300/80 hover:bg-blue-500/20",children:"Ver link"}),r.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),Q(K)},className:"rounded-md border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/60 hover:bg-white/10",children:"Copiar link"}),K.operationPass&&r.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),W(K)},className:"rounded-md border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/60 hover:bg-white/10",children:"Copiar senha"}),r.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),U(K)},className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-red-100 transition hover:border-red-400/40 hover:bg-red-500/10",children:"Excluir"})]})})})]},K._id))})]})})]}),M&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>f(null),children:r.jsxs("div",{className:"w-full max-w-2xl rounded-2xl border border-white/10 bg-slate-900 p-6 shadow-2xl max-h-[90vh] overflow-y-auto",onClick:K=>K.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:M.name}),r.jsx("p",{className:"text-sm text-slate-300",children:"Detalhes da equipe"})]}),r.jsx("button",{onClick:()=>f(null),className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Fechar"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400",children:"Lder / Responsvel"}),r.jsx("div",{className:"text-sm text-white mt-1",children:M.leader||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-semibold ${M.status==="ativa"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:M.status==="ativa"?"Ativa":"Inativa"})})]})]}),M.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400",children:"Observaes"}),r.jsx("div",{className:"text-sm text-white mt-1",children:M.notes})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-2 block",children:"Funcionrios Vinculados"}),(()=>{const K=n.filter(v=>v.teamId===M._id);return K.length>0?r.jsx("div",{className:"space-y-2",children:K.map(v=>r.jsx("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 p-3",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-emerald-100",children:v.name}),v.role&&r.jsxs("div",{className:"text-xs text-slate-300 mt-1",children:["Cargo: ",v.role]}),v.phone&&r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Telefone: ",v.phone]}),v.email&&r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Email: ",v.email]})]})})},v._id))}):r.jsx("div",{className:"text-sm text-slate-400",children:"Nenhum funcionrio vinculado"})})()]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-2 block",children:"Todos os Membros"}),Array.isArray(M.members)&&M.members.length>0?r.jsx("div",{className:"space-y-1",children:M.members.map((K,v)=>{const q=n.some(B=>B.teamId===M._id&&B.name===K);return r.jsxs("div",{className:`rounded-lg border p-2 text-sm ${q?"border-emerald-400/30 bg-emerald-500/10 text-emerald-100":"border-white/10 bg-white/5 text-slate-200"}`,children:[K," ",q&&r.jsx("span",{className:"text-xs",children:"(Funcionrio)"})]},v)})}):r.jsx("div",{className:"text-sm text-slate-400",children:"Nenhum membro cadastrado"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-2 block",children:"Link de Operao (Permanente)"}),r.jsxs("div",{className:`rounded-lg border p-3 ${M.operationPass?"border-blue-400/30 bg-blue-500/10":"border-yellow-400/30 bg-yellow-500/10"}`,children:[r.jsx("div",{className:`text-sm break-all ${M.operationPass?"text-blue-100":"text-yellow-100"}`,children:typeof window<"u"?`${window.location.origin}/operations/team/${M._id}`:""}),M.operationPass?r.jsxs("div",{className:"text-xs text-slate-300 mt-2",children:["Senha: ",r.jsx("span",{className:"font-semibold text-white",children:M.operationPass})]}):r.jsx("div",{className:"text-xs text-yellow-200 mt-2",children:" Configure a senha na edio da equipe para permitir acesso"})]})]})]})]})})]})}function fw(){var f;const{id:e}=Zi();if(!e)return r.jsx("div",{children:"Team ID no encontrado"});const[t,s]=p.useState(null),[a,n]=p.useState([]),[l,o]=p.useState(!0),[c,d]=p.useState(null),[m,L]=p.useState("disponiveis"),[x,y]=p.useState(null);p.useEffect(()=>{(async()=>{try{const[N,T]=await Promise.all([le("/teams",{cache:"no-store"}),le("/jobs",{cache:"no-store"})]),J=await N.json().catch(()=>null),z=await T.json().catch(()=>null);if(N.ok&&Array.isArray(J==null?void 0:J.data)){const I=J.data.find(O=>O._id===e);s(I||null)}T.ok&&Array.isArray(z==null?void 0:z.data)&&n(z.data)}catch(N){console.error(N)}finally{o(!1)}})()},[e]);const $=p.useMemo(()=>t?a.filter(u=>(u.team||"").toLowerCase()===(t.name||"").toLowerCase()):[],[a,t]),Y=p.useMemo(()=>m==="disponiveis"?$.filter(u=>u.status==="pendente"):m==="execucao"?$.filter(u=>u.status==="em_execucao"):m==="concluidas"?$.filter(u=>u.status==="concluida"):$,[$,m]),G=async(u,N)=>{try{d(u);const T={status:N},J=new Date().toISOString();N==="em_execucao"&&(T.startedAt=T.startedAt||J),N==="concluida"&&(T.finishedAt=T.finishedAt||J);const z=await le(`/jobs/${u}`,{method:"PATCH",body:JSON.stringify(T)}),I=await z.json().catch(()=>null);if(!z.ok){k.fire("Erro",(I==null?void 0:I.error)||"No foi possvel atualizar a OS.","error");return}n(O=>O.map(U=>U._id===u?I.data:U)),x&&x._id===u&&y(I.data),k.fire("Sucesso","OS atualizada.","success")}catch(T){console.error(T),k.fire("Erro","Falha ao atualizar OS.","error")}finally{d(null)}},M=u=>u==="pendente"?"Pendente":u==="em_execucao"?"Em execuo":u==="concluida"?"Concluda":"Cancelada";return l?r.jsx("div",{className:"text-slate-200",children:"Carregando..."}):t?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Equipe"}),r.jsx("h1",{className:"text-2xl font-semibold text-white",children:t.name}),r.jsx("div",{className:"text-sm text-slate-300",children:"rea de operao mobile-friendly: veja servios disponveis, em execuo e concludos."})]}),r.jsx(Ca,{to:"/teams",className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Voltar"})]}),r.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:[{key:"disponiveis",label:"Disponveis",desc:"Prontos para iniciar",icon:""},{key:"execucao",label:"Em execuo",desc:"Andamento em campo",icon:""},{key:"concluidas",label:"Concludos",desc:"Finalizados",icon:""}].map(u=>{const N=u.key==="disponiveis"?$.filter(T=>T.status==="pendente").length:u.key==="execucao"?$.filter(T=>T.status==="em_execucao").length:$.filter(T=>T.status==="concluida").length;return r.jsxs("button",{onClick:()=>L(u.key),className:`flex w-full items-center gap-3 rounded-2xl border px-4 py-3 text-left transition ${m===u.key?"border-emerald-400/50 bg-emerald-500/10":"border-white/10 bg-white/5 hover:border-emerald-300/30 hover:bg-white/10"}`,children:[r.jsx("div",{className:"text-xl",children:u.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:u.label}),r.jsx("div",{className:"text-xs text-slate-300",children:u.desc})]}),r.jsx("div",{className:"rounded-full bg-white/10 px-3 py-1 text-xs font-semibold text-white",children:N})]},u.key)})}),Y.length===0?r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-slate-200 shadow-inner shadow-black/30",children:"Nenhum servio nesta aba."}):r.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:Y.map(u=>{var N,T;return r.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm uppercase tracking-wide text-emerald-200",children:M(u.status)}),r.jsx("div",{className:"text-lg font-semibold text-white",children:u.title}),r.jsxs("div",{className:"text-xs text-slate-300",children:[u.plannedDate||"sem data","  ",u.site||"Endereo no informado"]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Cliente: ",u.clientName||""]})]}),r.jsx("div",{className:"rounded-full bg-white/10 px-3 py-1 text-[11px] font-semibold text-white",children:"OS"})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200",children:[r.jsxs("div",{className:"font-semibold text-white",children:["Servios (",((N=u.services)==null?void 0:N.length)||0,")"]}),r.jsxs("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-300",children:[(u.services||[]).slice(0,3).map((J,z)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"mt-[6px] h-1.5 w-1.5 rounded-full bg-emerald-300/70"}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("div",{className:"text-white",children:J.serviceType||J.service||"Servio"}),r.jsxs("div",{className:"text-[11px] text-slate-400",children:["Local: ",J.siteType||J.localType||"","  Solo: ",J.soilType||"","  Acesso: ",J.access||""]})]})]},z)),((T=u.services)==null?void 0:T.length)>3&&r.jsxs("li",{className:"text-[11px] text-slate-400",children:["+",u.services.length-3," mais"]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-slate-200",children:[r.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Incio: ",u.startedAt?new Date(u.startedAt).toLocaleString("pt-BR"):""]}),r.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Trmino: ",u.finishedAt?new Date(u.finishedAt).toLocaleString("pt-BR"):""]})]}),r.jsxs("div",{className:"mt-auto flex flex-wrap gap-2",children:[u.status==="pendente"&&r.jsx("button",{type:"button",disabled:c===u._id,onClick:()=>G(u._id,"em_execucao"),className:"flex-1 rounded-md border border-blue-400/40 bg-blue-500/10 px-3 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20 disabled:opacity-60",children:"Iniciar"}),u.status!=="concluida"&&r.jsx("button",{type:"button",disabled:c===u._id,onClick:()=>G(u._id,"concluida"),className:"flex-1 rounded-md border border-emerald-400/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:"Concluir"}),r.jsx("button",{type:"button",onClick:()=>y(u),className:"w-full rounded-md border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:bg-white/10",children:"Ver detalhes"})]})]},u._id)})}),x&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",children:r.jsxs("div",{className:"w-full max-w-4xl rounded-2xl border border-white/10 bg-slate-900 p-6 shadow-2xl",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:M(x.status)}),r.jsx("div",{className:"text-xl font-semibold text-white",children:x.title}),r.jsxs("div",{className:"text-sm text-slate-300",children:[x.clientName||"Cliente no informado"," "," ",x.site||"Endereo no informado"]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Data agendada: ",x.plannedDate||""]})]}),r.jsx("button",{onClick:()=>y(null),className:"rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-slate-200 hover:border-emerald-300/40 hover:text-white",children:"Fechar"})]}),r.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Horrios"}),r.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[r.jsxs("div",{children:["Incio:"," ",x.startedAt?new Date(x.startedAt).toLocaleString("pt-BR"):""]}),r.jsxs("div",{children:["Trmino:"," ",x.finishedAt?new Date(x.finishedAt).toLocaleString("pt-BR"):""]})]})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Equipe"}),r.jsx("div",{className:"mt-2 text-sm",children:x.team||t.name}),r.jsxs("div",{className:"text-xs text-slate-400",children:["OS #",x._id]})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Observaes"}),r.jsx("div",{className:"mt-2 text-sm",children:x.notes||"Sem observaes."})]})]}),r.jsxs("div",{className:"mt-4 rounded-xl border border-white/10 bg-white/5 p-3",children:[r.jsxs("div",{className:"text-sm font-semibold text-white",children:["Servios (",((f=x.services)==null?void 0:f.length)||0,")"]}),r.jsx("div",{className:"mt-2 grid gap-2 md:grid-cols-2",children:(x.services||[]).map((u,N)=>r.jsxs("div",{className:"rounded-lg border border-white/10 bg-slate-800/60 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"font-semibold text-white",children:u.serviceType||u.service||"Servio"}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Local: ",u.siteType||u.localType||"","  Solo: ",u.soilType||"","  Acesso:"," ",u.access||""]}),u.categories&&u.categories.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1 text-[11px] text-emerald-200",children:u.categories.map(T=>r.jsx("span",{className:"rounded-full bg-emerald-500/10 px-2 py-1",children:T},T))}),(u.stakeDiameter||u.diametro)&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Estacas: ",(u.stakeDiameter||u.diametro||"").toString(),"cm "," ",(u.stakeDepth||u.profundidade||"").toString(),"m "," ",(u.stakeQuantity||u.quantidade||"").toString()," un"]}),(u.sptInfo||u.sptFileName)&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["SPT/Diagnstico: ",u.sptInfo||u.sptFileName]}),u.observacoes&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Obs.: ",u.observacoes]})]},N))})]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[x.status==="pendente"&&r.jsx("button",{type:"button",disabled:c===x._id,onClick:()=>G(x._id,"em_execucao"),className:"rounded-md border border-blue-400/40 bg-blue-500/10 px-4 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20 disabled:opacity-60",children:"Iniciar servio"}),x.status!=="concluida"&&r.jsx("button",{type:"button",disabled:c===x._id,onClick:()=>G(x._id,"concluida"),className:"rounded-md border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:"Concluir servio"}),r.jsx("button",{type:"button",onClick:()=>y(null),className:"rounded-md border border-white/15 bg-white/5 px-4 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:bg-white/10",children:"Fechar"})]})]})})]}):r.jsxs("div",{className:"space-y-4 text-slate-200",children:[r.jsx("div",{className:"text-xl font-semibold",children:"Equipe no encontrada"}),r.jsx(Ca,{to:"/teams",className:"text-emerald-300 underline",children:"Voltar para equipes"})]})}const en=e=>{if(!e||e.trim()==="")return"-";try{if(e.match(/^\d{4}-\d{2}-\d{2}$/)){const[s,a,n]=e.split("-");return`${n}/${a}/${s}`}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return e}};function gw(){const[e,t]=p.useState("list"),[s,a]=p.useState([]),[n,l]=p.useState(""),[o,c]=p.useState("all"),[d,m]=p.useState("all"),[L,x]=p.useState("all"),[y,$]=p.useState([]),[Y,G]=p.useState(!1),[M,f]=p.useState(!0),[u,N]=p.useState(null),[T,J]=p.useState(null),[z,I]=p.useState({name:"",plate:"",model:"",year:"",chassi:"",renavam:"",category:"",ownerCompany:"",internalCode:"",fuelType:"",fuelAverage:"",fuelUnit:"L/h",tankCapacityL:"",consumptionKmPerL:"",useType:"medio",autonomyEstimated:"",hourmeterStart:"",odometerKm:"",weightKg:"",loadCapacityKg:"",status:"ativa",statusOperational:"operando",lastMaintenance:"",nextMaintenance:"",maintenanceType:"preventiva",maintenanceVendor:"",maintenanceCostAvg:"",requiredLicense:"",mandatoryTraining:!1,checklistRequired:!1,lastInspection:"",laudoValidity:"",operatorId:"",operatorName:"",notes:""});p.useEffect(()=>{(async()=>{try{f(!0);const[q,B]=await Promise.all([le("/machines",{cache:"no-store"}),le("/employees",{cache:"no-store"})]),b=await q.json().catch(()=>null),w=await B.json().catch(()=>null);q.ok?a(Array.isArray(b==null?void 0:b.data)?b.data:[]):console.error("Erro ao carregar mquinas",b),B.ok&&Array.isArray(w==null?void 0:w.data)&&$(w.data)}catch(q){console.error(q)}finally{f(!1)}})()},[]);const O=p.useMemo(()=>{const v=n.trim().toLowerCase();return s.filter(q=>{var R,C,H;const B=o==="all"?!0:q.status===o,b=d==="all"?!0:q.statusOperational===d,w=L==="all"?!0:q.useType===L,F=v.length===0||((R=q.name)==null?void 0:R.toLowerCase().includes(v))||((C=q.plate)==null?void 0:C.toLowerCase().includes(v))||((H=q.fuelType)==null?void 0:H.toLowerCase().includes(v));return B&&b&&w&&F})},[s,n,o,d,L]),U=()=>I({name:"",plate:"",model:"",year:"",chassi:"",renavam:"",category:"",ownerCompany:"",internalCode:"",fuelType:"",fuelAverage:"",fuelUnit:"L/h",tankCapacityL:"",consumptionKmPerL:"",useType:"medio",autonomyEstimated:"",hourmeterStart:"",odometerKm:"",weightKg:"",loadCapacityKg:"",status:"ativa",statusOperational:"operando",lastMaintenance:"",nextMaintenance:"",maintenanceType:"preventiva",maintenanceVendor:"",maintenanceCostAvg:"",requiredLicense:"",mandatoryTraining:!1,checklistRequired:!1,lastInspection:"",laudoValidity:"",operatorId:"",operatorName:"",notes:""}),E=async()=>{var q,B;if(Y)return;if(!z.name.trim()){k.fire("Ateno","Informe o nome da mquina.","warning");return}const v={...z,year:z.year?Number(z.year):void 0,fuelAverage:z.fuelAverage?Number(z.fuelAverage):void 0,tankCapacityL:z.tankCapacityL?Number(z.tankCapacityL):void 0,consumptionKmPerL:z.consumptionKmPerL?Number(z.consumptionKmPerL):void 0,autonomyEstimated:z.autonomyEstimated?Number(z.autonomyEstimated):void 0,hourmeterStart:z.hourmeterStart?Number(z.hourmeterStart):void 0,odometerKm:z.odometerKm?Number(z.odometerKm):void 0,weightKg:z.weightKg?Number(z.weightKg):void 0,loadCapacityKg:z.loadCapacityKg?Number(z.loadCapacityKg):void 0,maintenanceCostAvg:z.maintenanceCostAvg?Number(z.maintenanceCostAvg):void 0,operatorName:z.operatorId&&((q=y.find(b=>b._id===z.operatorId))!=null&&q.name)?(B=y.find(b=>b._id===z.operatorId))==null?void 0:B.name:z.operatorName||""};try{if(G(!0),u){const b=await le(`/machines/${u}`,{method:"PUT",body:JSON.stringify(v)}),w=await b.json().catch(()=>null);if(!b.ok){k.fire("Erro",(w==null?void 0:w.error)||"No foi possvel atualizar.","error");return}a(F=>F.map(R=>R._id===u?w.data:R)),k.fire("Sucesso","Mquina atualizada.","success")}else{const b=await le("/machines",{method:"POST",body:JSON.stringify(v)}),w=await b.json().catch(()=>null);if(!b.ok){k.fire("Erro",(w==null?void 0:w.error)||"No foi possvel criar.","error");return}a(F=>[w.data,...F]),k.fire("Sucesso","Mquina criada.","success")}U(),N(null),t("list")}catch(b){console.error(b),k.fire("Erro","Falha ao salvar mquina.","error")}finally{G(!1)}},Q=v=>{var q,B,b,w,F,R,C,H,te,i;N(v._id),t("form"),I({name:v.name||"",plate:v.plate||"",model:v.model||"",year:((q=v.year)==null?void 0:q.toString())||"",chassi:v.chassi||"",renavam:v.renavam||"",category:v.category||"",ownerCompany:v.ownerCompany||"",internalCode:v.internalCode||"",fuelType:v.fuelType||"",fuelAverage:((B=v.fuelAverage)==null?void 0:B.toString())||"",fuelUnit:v.fuelUnit||"L/h",tankCapacityL:((b=v.tankCapacityL)==null?void 0:b.toString())||"",consumptionKmPerL:((w=v.consumptionKmPerL)==null?void 0:w.toString())||"",useType:v.useType||"medio",autonomyEstimated:((F=v.autonomyEstimated)==null?void 0:F.toString())||"",hourmeterStart:((R=v.hourmeterStart)==null?void 0:R.toString())||"",odometerKm:((C=v.odometerKm)==null?void 0:C.toString())||"",weightKg:((H=v.weightKg)==null?void 0:H.toString())||"",loadCapacityKg:((te=v.loadCapacityKg)==null?void 0:te.toString())||"",status:v.status||"ativa",statusOperational:v.statusOperational||"operando",lastMaintenance:v.lastMaintenance||"",nextMaintenance:v.nextMaintenance||"",maintenanceType:v.maintenanceType||"preventiva",maintenanceVendor:v.maintenanceVendor||"",maintenanceCostAvg:((i=v.maintenanceCostAvg)==null?void 0:i.toString())||"",requiredLicense:v.requiredLicense||"",mandatoryTraining:!!v.mandatoryTraining,checklistRequired:!!v.checklistRequired,lastInspection:v.lastInspection||"",laudoValidity:v.laudoValidity||"",operatorId:v.operatorId||"",operatorName:v.operatorName||"",notes:v.notes||""})},W=v=>{J(v)},Z=async(v,q)=>{try{const B={};q==="ativa"?(B.status="ativa",B.statusOperational="operando"):q==="manutencao"&&(B.statusOperational="manutencao");const b=await fetch(`/api/machines/${v._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),w=await b.json().catch(()=>null);if(!b.ok){k.fire("Erro",(w==null?void 0:w.error)||"No foi possvel atualizar o status.","error");return}a(F=>F.map(R=>R._id===v._id?w.data:R)),J(w.data),k.fire("Sucesso","Status atualizado com sucesso.","success")}catch(B){console.error(B),k.fire("Erro","Falha ao atualizar status.","error")}},K=async v=>{const q=await k.fire({title:"Excluir mquina?",html:'<p>Essa ao no pode ser desfeita.</p><input id="swal-reason" class="swal2-input" placeholder="Motivo (obrigatrio)">',icon:"warning",showCancelButton:!0,confirmButtonText:"Excluir",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",preConfirm:()=>{const B=document.getElementById("swal-reason"),b=B==null?void 0:B.value.trim();if(!b){k.showValidationMessage("Informe um motivo para excluir.");return}return b}});if(!(!q.isConfirmed||!q.value))try{const B=await fetch(`/api/machines/${v._id}`,{method:"DELETE"}),b=await B.json().catch(()=>null);if(!B.ok){k.fire("Erro",(b==null?void 0:b.error)||"No foi possvel excluir","error");return}a(w=>w.filter(F=>F._id!==v._id)),k.fire("Sucesso","Mquina excluda.","success"),u===v._id&&(U(),N(null),t("list"))}catch(B){console.error(B),k.fire("Erro","Falha ao excluir mquina.","error")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Mquinas"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Cadastre mquinas, combustvel, peso e capacidade. Dados salvos no banco."})]}),e==="list"?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{value:n,onChange:v=>l(v.target.value),placeholder:"Buscar por nome, placa ou combustvel",className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"}),r.jsxs("select",{value:o,onChange:v=>c(v.target.value),className:"rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"ativa",children:"Ativas"}),r.jsx("option",{value:"inativa",children:"Inativas"})]}),r.jsxs("select",{value:d,onChange:v=>m(v.target.value),className:"rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"all",children:"Op. todos"}),r.jsx("option",{value:"operando",children:"Operando"}),r.jsx("option",{value:"manutencao",children:"Em manuteno"}),r.jsx("option",{value:"parada",children:"Parada"}),r.jsx("option",{value:"inativa",children:"Inativa"})]}),r.jsxs("select",{value:L,onChange:v=>x(v.target.value),className:"rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"all",children:"Uso todos"}),r.jsx("option",{value:"leve",children:"Leve"}),r.jsx("option",{value:"medio",children:"Mdio"}),r.jsx("option",{value:"pesado",children:"Pesado"})]}),r.jsx("button",{onClick:()=>{U(),N(null),t("form")},className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-blue-600 hover:to-emerald-500",children:"+ Nova mquina"})]}):r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>{U(),N(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})})]}),e==="form"&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:u?"Editar mquina":"Nova mquina"}),r.jsx("p",{className:"text-xs text-slate-300",children:"Nome, placa, combustvel, consumo, peso e capacidade."})]}),u&&r.jsx("button",{onClick:()=>{U(),N(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar edio"})]}),r.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Nome da mquina"}),r.jsx("input",{value:z.name,onChange:v=>I(q=>({...q,name:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Perfuratriz SD-400"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Placa"}),r.jsx("input",{value:z.plate,onChange:v=>I(q=>({...q,plate:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"ABC-1234"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Modelo"}),r.jsx("input",{value:z.model,onChange:v=>I(q=>({...q,model:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Modelo"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Ano de fabricao"}),r.jsx("input",{type:"number",value:z.year,onChange:v=>I(q=>({...q,year:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"2024"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Chassi"}),r.jsx("input",{value:z.chassi,onChange:v=>I(q=>({...q,chassi:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Chassi"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Renavam"}),r.jsx("input",{value:z.renavam,onChange:v=>I(q=>({...q,renavam:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Renavam"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Categoria"}),r.jsx("input",{value:z.category,onChange:v=>I(q=>({...q,category:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Caminho, Perfuratriz, Escavadeira, Apoio..."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Empresa proprietria"}),r.jsx("input",{value:z.ownerCompany,onChange:v=>I(q=>({...q,ownerCompany:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Reis Fundaes"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Cdigo interno"}),r.jsx("input",{value:z.internalCode,onChange:v=>I(q=>({...q,internalCode:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"RF-CP-001"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de combustvel"}),r.jsxs("select",{value:z.fuelType,onChange:v=>I(q=>({...q,fuelType:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),r.jsx("option",{value:"Diesel",children:"Diesel"}),r.jsx("option",{value:"Gasolina",children:"Gasolina"}),r.jsx("option",{value:"Etanol",children:"Etanol"}),r.jsx("option",{value:"Eltrico",children:"Eltrico"}),r.jsx("option",{value:"GNV",children:"GNV"}),r.jsx("option",{value:"Outro",children:"Outro"})]})]}),r.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Capacidade do tanque (L)"}),r.jsx("input",{type:"number",value:z.tankCapacityL,onChange:v=>I(q=>({...q,tankCapacityL:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 200"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Consumo (L/h)"}),r.jsx("input",{type:"number",value:z.fuelAverage,onChange:v=>I(q=>({...q,fuelAverage:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 12"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Consumo (km/L)"}),r.jsx("input",{type:"number",value:z.consumptionKmPerL,onChange:v=>I(q=>({...q,consumptionKmPerL:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 4"})]})]}),r.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Unidade de consumo"}),r.jsx("input",{value:z.fuelUnit,onChange:v=>I(q=>({...q,fuelUnit:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"L/h, L/100km..."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de uso"}),r.jsxs("select",{value:z.useType,onChange:v=>I(q=>({...q,useType:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"leve",children:"Leve"}),r.jsx("option",{value:"medio",children:"Mdio"}),r.jsx("option",{value:"pesado",children:"Pesado"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Autonomia estimada (km)"}),r.jsx("input",{type:"number",value:z.autonomyEstimated,onChange:v=>I(q=>({...q,autonomyEstimated:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 400"})]})]}),r.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Hormetro inicial"}),r.jsx("input",{type:"number",value:z.hourmeterStart,onChange:v=>I(q=>({...q,hourmeterStart:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Horas"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Odmetro (km)"}),r.jsx("input",{type:"number",value:z.odometerKm,onChange:v=>I(q=>({...q,odometerKm:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Quilometragem atual"})]})]}),r.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Peso (kg)"}),r.jsx("input",{type:"number",value:z.weightKg,onChange:v=>I(q=>({...q,weightKg:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 5000"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Capacidade de carga (kg)"}),r.jsx("input",{type:"number",value:z.loadCapacityKg,onChange:v=>I(q=>({...q,loadCapacityKg:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 2000"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Status"}),r.jsxs("select",{value:z.status,onChange:v=>I(q=>({...q,status:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"ativa",children:"Ativa"}),r.jsx("option",{value:"inativa",children:"Inativa"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Status operacional"}),r.jsxs("select",{value:z.statusOperational,onChange:v=>I(q=>({...q,statusOperational:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"operando",children:"Operando"}),r.jsx("option",{value:"manutencao",children:"Em manuteno"}),r.jsx("option",{value:"parada",children:"Parada"}),r.jsx("option",{value:"inativa",children:"Inativa"})]})]})]}),r.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Manuteno"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"ltima Manuteno"}),r.jsx("input",{type:"date",value:z.lastMaintenance,onChange:v=>I(q=>({...q,lastMaintenance:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Prxima Manuteno"}),r.jsx("input",{type:"date",value:z.nextMaintenance,onChange:v=>I(q=>({...q,nextMaintenance:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de Manuteno"}),r.jsxs("select",{value:z.maintenanceType,onChange:v=>I(q=>({...q,maintenanceType:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"preventiva",children:"Preventiva"}),r.jsx("option",{value:"corretiva",children:"Corretiva"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Fornecedor de Manuteno"}),r.jsx("input",{value:z.maintenanceVendor,onChange:v=>I(q=>({...q,maintenanceVendor:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Nome do fornecedor"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Custo Mdio de Manuteno (R$)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:z.maintenanceCostAvg,onChange:v=>I(q=>({...q,maintenanceCostAvg:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0.00"})]})]})]}),r.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Licenas e Treinamentos"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Licena Necessria"}),r.jsx("input",{value:z.requiredLicense,onChange:v=>I(q=>({...q,requiredLicense:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: Categoria D ou E"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Treinamento Obrigatrio"}),r.jsxs("select",{value:z.mandatoryTraining?"sim":"nao",onChange:v=>I(q=>({...q,mandatoryTraining:v.target.value==="sim"})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"nao",children:"No"}),r.jsx("option",{value:"sim",children:"Sim"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Checklist Obrigatrio"}),r.jsxs("select",{value:z.checklistRequired?"sim":"nao",onChange:v=>I(q=>({...q,checklistRequired:v.target.value==="sim"})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"nao",children:"No"}),r.jsx("option",{value:"sim",children:"Sim"})]})]})]})]}),r.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Inspees"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"ltima Inspeo"}),r.jsx("input",{type:"date",value:z.lastInspection,onChange:v=>I(q=>({...q,lastInspection:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Validade do Laudo"}),r.jsx("input",{type:"date",value:z.laudoValidity,onChange:v=>I(q=>({...q,laudoValidity:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]})]})]}),r.jsxs("div",{className:"mt-6 space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Observaes"}),r.jsx("textarea",{value:z.notes,onChange:v=>I(q=>({...q,notes:v.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",rows:3,placeholder:"Combustvel preferencial, manuteno, etc."})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx("button",{onClick:E,disabled:Y,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:Y?"Salvando...":u?"Salvar alteraes":"Criar mquina"})})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-0 text-sm text-slate-200 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-white",children:"Mquinas cadastradas"}),r.jsx("span",{className:"text-xs text-slate-300",children:M?"Carregando...":`${O.length} registro(s)`})]}),M?r.jsxs("div",{className:"px-6 py-8 text-center text-slate-300",children:[r.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-emerald-400"}),r.jsx("p",{className:"text-sm",children:"Carregando mquinas..."})]}):O.length===0?r.jsx("div",{className:"px-6 py-4 text-slate-300",children:"Nenhuma mquina cadastrada. Clique em + Nova mquina para adicionar."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-white/5 text-xs uppercase text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Mquina"}),r.jsx("th",{className:"px-4 py-3",children:"Placa"}),r.jsx("th",{className:"px-4 py-3",children:"Combustvel"}),r.jsx("th",{className:"px-4 py-3",children:"Consumo"}),r.jsx("th",{className:"px-4 py-3",children:"Peso (kg)"}),r.jsx("th",{className:"px-4 py-3",children:"Carga (kg)"}),r.jsx("th",{className:"px-4 py-3",children:"Status"}),r.jsx("th",{className:"px-4 py-3",children:"Operacional"}),r.jsx("th",{className:"px-4 py-3 text-right",children:"Aes"})]})}),r.jsx("tbody",{children:O.map(v=>r.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 cursor-pointer",onClick:()=>W(v),children:[r.jsx("td",{className:"px-4 py-3 text-white",children:v.name}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:v.plate||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:v.fuelType||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:v.fuelAverage?`${v.fuelAverage} ${v.fuelUnit||"L/h"}`:"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:v.weightKg?`${v.weightKg} kg`:"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:v.loadCapacityKg?`${v.loadCapacityKg} kg`:"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${v.status==="ativa"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:v.status==="ativa"?"Ativa":"Inativa"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${v.statusOperational==="operando"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":v.statusOperational==="manutencao"?"border border-blue-400/40 bg-blue-500/10 text-blue-100":v.statusOperational==="parada"?"border border-yellow-400/40 bg-yellow-500/10 text-yellow-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:v.statusOperational==="operando"?"Operando":v.statusOperational==="manutencao"?"Em manuteno":v.statusOperational==="parada"?"Parada":"Inativa"})}),r.jsx("td",{className:"px-4 py-3 text-right text-slate-200",children:r.jsxs("div",{className:"flex justify-end gap-2",onClick:q=>q.stopPropagation(),children:[r.jsx("button",{type:"button",onClick:()=>Q(v),className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Editar"}),r.jsx("button",{type:"button",onClick:()=>K(v),className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-red-100 transition hover:border-red-400/40 hover:bg-red-500/10",children:"Excluir"})]})})]},v._id))})]})})]}),T&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>J(null),children:r.jsxs("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl border border-white/10 bg-slate-900 p-6 shadow-2xl",onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-white",children:T.name}),r.jsx("p",{className:"text-sm text-slate-300 mt-1",children:"Detalhes da mquina"})]}),r.jsx("button",{onClick:()=>J(null),className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Fechar"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Informaes Bsicas"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Placa"}),r.jsx("div",{className:"text-white font-semibold",children:T.plate||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Modelo"}),r.jsx("div",{className:"text-white font-semibold",children:T.model||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Ano"}),r.jsx("div",{className:"text-white font-semibold",children:T.year||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Categoria"}),r.jsx("div",{className:"text-white font-semibold",children:T.category||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Chassi"}),r.jsx("div",{className:"text-white font-semibold",children:T.chassi||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Renavam"}),r.jsx("div",{className:"text-white font-semibold",children:T.renavam||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Empresa Proprietria"}),r.jsx("div",{className:"text-white font-semibold",children:T.ownerCompany||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Cdigo Interno"}),r.jsx("div",{className:"text-white font-semibold",children:T.internalCode||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Tipo de Uso"}),r.jsx("div",{className:"text-white font-semibold",children:T.useType==="leve"?"Leve":T.useType==="medio"?"Mdio":T.useType==="pesado"?"Pesado":"-"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Combustvel e Consumo"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Tipo de Combustvel"}),r.jsx("div",{className:"text-white font-semibold",children:T.fuelType||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Consumo"}),r.jsx("div",{className:"text-white font-semibold",children:T.fuelAverage?`${T.fuelAverage} ${T.fuelUnit||"L/h"}`:"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Capacidade do Tanque"}),r.jsx("div",{className:"text-white font-semibold",children:T.tankCapacityL?`${T.tankCapacityL} L`:"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Consumo (km/L)"}),r.jsx("div",{className:"text-white font-semibold",children:T.consumptionKmPerL?`${T.consumptionKmPerL} km/L`:"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Autonomia Estimada"}),r.jsx("div",{className:"text-white font-semibold",children:T.autonomyEstimated?`${T.autonomyEstimated} km`:"-"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Peso e Capacidade"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Peso"}),r.jsx("div",{className:"text-white font-semibold",children:T.weightKg?`${T.weightKg} kg`:"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Capacidade de Carga"}),r.jsx("div",{className:"text-white font-semibold",children:T.loadCapacityKg?`${T.loadCapacityKg} kg`:"-"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Medidores"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Hormetro Inicial"}),r.jsx("div",{className:"text-white font-semibold",children:T.hourmeterStart!==void 0&&T.hourmeterStart!==null?`${T.hourmeterStart} horas`:"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Odmetro (km)"}),r.jsx("div",{className:"text-white font-semibold",children:T.odometerKm!==void 0&&T.odometerKm!==null?`${T.odometerKm} km`:"-"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Status"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Status"}),r.jsx("div",{children:r.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-semibold ${T.status==="ativa"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:T.status==="ativa"?"Ativa":"Inativa"})})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Status Operacional"}),r.jsx("div",{children:r.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-semibold ${T.statusOperational==="operando"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":T.statusOperational==="manutencao"?"border border-blue-400/40 bg-blue-500/10 text-blue-100":T.statusOperational==="parada"?"border border-yellow-400/40 bg-yellow-500/10 text-yellow-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:T.statusOperational==="operando"?"Operando":T.statusOperational==="manutencao"?"Em manuteno":T.statusOperational==="parada"?"Parada":"Inativa"})})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Manuteno"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"ltima Manuteno"}),r.jsx("div",{className:"text-white font-semibold",children:en(T.lastMaintenance)})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Prxima Manuteno"}),r.jsx("div",{className:"text-white font-semibold",children:en(T.nextMaintenance)})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Tipo de Manuteno"}),r.jsx("div",{className:"text-white font-semibold",children:T.maintenanceType==="preventiva"?"Preventiva":T.maintenanceType==="corretiva"?"Corretiva":"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Fornecedor de Manuteno"}),r.jsx("div",{className:"text-white font-semibold",children:T.maintenanceVendor||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Custo Mdio de Manuteno"}),r.jsx("div",{className:"text-white font-semibold",children:T.maintenanceCostAvg!==void 0&&T.maintenanceCostAvg!==null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(T.maintenanceCostAvg):"-"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Licenas e Treinamentos"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Licena Necessria"}),r.jsx("div",{className:"text-white font-semibold",children:T.requiredLicense||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Treinamento Obrigatrio"}),r.jsx("div",{className:"text-white font-semibold",children:T.mandatoryTraining?"Sim":"No"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Checklist Obrigatrio"}),r.jsx("div",{className:"text-white font-semibold",children:T.checklistRequired?"Sim":"No"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Inspees"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"ltima Inspeo"}),r.jsx("div",{className:"text-white font-semibold",children:en(T.lastInspection)})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Validade do Laudo"}),r.jsx("div",{className:"text-white font-semibold",children:en(T.laudoValidity)})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4 pb-2 border-b border-white/10",children:"Operador e Observaes"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[T.operatorName&&r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Operador"}),r.jsx("div",{className:"text-white font-semibold",children:T.operatorName})]}),T.notes&&r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-4 py-3 md:col-span-2",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400 mb-1",children:"Observaes"}),r.jsx("div",{className:"text-white text-sm whitespace-pre-wrap",children:T.notes})]})]})]}),r.jsxs("div",{className:"border-t border-white/10 pt-6",children:[r.jsx("div",{className:"text-sm font-semibold text-white mb-4",children:"Alterar Status"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>Z(T,"ativa"),className:"rounded-lg border border-emerald-400/50 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-100 transition hover:border-emerald-400 hover:bg-emerald-500/20",children:"Marcar como Ativa"}),r.jsx("button",{onClick:()=>Z(T,"manutencao"),className:"rounded-lg border border-blue-400/50 bg-blue-500/10 px-4 py-2 text-sm font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-500/20",children:"Marcar como Manuteno"}),r.jsx("button",{onClick:()=>{Q(T),J(null)},className:"rounded-lg border border-white/10 bg-white/5 px-4 py-2 text-sm font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Editar Mquina"})]})]})]})})]})}function bw(){const[e,t]=p.useState("list"),[s,a]=p.useState([]),[n,l]=p.useState(""),[o,c]=p.useState("all"),[d,m]=p.useState("all"),[L,x]=p.useState(!1),[y,$]=p.useState(null),[Y,G]=p.useState(!0),[M,f]=p.useState({name:"",type:"equipamento",category:"",patrimony:"",serialNumber:"",status:"ativo",quantity:"1",unit:"un",assignedTo:"",location:"",nextMaintenance:"",notes:""});p.useEffect(()=>{(async()=>{try{G(!0);const O=await le("/equipment",{cache:"no-store"}),U=await O.json().catch(()=>null);if(!O.ok){console.error("Erro ao carregar equipamentos",U);return}a(Array.isArray(U==null?void 0:U.data)?U.data:[])}catch(O){console.error(O)}finally{G(!1)}})()},[]);const u=p.useMemo(()=>{const I=n.trim().toLowerCase();return s.filter(O=>{var W,Z,K,v;const U=o==="all"?!0:O.status===o,E=d==="all"?!0:O.type===d,Q=I.length===0||((W=O.name)==null?void 0:W.toLowerCase().includes(I))||((Z=O.patrimony)==null?void 0:Z.toLowerCase().includes(I))||((K=O.serialNumber)==null?void 0:K.toLowerCase().includes(I))||((v=O.category)==null?void 0:v.toLowerCase().includes(I));return U&&E&&Q})},[s,n,o,d]),N=()=>f({name:"",type:"equipamento",category:"",patrimony:"",serialNumber:"",status:"ativo",quantity:"1",unit:"un",assignedTo:"",location:"",nextMaintenance:"",notes:""}),T=async()=>{if(L)return;if(!M.name.trim()){k.fire("Ateno","Informe o nome do equipamento/EPI.","warning");return}const I={name:M.name,type:M.type,category:M.category,patrimony:M.patrimony,serialNumber:M.serialNumber,status:M.status,quantity:M.quantity?Number(M.quantity):void 0,unit:M.unit,assignedTo:M.assignedTo,location:M.location,nextMaintenance:M.nextMaintenance,notes:M.notes};try{if(x(!0),y){const O=await le(`/equipment/${y}`,{method:"PUT",body:JSON.stringify(I)}),U=await O.json().catch(()=>null);if(!O.ok){k.fire("Erro",(U==null?void 0:U.error)||"No foi possvel atualizar.","error");return}a(E=>E.map(Q=>Q._id===y?U.data:Q)),k.fire("Sucesso","Registro atualizado.","success")}else{const O=await le("/equipment",{method:"POST",body:JSON.stringify(I)}),U=await O.json().catch(()=>null);if(!O.ok){k.fire("Erro",(U==null?void 0:U.error)||"No foi possvel criar.","error");return}a(E=>[U.data,...E]),k.fire("Sucesso","Registro criado.","success")}N(),$(null),t("list")}catch(O){console.error(O),k.fire("Erro","Falha ao salvar.","error")}finally{x(!1)}},J=I=>{var O;$(I._id),t("form"),f({name:I.name||"",type:I.type||"equipamento",category:I.category||"",patrimony:I.patrimony||"",serialNumber:I.serialNumber||"",status:I.status||"ativo",quantity:((O=I.quantity)==null?void 0:O.toString())||"1",unit:I.unit||"un",assignedTo:I.assignedTo||"",location:I.location||"",nextMaintenance:I.nextMaintenance||"",notes:I.notes||""})},z=async I=>{const O=await k.fire({title:"Excluir item?",html:'<p>Essa ao no pode ser desfeita.</p><input id="swal-reason" class="swal2-input" placeholder="Motivo (obrigatrio)">',icon:"warning",showCancelButton:!0,confirmButtonText:"Excluir",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",preConfirm:()=>{const U=document.getElementById("swal-reason"),E=U==null?void 0:U.value.trim();if(!E){k.showValidationMessage("Informe um motivo para excluir.");return}return E}});if(!(!O.isConfirmed||!O.value))try{const U=await le(`/equipment/${I._id}`,{method:"DELETE"}),E=await U.json().catch(()=>null);if(!U.ok){k.fire("Erro",(E==null?void 0:E.error)||"No foi possvel excluir","error");return}a(Q=>Q.filter(W=>W._id!==I._id)),k.fire("Sucesso","Registro excludo.","success"),y===I._id&&(N(),$(null),t("list"))}catch(U){console.error(U),k.fire("Erro","Falha ao excluir.","error")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Equipamentos e EPIs"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Cadastre equipamentos, EPIs e ferramentas. Controle status, quantidade e alocao."})]}),e==="list"?r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("input",{value:n,onChange:I=>l(I.target.value),placeholder:"Buscar por nome, patrimnio, srie...",className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"}),r.jsxs("select",{value:d,onChange:I=>m(I.target.value),className:"rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"equipamento",children:"Equipamentos"}),r.jsx("option",{value:"epi",children:"EPIs"}),r.jsx("option",{value:"ferramenta",children:"Ferramentas"})]}),r.jsxs("select",{value:o,onChange:I=>c(I.target.value),className:"rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"ativo",children:"Ativos"}),r.jsx("option",{value:"inativo",children:"Inativos"})]}),r.jsx("button",{onClick:()=>{N(),$(null),t("form")},className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-blue-600 hover:to-emerald-500",children:"+ Novo item"})]}):r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>{N(),$(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})})]}),e==="form"&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:y?"Editar item":"Novo item"}),r.jsx("p",{className:"text-xs text-slate-300",children:"Nome, tipo, status, quantidade e identificao (patrimnio/srie)."})]}),y&&r.jsx("button",{onClick:()=>{N(),$(null),t("list")},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar edio"})]}),r.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Nome"}),r.jsx("input",{value:M.name,onChange:I=>f(O=>({...O,name:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Capacete, Botina, Furadeira..."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo"}),r.jsxs("select",{value:M.type,onChange:I=>f(O=>({...O,type:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"equipamento",children:"Equipamento"}),r.jsx("option",{value:"epi",children:"EPI"}),r.jsx("option",{value:"ferramenta",children:"Ferramenta"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Categoria"}),r.jsx("input",{value:M.category,onChange:I=>f(O=>({...O,category:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"EPI / Ferramenta eltrica / Transporte..."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Patrimnio"}),r.jsx("input",{value:M.patrimony,onChange:I=>f(O=>({...O,patrimony:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Cdigo interno"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"N de srie"}),r.jsx("input",{value:M.serialNumber,onChange:I=>f(O=>({...O,serialNumber:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Nmero de srie"})]}),r.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Quantidade"}),r.jsx("input",{type:"number",value:M.quantity,onChange:I=>f(O=>({...O,quantity:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"1"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Unidade"}),r.jsx("input",{value:M.unit,onChange:I=>f(O=>({...O,unit:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"un, par, kit..."})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Status"}),r.jsxs("select",{value:M.status,onChange:I=>f(O=>({...O,status:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"ativo",children:"Ativo"}),r.jsx("option",{value:"inativo",children:"Inativo"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Alocado para"}),r.jsx("input",{value:M.assignedTo,onChange:I=>f(O=>({...O,assignedTo:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Equipe, funcionrio ou obra"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Localizao"}),r.jsx("input",{value:M.location,onChange:I=>f(O=>({...O,location:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Almoxarifado, caminho, obra..."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Prxima manuteno"}),r.jsx("input",{type:"date",value:M.nextMaintenance,onChange:I=>f(O=>({...O,nextMaintenance:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]}),r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Observaes"}),r.jsx("textarea",{value:M.notes,onChange:I=>f(O=>({...O,notes:I.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",rows:3,placeholder:"Detalhes sobre manuteno, uso, restries..."})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx("button",{onClick:T,disabled:L,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:L?"Salvando...":y?"Salvar alteraes":"Criar item"})})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-0 text-sm text-slate-200 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-white",children:"Itens cadastrados"}),r.jsx("span",{className:"text-xs text-slate-300",children:Y?"Carregando...":`${u.length} registro(s)`})]}),Y?r.jsxs("div",{className:"px-6 py-8 text-center text-slate-300",children:[r.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-emerald-400"}),r.jsx("p",{className:"text-sm",children:"Carregando equipamentos..."})]}):u.length===0?r.jsx("div",{className:"px-6 py-4 text-slate-300",children:"Nenhum item cadastrado. Clique em + Novo item para adicionar."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-white/5 text-xs uppercase text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Nome"}),r.jsx("th",{className:"px-4 py-3",children:"Tipo"}),r.jsx("th",{className:"px-4 py-3",children:"Patrimnio"}),r.jsx("th",{className:"px-4 py-3",children:"Srie"}),r.jsx("th",{className:"px-4 py-3",children:"Qtd"}),r.jsx("th",{className:"px-4 py-3",children:"Status"}),r.jsx("th",{className:"px-4 py-3",children:"Alocado"}),r.jsx("th",{className:"px-4 py-3",children:"Local"}),r.jsx("th",{className:"px-4 py-3",children:"Prx. manuteno"}),r.jsx("th",{className:"px-4 py-3 text-right",children:"Aes"})]})}),r.jsx("tbody",{children:u.map(I=>r.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-4 py-3 text-white",children:I.name}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:I.type==="epi"?"EPI":I.type==="ferramenta"?"Ferramenta":"Equipamento"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:I.patrimony||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:I.serialNumber||"-"}),r.jsxs("td",{className:"px-4 py-3 text-slate-200",children:[I.quantity||0," ",I.unit||"un"]}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${I.status==="ativo"?"border border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border border-orange-400/40 bg-orange-500/10 text-orange-100"}`,children:I.status==="ativo"?"Ativo":"Inativo"})}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:I.assignedTo||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:I.location||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:I.nextMaintenance||"-"}),r.jsx("td",{className:"px-4 py-3 text-right text-slate-200",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>J(I),className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-white transition hover:border-emerald-300/40 hover:bg-white/10",children:"Editar"}),r.jsx("button",{type:"button",onClick:()=>z(I),className:"rounded-md border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-red-100 transition hover:border-red-400/40 hover:bg-red-500/10",children:"Excluir"})]})})]},I._id))})]})})]})]})}const tn=[{value:"dinheiro",label:"Dinheiro"},{value:"pix",label:"PIX"},{value:"transferencia",label:"Transferncia"},{value:"cartao",label:"Carto"},{value:"cheque",label:"Cheque"},{value:"outro",label:"Outro"}],vw=["Pagamento de servio","Recebimento de cliente","Despesa operacional","Combustvel","Manuteno","Salrio","Material","Outro"];function ww(){var ne;const[e,t]=p.useState("list"),[s,a]=p.useState([]),[n,l]=p.useState([]),[o,c]=p.useState([]),[d,m]=p.useState([]),[L,x]=p.useState(null),[y,$]=p.useState(""),[Y,G]=p.useState(""),[M,f]=p.useState("all"),[u,N]=p.useState(!1),[T,J]=p.useState(!0),[z,I]=p.useState(null),[O,U]=p.useState(!1),[E,Q]=p.useState({type:"entrada",amount:"",description:"",date:new Date().toISOString().split("T")[0],clientId:"",jobId:"",employeeId:"",paymentMethod:"dinheiro",category:"",notes:""});p.useEffect(()=>{(async()=>{try{J(!0);const[_,ee,j,S,re]=await Promise.all([le("/clients",{cache:"no-store"}),le("/jobs",{cache:"no-store"}),le("/employees",{cache:"no-store"}),le("/cash",{cache:"no-store"}),le("/cashiers/current",{cache:"no-store"})]),ae=await _.json().catch(()=>null),oe=await ee.json().catch(()=>null),de=await j.json().catch(()=>null),ue=await S.json().catch(()=>null),pe=await re.json().catch(()=>null);l(Array.isArray(ae==null?void 0:ae.data)?ae.data:[]),c(Array.isArray(oe==null?void 0:oe.data)?oe.data:[]),m(Array.isArray(de==null?void 0:de.data)?de.data:[]),a(Array.isArray(ue==null?void 0:ue.data)?ue.data:[]),I((pe==null?void 0:pe.data)||null)}catch(_){console.error("Erro ao carregar dados",_)}finally{J(!1)}})()},[]);const W=p.useMemo(()=>{let h=s;if(Y&&(h=h.filter(_=>_.date===Y)),M!=="all"&&(h=h.filter(_=>_.type===M)),y.trim()){const _=y.trim().toLowerCase();h=h.filter(ee=>{var j,S,re,ae;return((j=ee.description)==null?void 0:j.toLowerCase().includes(_))||((S=ee.clientName)==null?void 0:S.toLowerCase().includes(_))||((re=ee.jobTitle)==null?void 0:re.toLowerCase().includes(_))||((ae=ee.category)==null?void 0:ae.toLowerCase().includes(_))})}return h},[s,Y,M,y]),Z=p.useMemo(()=>o.filter(h=>h.status==="concluida"),[o]),K=p.useMemo(()=>Z.reduce((h,_)=>h+(_.finalValue||_.value||0),0),[Z]),v=p.useMemo(()=>o.filter(h=>h.status==="pendente"||h.status==="em_execucao"),[o]),q=p.useMemo(()=>v.reduce((h,_)=>h+(_.finalValue||_.value||0),0),[v]),B=p.useMemo(()=>s.reduce((_,ee)=>{const j=ee.paymentMethod||"outro";return _[j]||(_[j]={entrada:0,saida:0}),ee.type==="entrada"?_[j].entrada+=ee.amount||0:_[j].saida+=ee.amount||0,_},{}),[s]),b=p.useMemo(()=>s.filter(h=>{var _;return h.type==="saida"&&(h.category==="Salrio"||((_=h.description)==null?void 0:_.toLowerCase().includes("salrio")))}),[s]),w=p.useMemo(()=>b.reduce((h,_)=>h+(_.amount||0),0),[b]),F=p.useMemo(()=>d.filter(h=>h.status==="ativo").reduce((h,_)=>h+(_.salary||0),0),[d]),R=new Date().toISOString().split("T")[0],C=p.useMemo(()=>s.filter(h=>h.date===R),[s,R]),H=p.useMemo(()=>{const h=C.filter(ae=>ae.type==="entrada").reduce((ae,oe)=>ae+(oe.amount||0),0),_=C.filter(ae=>ae.type==="saida").reduce((ae,oe)=>ae+(oe.amount||0),0),ee=h-_,j=W.filter(ae=>ae.type==="entrada").reduce((ae,oe)=>ae+(oe.amount||0),0),S=W.filter(ae=>ae.type==="saida").reduce((ae,oe)=>ae+(oe.amount||0),0),re=j-S;return{todayEntradas:h,todaySaidas:_,todaySaldo:ee,totalEntradas:j,totalSaidas:S,totalSaldo:re}},[C,W]),te=()=>{Q({type:"entrada",amount:"",description:"",date:new Date().toISOString().split("T")[0],clientId:"",jobId:"",employeeId:"",paymentMethod:"dinheiro",category:"",notes:""})},i=()=>{te(),t("form"),x(null)},P=async()=>{if(!u){if(!z||z.status!=="aberto"){k.fire("Caixa Fechado","Abra um caixa antes de registrar transaes.","warning");return}if(!E.description.trim()){k.fire("Ateno","Informe a descrio da transao.","warning");return}if(!E.amount||parseFloat(E.amount)<=0){k.fire("Ateno","Informe um valor vlido maior que zero.","warning");return}if(!E.date){k.fire("Ateno","Informe a data da transao.","warning");return}try{N(!0);const h=await le("/cash",{method:"POST",body:JSON.stringify({...E,amount:parseFloat(E.amount),clientId:E.clientId||null,jobId:E.jobId||null})}),_=await h.json().catch(()=>null);if(!h.ok){k.fire("Erro",(_==null?void 0:_.error)||"No foi possvel salvar a transao.","error");return}a(S=>[_.data,...S]);const j=await(await le("/cashiers/current",{cache:"no-store"})).json().catch(()=>null);j!=null&&j.data&&I(j.data),te(),t("list"),k.fire("Sucesso","Transao salva com sucesso.","success")}catch(h){console.error(h),k.fire("Erro","Falha ao salvar transao.","error")}finally{N(!1)}}},g=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h),A=h=>h?new Date(h+"T00:00:00").toLocaleDateString("pt-BR"):"-",D=h=>h?(typeof h=="string"?new Date(h):h).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",V=async()=>{const h=await k.fire({title:"Abrir Caixa",html:`
        <div class="text-left space-y-3">
          <p class="text-sm text-slate-300">Informe o saldo inicial do caixa.</p>
          <input id="swal-opening-balance" type="number" step="0.01" min="0" value="0" class="swal2-input" placeholder="Saldo inicial (R$)">
          <input id="swal-opened-by" type="text" class="swal2-input" placeholder="Aberto por (opcional)">
          <textarea id="swal-notes" class="swal2-textarea" placeholder="Observaes (opcional)"></textarea>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Abrir Caixa",cancelButtonText:"Cancelar",confirmButtonColor:"#10b981",preConfirm:()=>{const _=document.getElementById("swal-opening-balance"),ee=document.getElementById("swal-opened-by"),j=document.getElementById("swal-notes"),S=parseFloat((_==null?void 0:_.value)||"0");if(isNaN(S)||S<0){k.showValidationMessage("Informe um saldo inicial vlido ( 0)");return}return{openingBalance:S,openedBy:(ee==null?void 0:ee.value.trim())||void 0,notes:(j==null?void 0:j.value.trim())||void 0}}});if(!(!h.isConfirmed||!h.value))try{U(!0);const _=await le("/cashiers/open",{method:"POST",body:JSON.stringify(h.value)}),ee=await _.json().catch(()=>null);if(!_.ok){k.fire("Erro",(ee==null?void 0:ee.error)||"No foi possvel abrir o caixa.","error");return}I({...ee.data,currentBalance:h.value.openingBalance}),k.fire("Sucesso","Caixa aberto com sucesso.","success")}catch(_){console.error(_),k.fire("Erro","Falha ao abrir caixa.","error")}finally{U(!1)}},X=async()=>{if(!z)return;const h=await k.fire({title:"Fechar Caixa",html:`
        <div class="text-left space-y-3">
          <p class="text-sm text-slate-300">Confirme o saldo final do caixa.</p>
          <input id="swal-closing-balance" type="number" step="0.01" min="0" value="${z.currentBalance||0}" class="swal2-input" placeholder="Saldo final (R$)">
          <input id="swal-closed-by" type="text" class="swal2-input" placeholder="Fechado por (opcional)">
          <textarea id="swal-notes" class="swal2-textarea" placeholder="Observaes (opcional)"></textarea>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Fechar Caixa",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",preConfirm:()=>{const _=document.getElementById("swal-closing-balance"),ee=document.getElementById("swal-closed-by"),j=document.getElementById("swal-notes"),S=parseFloat((_==null?void 0:_.value)||"0");if(isNaN(S)||S<0){k.showValidationMessage("Informe um saldo final vlido ( 0)");return}return{closingBalance:S,closedBy:(ee==null?void 0:ee.value.trim())||void 0,notes:(j==null?void 0:j.value.trim())||void 0}}});if(!(!h.isConfirmed||!h.value))try{U(!0);const _=await le("/cashiers/close",{method:"POST",body:JSON.stringify(h.value)}),ee=await _.json().catch(()=>null);if(!_.ok){k.fire("Erro",(ee==null?void 0:ee.error)||"No foi possvel fechar o caixa.","error");return}I(ee.data),k.fire("Sucesso","Caixa fechado com sucesso.","success")}catch(_){console.error(_),k.fire("Erro","Falha ao fechar caixa.","error")}finally{U(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Financeiro"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Controle financeiro completo: servios realizados, pagamentos, salrios e movimentaes."})]}),e==="list"&&r.jsx("button",{onClick:i,disabled:!z||z.status!=="aberto",className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-50",children:"+ Nova transao"})]}),e==="list"&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-64",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`h-3 w-3 rounded-full ${(z==null?void 0:z.status)==="aberto"?"bg-emerald-400 animate-pulse":"bg-slate-500"}`}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-semibold text-white",children:["Caixa: ",(z==null?void 0:z.status)==="aberto"?"Aberto":"Fechado"]}),z&&r.jsxs("div",{className:"text-xs text-slate-300",children:[z.status==="aberto"?`Aberto em ${D(z.openedAt)}`:`Fechado em ${D(z.closedAt||"")}`,z.openedBy&&` por ${z.openedBy}`]})]})]}),(z==null?void 0:z.status)==="aberto"&&r.jsxs("div",{className:"mt-2 text-lg font-semibold text-emerald-300",children:["Saldo Atual: ",g(z.currentBalance||0)]}),(z==null?void 0:z.status)==="fechado"&&z.closingBalance!==void 0&&r.jsxs("div",{className:"mt-2 text-sm text-slate-300",children:["Saldo Final: ",g(z.closingBalance)]})]}),r.jsxs("div",{className:"flex gap-2",children:[(!z||z.status==="fechado")&&r.jsx("button",{onClick:V,disabled:O,className:"rounded-lg bg-gradient-to-r from-emerald-500 to-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-emerald-600 hover:to-emerald-700 disabled:cursor-not-allowed disabled:opacity-50",children:O?"Abrindo...":"Abrir Caixa"}),(z==null?void 0:z.status)==="aberto"&&r.jsx("button",{onClick:X,disabled:O,className:"rounded-lg bg-gradient-to-r from-red-500 to-red-600 px-4 py-2 text-sm font-semibold text-white shadow-lg transition hover:from-red-600 hover:to-red-700 disabled:cursor-not-allowed disabled:opacity-50",children:O?"Fechando...":"Fechar Caixa"})]})]}),(!z||z.status==="fechado")&&r.jsx("div",{className:"mt-3 rounded-lg border border-yellow-400/30 bg-yellow-500/10 px-3 py-2 text-xs text-yellow-200",children:" Abra um caixa para registrar transaes financeiras."})]}),e==="list"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 p-4 shadow-lg shadow-black/30",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-200",children:"Servios Realizados"}),r.jsx("div",{className:"mt-2 text-3xl font-semibold text-emerald-100",children:g(K)}),r.jsxs("div",{className:"mt-1 text-xs text-emerald-200/70",children:[Z.length," OS concluda(s)"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-blue-500/20 to-blue-600/10 p-4 shadow-lg shadow-black/30",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-blue-200",children:"Total de Entradas"}),r.jsx("div",{className:"mt-2 text-3xl font-semibold text-blue-100",children:g(H.totalEntradas)}),r.jsxs("div",{className:"mt-1 text-xs text-blue-200/70",children:[W.filter(h=>h.type==="entrada").length," transao(es)"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-red-500/20 to-red-600/10 p-4 shadow-lg shadow-black/30",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-red-200",children:"Total de Sadas"}),r.jsx("div",{className:"mt-2 text-3xl font-semibold text-red-100",children:g(H.totalSaidas)}),r.jsxs("div",{className:"mt-1 text-xs text-red-200/70",children:[W.filter(h=>h.type==="saida").length," transao(es)"]})]}),r.jsxs("div",{className:`rounded-2xl border border-white/10 p-4 shadow-lg shadow-black/30 ${H.totalSaldo>=0?"bg-gradient-to-br from-purple-500/20 to-purple-600/10":"bg-gradient-to-br from-orange-500/20 to-orange-600/10"}`,children:[r.jsx("div",{className:`text-[11px] uppercase tracking-wide ${H.totalSaldo>=0?"text-purple-200":"text-orange-200"}`,children:"Saldo Total"}),r.jsx("div",{className:`mt-2 text-3xl font-semibold ${H.totalSaldo>=0?"text-purple-100":"text-orange-100"}`,children:g(H.totalSaldo)}),r.jsxs("div",{className:`mt-1 text-xs ${H.totalSaldo>=0?"text-purple-200/70":"text-orange-200/70"}`,children:[W.length," transao(es) no perodo"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Folha de Pagamento (Ativos)"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-yellow-300",children:g(F)}),r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:[d.filter(h=>h.status==="ativo").length," funcionrio(s) ativo(s)"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Salrios Pagos"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-orange-300",children:g(w)}),r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:[b.length," pagamento(s) registrado(s)"]})]}),r.jsxs("div",{className:"rounded-2xl border border-yellow-400/30 bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-yellow-200",children:"Valores Pendentes"}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-yellow-100",children:g(q)}),r.jsxs("div",{className:"mt-1 text-xs text-yellow-200/70",children:[v.length," OS pendente(s) ou em execuo"]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Saldo do Dia (Hoje)"}),r.jsx("div",{className:`mt-2 text-2xl font-semibold ${H.todaySaldo>=0?"text-emerald-300":"text-red-300"}`,children:g(H.todaySaldo)}),r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:[C.length," transao(es) hoje"]})]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/20",children:[r.jsx("div",{className:"mb-4 text-sm font-semibold text-white",children:"Estatsticas de Pagamento por Mtodo"}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[Object.entries(B).map(([h,_])=>{var re;const ee=((re=tn.find(ae=>ae.value===h))==null?void 0:re.label)||h,j=_,S=j.entrada-j.saida;return r.jsxs("div",{className:"rounded-lg border border-white/10 bg-slate-900/50 p-3 text-sm",children:[r.jsx("div",{className:"font-semibold text-white",children:ee}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between text-emerald-300",children:[r.jsx("span",{children:"Entradas:"}),r.jsx("span",{children:g(j.entrada)})]}),r.jsxs("div",{className:"flex justify-between text-red-300",children:[r.jsx("span",{children:"Sadas:"}),r.jsx("span",{children:g(j.saida)})]}),r.jsxs("div",{className:"flex justify-between border-t border-white/10 pt-1 text-slate-200",children:[r.jsx("span",{children:"Saldo:"}),r.jsx("span",{className:S>=0?"text-emerald-300":"text-red-300",children:g(S)})]})]})]},h)}),!T&&Object.keys(B).length===0&&r.jsx("div",{className:"col-span-full text-center text-sm text-slate-400",children:"Nenhuma transao registrada ainda"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[r.jsx("input",{value:y,onChange:h=>$(h.target.value),placeholder:"Buscar por descrio, cliente ou OS",className:"flex-1 min-w-64 bg-transparent text-sm text-white outline-none placeholder:text-slate-400"}),r.jsx("input",{type:"date",value:Y,onChange:h=>G(h.target.value),className:"rounded-md border border-white/10 bg-slate-900 px-3 py-2 text-xs font-semibold text-white outline-none transition hover:border-emerald-300/50 focus:border-emerald-400"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:M,onChange:h=>f(h.target.value),className:"appearance-none rounded-md border border-white/10 bg-slate-900 px-3 py-2 pr-7 text-xs font-semibold text-white outline-none transition hover:border-emerald-300/50 focus:border-emerald-400",children:[r.jsx("option",{value:"all",children:"Todos os tipos"}),r.jsx("option",{value:"entrada",children:"Entradas"}),r.jsx("option",{value:"saida",children:"Sadas"})]}),r.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-slate-300",children:""})]}),(Y||M!=="all"||y)&&r.jsx("button",{onClick:()=>{G(""),f("all"),$("")},className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-slate-200 transition hover:border-emerald-300/40 hover:text-white",children:"Limpar filtros"})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-0 text-sm text-slate-200 shadow-inner shadow-black/20",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-white",children:"Movimentaes Financeiras"}),r.jsx("span",{className:"text-xs text-slate-300",children:T?"Carregando...":`${W.length} registro(s)`})]}),T?r.jsxs("div",{className:"px-6 py-8 text-center text-slate-300",children:[r.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-emerald-400"}),r.jsx("p",{className:"text-sm",children:"Carregando transaes..."})]}):W.length===0?r.jsx("div",{className:"px-6 py-4 text-slate-300",children:'Nenhuma transao encontrada. Clique em "+ Nova transao" para adicionar.'}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-white/5 text-xs uppercase text-slate-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Data"}),r.jsx("th",{className:"px-4 py-3",children:"Tipo"}),r.jsx("th",{className:"px-4 py-3",children:"Descrio"}),r.jsx("th",{className:"px-4 py-3",children:"Cliente"}),r.jsx("th",{className:"px-4 py-3",children:"OS"}),r.jsx("th",{className:"px-4 py-3",children:"Forma de pagamento"}),r.jsx("th",{className:"px-4 py-3 text-right",children:"Valor"})]})}),r.jsx("tbody",{children:W.map(h=>{var _;return r.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 cursor-pointer transition",onClick:()=>{x(h),t("detail")},children:[r.jsx("td",{className:"px-4 py-3 text-slate-200",children:A(h.date)}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold whitespace-nowrap ${h.type==="entrada"?"border-emerald-400/50 bg-emerald-500/20 text-emerald-100":"border-red-400/50 bg-red-500/20 text-red-100"}`,children:h.type==="entrada"?"Entrada":"Sada"})}),r.jsx("td",{className:"px-4 py-3 text-white",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:h.description||"-"}),h.receiptFileKey&&r.jsx("span",{className:"text-blue-400",title:"Comprovante anexado",children:""})]})}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:h.clientName||"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:h.jobTitle?r.jsxs("span",{className:"text-xs",children:[h.jobTitle.substring(0,30),"..."]}):"-"}),r.jsx("td",{className:"px-4 py-3 text-slate-200",children:((_=tn.find(ee=>ee.value===h.paymentMethod))==null?void 0:_.label)||h.paymentMethod||"-"}),r.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${h.type==="entrada"?"text-emerald-300":"text-red-300"}`,children:[h.type==="entrada"?"+":"-",g(h.amount||0)]})]},h._id)})})]})})]})]}),e==="form"&&r.jsxs("div",{className:"space-y-5 rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:"Nova transao"}),r.jsx("p",{className:"text-xs text-slate-300",children:"Registre uma entrada ou sada financeira vinculada a cliente, OS ou funcionrio."})]}),r.jsx("button",{onClick:()=>{t("list"),te()},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Cancelar"})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de transao *"}),r.jsxs("select",{value:E.type,onChange:h=>Q(_=>({..._,type:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"entrada",children:"Entrada"}),r.jsx("option",{value:"saida",children:"Sada"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Data *"}),r.jsx("input",{type:"date",value:E.date,onChange:h=>Q(_=>({..._,date:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Valor (R$) *"}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",value:E.amount,onChange:h=>Q(_=>({..._,amount:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Forma de pagamento *"}),r.jsx("select",{value:E.paymentMethod,onChange:h=>Q(_=>({..._,paymentMethod:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:tn.map(h=>r.jsx("option",{value:h.value,children:h.label},h.value))})]}),r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Descrio *"}),r.jsx("input",{value:E.description,onChange:h=>Q(_=>({..._,description:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: Pagamento de servio de perfurao"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Categoria"}),r.jsxs("select",{value:E.category,onChange:h=>Q(_=>({..._,category:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione uma categoria"}),vw.map(h=>r.jsx("option",{value:h,children:h},h))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Cliente"}),r.jsxs("select",{value:E.clientId,onChange:h=>{if(Q(_=>({..._,clientId:h.target.value})),h.target.value){const _=n.find(ee=>ee._id===h.target.value);if(_){const ee=o.filter(j=>j.clientId===h.target.value||j.clientName===_.name);ee.length===1&&Q(j=>({...j,jobId:ee[0]._id}))}}},className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione um cliente (opcional)"}),n.map(h=>r.jsx("option",{value:h._id,children:h.name},h._id))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Ordem de Servio"}),r.jsxs("select",{value:E.jobId,onChange:h=>Q(_=>({..._,jobId:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione uma OS (opcional)"}),(E.clientId?o.filter(h=>{var _;return h.clientId===E.clientId||h.clientName===((_=n.find(ee=>ee._id===E.clientId))==null?void 0:_.name)}):o).map(h=>r.jsx("option",{value:h._id,children:h.title||`OS #${h.seq||h._id}`},h._id))]})]}),r.jsxs("div",{className:"space-y-1 text-sm sm:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Observaes"}),r.jsx("textarea",{value:E.notes,onChange:h=>Q(_=>({..._,notes:h.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",rows:3,placeholder:"Informaes adicionais sobre a transao"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:P,disabled:u,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:u?"Salvando...":"Salvar transao"})})]}),e==="detail"&&L&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-white",children:L.description}),r.jsxs("div",{className:"text-xs text-slate-300",children:[A(L.date)," "," ",L.type==="entrada"?"Entrada":"Sada"]})]}),r.jsx("button",{onClick:()=>{t("list"),x(null)},className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:text-white",children:"Fechar"})]}),r.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Valor"}),r.jsxs("div",{className:`text-lg font-semibold ${L.type==="entrada"?"text-emerald-300":"text-red-300"}`,children:[L.type==="entrada"?"+":"-",g(L.amount||0)]})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Forma de pagamento"}),r.jsx("div",{className:"text-white",children:((ne=tn.find(h=>h.value===L.paymentMethod))==null?void 0:ne.label)||L.paymentMethod||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Categoria"}),r.jsx("div",{className:"text-white",children:L.category||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Cliente"}),r.jsx("div",{className:"text-white",children:L.clientName||"-"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200 sm:col-span-2",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Ordem de Servio"}),r.jsx("div",{className:"text-white",children:L.jobTitle||"-"})]}),L.notes&&r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200 sm:col-span-2",children:[r.jsx("div",{className:"text-[11px] uppercase text-slate-400",children:"Observaes"}),r.jsx("div",{className:"text-white",children:L.notes})]}),L.receiptFileKey&&r.jsxs("div",{className:"rounded-lg border border-blue-400/30 bg-blue-500/10 px-3 py-2 text-sm text-slate-200 sm:col-span-2",children:[r.jsx("div",{className:"text-[11px] uppercase text-blue-300 mb-2 flex items-center gap-1",children:" Comprovante Anexado"}),r.jsxs("button",{onClick:async()=>{try{const _=`https://gruporeis.cloud/api/s3/download/${L.receiptFileKey}`;window.open(_,"_blank")}catch(h){console.error("Erro ao baixar comprovante:",h),k.fire("Erro","No foi possvel baixar o comprovante","error")}},className:"w-full flex items-center justify-center gap-2 rounded-lg border border-blue-400/50 bg-blue-500/20 px-4 py-2 text-sm font-semibold text-blue-300 transition hover:border-blue-400 hover:bg-blue-500/30",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Baixar Comprovante"]})]})]})]})]})}const Ql=[{value:"argiloso",label:"Argiloso"},{value:"arenoso",label:"Arenoso"},{value:"rochoso",label:"Rochoso"},{value:"misturado",label:"Terra comum"},{value:"outro",label:"No sei informar"}],Yl=[{value:"livre",label:"Acesso livre e desimpedido"},{value:"limitado",label:"Algumas limitaes"},{value:"restrito",label:"Acesso restrito ou complicado"}],yw=[30,35,40,45,50,60,70,80,90,100,110,120];function jw({photoKeys:e,onRemove:t}){const[s,a]=p.useState({});return p.useEffect(()=>{const n=async()=>{var o;const l={};for(let c=0;c<e.length;c++)try{const d=await le("/files/presigned-url",{method:"POST",body:JSON.stringify({key:e[c]})}),m=await d.json().catch(()=>null);d.ok&&((o=m==null?void 0:m.data)!=null&&o.url)&&(l[c]=m.data.url)}catch(d){console.error(`Failed to load photo ${c}:`,d)}a(l)};e.length>0&&n()},[e]),r.jsx("div",{className:"mt-3 grid grid-cols-4 gap-2",children:e.map((n,l)=>r.jsxs("div",{className:"relative group",children:[s[l]?r.jsx("img",{src:s[l],alt:`Foto ${l+1}`,className:"w-full h-24 object-cover rounded-lg border border-white/10"}):r.jsx("div",{className:"w-full h-24 rounded-lg border border-white/10 bg-slate-800 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-400"})}),r.jsx("button",{onClick:()=>t(l),className:"absolute top-1 right-1 w-6 h-6 rounded-full bg-red-500 text-white text-xs opacity-0 group-hover:opacity-100 transition",children:""})]},l))})}function Nw(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,l]=p.useState(!1),[o,c]=p.useState("list"),[d,m]=p.useState(null),[L,x]=p.useState([]),[y,$]=p.useState([]),[Y,G]=p.useState(new Set),[M,f]=p.useState(""),[u,N]=p.useState({name:"",description:"",category:"",active:!0,priceVariations:[]});p.useEffect(()=>{T()},[]);const T=async()=>{try{a(!0);const B=await le("/catalog",{cache:"no-store"}),b=await B.json().catch(()=>null);B.ok&&(b!=null&&b.data)&&t(Array.isArray(b.data)?b.data:[])}catch(B){console.error(B)}finally{a(!1)}},J=()=>{N({name:"",description:"",category:"",active:!0,priceVariations:[]}),m(null),x([]),$([]),c("list"),G(new Set)},z=B=>{var F;const b=(B.priceVariations||[]).map(R=>({...R,access:R.access||"livre"}));N({name:B.name||"",description:B.description||"",category:B.category||"",active:B.active!==void 0?B.active:!0,priceVariations:b}),m(((F=B._id)==null?void 0:F.toString())||null),$(B.photos||[]),x([]),c("form");const w=new Set(b.map(R=>R.diameter));G(w)},I=B=>{G(b=>{const w=new Set(b);return w.has(B)?w.delete(B):w.add(B),w})},O=B=>{const b=Array.from(B.target.files||[]);if(b.length>0){const w=b.filter(F=>F.type.startsWith("image/")?F.size>5242880?(k.fire("Ateno",`${F.name}  muito grande. Tamanho mximo: 5MB`,"warning"),!1):!0:(k.fire("Ateno",`${F.name} no  uma imagem vlida.`,"warning"),!1));x(F=>[...F,...w])}},U=(B,b)=>{b?$(w=>w.filter((F,R)=>R!==B)):x(w=>w.filter((F,R)=>R!==B))},E=async()=>{const{value:B}=await k.fire({title:"Selecionar Dimetro",text:"Escolha o dimetro para a nova variao de preo:",input:"select",inputOptions:yw.reduce((w,F)=>(w[F]=`${F} cm`,w),{}),inputPlaceholder:"Selecione o dimetro",showCancelButton:!0,confirmButtonText:"Adicionar",cancelButtonText:"Cancelar",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",inputValidator:w=>w?null:"Voc precisa selecionar um dimetro!"});if(!B)return;const b=parseInt(B,10);N(w=>({...w,priceVariations:[...w.priceVariations,{diameter:b,soilType:"argiloso",access:"livre",price:0,executionTime:void 0}]})),G(w=>new Set(w).add(b))},Q=(B,b,w)=>{N(F=>({...F,priceVariations:F.priceVariations.map((R,C)=>C===B?b==="diameter"?{...R,[b]:typeof w=="string"?parseInt(w,10):Number(w)}:b==="price"?{...R,[b]:typeof w=="string"?parseFloat(w):Number(w)}:b==="executionTime"?{...R,[b]:w!==void 0?typeof w=="string"?parseInt(w,10):Number(w):void 0}:{...R,[b]:w}:R)}))},W=B=>{N(b=>({...b,priceVariations:b.priceVariations.filter((w,F)=>F!==B)}))},Z=u.priceVariations.reduce((B,b,w)=>{const F=b.diameter;return B[F]||(B[F]=[]),B[F].push({...b,originalIndex:w}),B},{}),K=Object.keys(Z).map(Number).sort((B,b)=>B-b),v=async()=>{var B,b,w;if(!n){if(!u.name.trim()){k.fire("Ateno","Informe o nome do servio.","warning");return}if(u.priceVariations.length===0){k.fire("Ateno","Adicione pelo menos uma variao de preo.","warning");return}try{l(!0);for(const P of u.priceVariations){if(!P.diameter||P.diameter<=0){k.fire("Ateno",`Variao com dimetro invlido: ${P.diameter}`,"warning"),l(!1);return}if(P.price===void 0||P.price<0){k.fire("Ateno",`Variao com preo invlido: ${P.price}`,"warning"),l(!1);return}if(!P.soilType||!["argiloso","arenoso","rochoso","misturado","outro"].includes(P.soilType)){k.fire("Ateno",`Variao com tipo de solo invlido: ${P.soilType}`,"warning"),l(!1);return}if(!P.access||!["livre","limitado","restrito"].includes(P.access)){k.fire("Ateno",`Variao com acesso invlido: ${P.access}`,"warning"),l(!1);return}}const F=[];for(const P of L){const g=new FormData;g.append("file",P),g.append("category","catalog"),d&&g.append("id",d);const A=await le("/files/upload",{method:"POST",headers:{},body:g}),D=await A.json().catch(()=>null);A.ok&&((B=D==null?void 0:D.data)!=null&&B.key)&&F.push(D.data.key)}const R=[...y,...F];let C;try{C=u.priceVariations.map(P=>{const g=typeof P.diameter=="string"?parseInt(P.diameter,10):Number(P.diameter),A=typeof P.price=="string"?parseFloat(P.price):Number(P.price),D=P.soilType||"argiloso",V=P.access||"livre";if(isNaN(g)||g<=0)throw new Error(`Dimetro invlido: ${P.diameter}`);if(isNaN(A)||A<0)throw new Error(`Preo invlido: ${P.price}`);if(!["argiloso","arenoso","rochoso","misturado","outro"].includes(D))throw new Error(`Tipo de solo invlido: ${D}`);if(!["livre","limitado","restrito"].includes(V))throw new Error(`Acesso invlido: ${V}`);const X={diameter:g,soilType:D,access:V,price:A};if(P.executionTime!==void 0&&P.executionTime!==null){const ne=typeof P.executionTime=="string"?parseInt(P.executionTime,10):Number(P.executionTime);!isNaN(ne)&&ne>=0&&(X.executionTime=ne)}return X})}catch(P){k.fire("Ateno",(P==null?void 0:P.message)||"Erro ao validar variaes de preo.","warning"),l(!1);return}const H={name:u.name.trim(),description:u.description.trim()||void 0,category:u.category.trim()||void 0,active:u.active,priceVariations:C,photos:R.length>0?R:void 0},te=d?await le(`/catalog/${d}`,{method:"PUT",body:JSON.stringify(H)}):await le("/catalog",{method:"POST",body:JSON.stringify(H)}),i=await te.json().catch(()=>null);if(!te.ok){console.error("Catalog save error:",i);const P=(i==null?void 0:i.error)||"No foi possvel salvar item do catlogo.",g=((b=i==null?void 0:i.issues)==null?void 0:b.fieldErrors)||((w=i==null?void 0:i.issues)==null?void 0:w.formErrors)||[],A=g.length>0?`

Detalhes: ${JSON.stringify(g,null,2)}`:"";k.fire("Erro",P+A,"error");return}k.fire("Sucesso",d?"Item atualizado com sucesso.":"Item criado com sucesso.","success"),J(),T()}catch(F){console.error(F),k.fire("Erro","Falha ao salvar item do catlogo.","error")}finally{l(!1)}}},q=async B=>{if((await k.fire({title:"Confirmar excluso",text:"Deseja realmente excluir este item do catlogo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sim, excluir",cancelButtonText:"Cancelar"})).isConfirmed)try{const w=await le(`/catalog/${B}`,{method:"DELETE"});if(!w.ok){const F=await w.json().catch(()=>null);k.fire("Erro",(F==null?void 0:F.error)||"No foi possvel excluir item.","error");return}t(F=>F.filter(R=>R._id!==B)),k.fire("Sucesso","Item excludo com sucesso.","success")}catch(w){console.error(w),k.fire("Erro","Falha ao excluir item.","error")}};return s?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando catlogo..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Catlogo de Servios"}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Gerencie os servios oferecidos e suas variaes de preo por dimetro e tipo de solo"})]}),o==="list"&&r.jsx("button",{onClick:()=>c("form"),className:"px-4 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition",children:"+ Novo Servio"})]}),o==="form"?r.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/50 p-6",children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:d?"Editar Servio":"Novo Servio"}),r.jsx("button",{onClick:J,className:"px-3 py-1.5 rounded-lg border border-white/15 bg-white/5 text-slate-200 text-sm font-semibold hover:bg-white/10 transition",children:"Cancelar"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Nome do Servio ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"text",value:u.name,onChange:B=>N(b=>({...b,name:B.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Ex: Estaca Broca"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Categoria"}),r.jsx("input",{type:"text",value:u.category,onChange:B=>N(b=>({...b,category:B.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Ex: Fundaes"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Descrio"}),r.jsx("textarea",{value:u.description,onChange:B=>N(b=>({...b,description:B.target.value})),rows:3,className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Descrio do servio..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Fotos"}),r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:O,className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-500/20 file:text-emerald-300 hover:file:bg-emerald-500/30"}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Formatos aceitos: JPG, PNG (mx. 5MB cada)"}),y.length>0&&r.jsx(jw,{photoKeys:y,onRemove:B=>U(B,!0)}),L.length>0&&r.jsx("div",{className:"mt-3 grid grid-cols-4 gap-2",children:L.map((B,b)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:URL.createObjectURL(B),alt:`Nova foto ${b+1}`,className:"w-full h-24 object-cover rounded-lg border border-emerald-500/50"}),r.jsx("button",{onClick:()=>U(b,!1),className:"absolute top-1 right-1 w-6 h-6 rounded-full bg-red-500 text-white text-xs opacity-0 group-hover:opacity-100 transition",children:""})]},b))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300",children:["Variaes de Preo ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("button",{onClick:E,className:"px-3 py-1.5 rounded-lg border border-emerald-500/50 bg-emerald-500/20 text-emerald-300 text-sm font-semibold hover:bg-emerald-500/30 transition",children:"+ Adicionar Variao"})]}),u.priceVariations.length===0?r.jsx("p",{className:"text-sm text-slate-400 text-center py-4 border border-dashed border-white/10 rounded-lg",children:'Nenhuma variao de preo adicionada. Clique em "Adicionar Variao" para comear.'}):r.jsx("div",{className:"space-y-4",children:K.map(B=>{const b=Z[B];return r.jsxs("div",{className:"rounded-lg border border-white/10 bg-slate-900/30 overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 bg-slate-800/50 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>I(B),className:"flex items-center gap-2 hover:opacity-80 transition",children:[r.jsx("svg",{className:`w-5 h-5 text-slate-300 transition-transform duration-200 ${Y.has(B)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),r.jsxs("h4",{className:"font-semibold text-white text-sm",children:["Dimetro: ",B," cm (",b.length," ",b.length===1?"variao":"variaes",")"]})]}),r.jsxs("button",{onClick:w=>{w.stopPropagation(),Y.has(B)||G(F=>new Set(F).add(B)),N(F=>({...F,priceVariations:[...F.priceVariations,{diameter:B,soilType:"argiloso",access:"livre",price:0}]}))},className:"px-3 py-1.5 rounded-lg border border-emerald-500/50 bg-emerald-500/20 text-emerald-300 text-xs font-semibold hover:bg-emerald-500/30 transition",children:["+ Adicionar para ",B,"cm"]})]}),Y.has(B)&&r.jsx("div",{className:"p-4 space-y-3",children:b.map(w=>{const F=w.originalIndex;return r.jsxs("div",{className:"p-3 rounded-lg border border-white/10 bg-slate-900/50 grid gap-3 md:grid-cols-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tipo de Solo"}),r.jsx("select",{value:w.soilType,onChange:R=>Q(F,"soilType",R.target.value),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:Ql.map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Acesso para Mquina"}),r.jsx("select",{value:w.access,onChange:R=>Q(F,"access",R.target.value),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:Yl.map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Preo (R$)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:w.price,onChange:R=>Q(F,"price",parseFloat(R.target.value)||0),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tempo (min/metro)"}),r.jsx("input",{type:"number",step:"1",min:"0",value:w.executionTime||"",onChange:R=>Q(F,"executionTime",R.target.value?parseInt(R.target.value,10):void 0),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Ex: 10"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>W(F),className:"w-full px-3 py-2 rounded-lg border border-red-500/50 bg-red-500/10 text-red-300 text-sm font-semibold hover:bg-red-500/20 transition",children:"Remover"})})]},F)})})]},B)})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"active",checked:u.active,onChange:B=>N(b=>({...b,active:B.target.checked})),className:"w-4 h-4 rounded border-white/10 bg-slate-900/60 text-emerald-500 focus:ring-emerald-500/50"}),r.jsx("label",{htmlFor:"active",className:"text-sm text-slate-300",children:"Servio ativo"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:v,disabled:n,className:"px-6 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 disabled:opacity-50 transition",children:n?"Salvando...":d?"Atualizar":"Criar Servio"}),r.jsx("button",{onClick:J,className:"px-6 py-2 rounded-lg border border-white/15 bg-white/5 text-slate-200 font-semibold hover:bg-white/10 transition",children:"Cancelar"})]})]})]}):r.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/50 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-white/10",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Buscar por nome, descrio, categoria ou preo...",value:M,onChange:B=>f(B.target.value),className:"w-full px-4 py-2 pl-10 rounded-lg border border-white/10 bg-slate-900/50 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),r.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),M&&r.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-2.5 text-slate-400 hover:text-white transition",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(()=>{const B=e.filter(b=>{var R,C,H,te;if(!M.trim())return!0;const w=M.toLowerCase().trim();return!!((R=b.name)!=null&&R.toLowerCase().includes(w)||(C=b.description)!=null&&C.toLowerCase().includes(w)||(H=b.category)!=null&&H.toLowerCase().includes(w)||((te=b.priceVariations)==null?void 0:te.some(i=>{var V,X;const P=i.price.toString(),g=i.price.toFixed(2);if(P.includes(w)||g.includes(w))return!0;const A=(V=Ql.find(ne=>ne.value===i.soilType))==null?void 0:V.label.toLowerCase();if(A!=null&&A.includes(w))return!0;const D=(X=Yl.find(ne=>ne.value===i.access))==null?void 0:X.label.toLowerCase();return!!(D!=null&&D.includes(w)||i.diameter.toString().includes(w))})))});return e.length===0?r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:"text-slate-300",children:"Nenhum servio cadastrado."})}):B.length===0?r.jsx("div",{className:"p-8 text-center",children:r.jsxs("p",{className:"text-slate-300",children:['Nenhum servio encontrado para "',M,'".']})}):r.jsx("div",{className:"divide-y divide-white/10",children:B.map(b=>{var w;return r.jsx("div",{className:"p-4 hover:bg-slate-800/30 transition",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"font-semibold text-white",children:b.name}),b.category&&r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-slate-500/20 text-slate-300 border border-slate-500/50",children:b.category}),!b.active&&r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-red-500/20 text-red-300 border border-red-500/50",children:"Inativo"})]}),b.description&&r.jsx("p",{className:"text-sm text-slate-400 mb-3",children:b.description}),r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-xs font-medium text-slate-400 mb-2",children:"Variaes de Preo:"}),(()=>{const F=(b.priceVariations||[]).reduce((C,H)=>{const te=H.diameter;return C[te]||(C[te]=[]),C[te].push(H),C},{}),R=Object.keys(F).map(Number).sort((C,H)=>C-H);return r.jsx("div",{className:"space-y-3",children:R.map(C=>{const H=F[C];return r.jsxs("div",{className:"rounded-lg border border-white/10 bg-slate-900/30 overflow-hidden",children:[r.jsx("div",{className:"px-3 py-2 bg-slate-800/50 border-b border-white/10",children:r.jsxs("h4",{className:"font-semibold text-white text-sm",children:["Dimetro: ",C," cm (",H.length," ",H.length===1?"variao":"variaes",")"]})}),r.jsx("div",{className:"p-3 grid gap-2 md:grid-cols-2 lg:grid-cols-3",children:H.map((te,i)=>{var P,g;return r.jsxs("div",{className:"px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-sm space-y-2",children:[r.jsxs("div",{className:"text-slate-300",children:[r.jsx("div",{className:"font-medium text-white",children:(P=Ql.find(A=>A.value===te.soilType))==null?void 0:P.label}),r.jsx("div",{className:"text-xs text-slate-400 mt-1",children:(g=Yl.find(A=>A.value===te.access))==null?void 0:g.label})]}),r.jsxs("div",{className:"font-semibold text-emerald-300 text-base",children:["R$ ",te.price.toFixed(2),"/m"]}),te.executionTime?r.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-blue-300 bg-blue-500/10 px-2 py-1 rounded",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"font-medium",children:[te.executionTime," min/metro"]})]}):r.jsx("div",{className:"text-xs text-slate-500 italic",children:"Tempo no definido"})]},i)})})]},C)})})})()]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:()=>z(b),className:"px-3 py-1.5 rounded-lg border border-white/15 bg-white/5 text-slate-200 text-sm font-semibold hover:bg-white/10 transition",children:"Editar"}),r.jsx("button",{onClick:()=>{var F;return q(((F=b._id)==null?void 0:F.toString())||"")},className:"px-3 py-1.5 rounded-lg border border-red-500/50 bg-red-500/10 text-red-300 text-sm font-semibold hover:bg-red-500/20 transition",children:"Excluir"})]})]})},(w=b._id)==null?void 0:w.toString())})})})()]})]})}const Xl=[{value:"contrato",label:"Contrato"},{value:"proposta",label:"Proposta"},{value:"nota_fiscal",label:"Nota Fiscal"},{value:"recibo",label:"Recibo"},{value:"outro",label:"Outro"}],Zl=[{value:"pendente",label:"Pendente",color:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50"},{value:"assinado",label:"Assinado",color:"bg-emerald-500/20 text-emerald-300 border-emerald-500/50"},{value:"cancelado",label:"Cancelado",color:"bg-red-500/20 text-red-300 border-red-500/50"},{value:"arquivado",label:"Arquivado",color:"bg-slate-500/20 text-slate-300 border-slate-500/50"}];function Cw(){const{user:e}=zr(),s=((e==null?void 0:e.role)||"user")==="admin",[a,n]=p.useState("list"),[l,o]=p.useState([]),[c,d]=p.useState([]),[m,L]=p.useState([]),[x,y]=p.useState(""),[$,Y]=p.useState("all"),[G,M]=p.useState("all"),[f,u]=p.useState(!1),[N,T]=p.useState(!0),[J,z]=p.useState(null),[I,O]=p.useState(null),[U,E]=p.useState({title:"",type:"contrato",status:"pendente",description:"",clientId:"",clientName:"",jobId:"",jobTitle:"",signedAt:"",expiresAt:"",notes:""});p.useEffect(()=>{if(!s){T(!1);return}(async()=>{try{T(!0);const[F,R,C]=await Promise.all([le("/documents",{cache:"no-store"}),le("/clients",{cache:"no-store"}),le("/jobs",{cache:"no-store"})]),H=await F.json().catch(()=>null),te=await R.json().catch(()=>null),i=await C.json().catch(()=>null);o(Array.isArray(H==null?void 0:H.data)?H.data:[]),d(Array.isArray(te==null?void 0:te.data)?te.data:[]),L(Array.isArray(i==null?void 0:i.data)?i.data:[])}catch(F){console.error(F)}finally{T(!1)}})()},[s]);const Q=p.useMemo(()=>l.filter(w=>{var H,te,i,P;const F=!x||((H=w.title)==null?void 0:H.toLowerCase().includes(x.toLowerCase()))||((te=w.clientName)==null?void 0:te.toLowerCase().includes(x.toLowerCase()))||((i=w.jobTitle)==null?void 0:i.toLowerCase().includes(x.toLowerCase()))||((P=w.fileName)==null?void 0:P.toLowerCase().includes(x.toLowerCase())),R=$==="all"||w.type===$,C=G==="all"||w.status===G;return F&&R&&C}),[l,x,$,G]),W=w=>{if(w===0)return"0 Bytes";const F=1024,R=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(w)/Math.log(F));return Math.round(w/Math.pow(F,C)*100)/100+" "+R[C]},Z=w=>{var R;const F=(R=w.target.files)==null?void 0:R[0];if(!F){O(null);return}if(F.size>50*1024*1024){k.fire("Ateno","O arquivo  muito grande. Tamanho mximo: 50MB","warning"),w.target.value="",O(null);return}O(F)},K=async()=>{var w,F,R;if(!f){if(!U.title.trim()){k.fire("Ateno","Informe o ttulo do documento.","warning");return}if(!I&&!J){k.fire("Ateno","Selecione um arquivo para upload.","warning");return}try{u(!0);let C="",H="",te=0,i="";if(I){const D=new FormData;D.append("file",I),D.append("category","documents"),U.clientId&&D.append("id",U.clientId);const V=await le("/files/upload",{method:"POST",headers:{},body:D}),X=await V.json().catch(()=>null);if(!V.ok||!((w=X==null?void 0:X.data)!=null&&w.key)){k.fire("Erro","Falha ao fazer upload do arquivo.","error");return}C=X.data.key,H=X.data.filename,te=X.data.size,i=X.data.contentType}else if(J){const D=l.find(V=>V._id===J);D&&(C=D.fileKey,H=D.fileName,te=D.fileSize,i=D.fileType)}const P=U.clientId&&c.find(D=>D._id===U.clientId)?(F=c.find(D=>D._id===U.clientId))==null?void 0:F.name:U.clientName||"",g=U.jobId&&m.find(D=>D._id===U.jobId)?(R=m.find(D=>D._id===U.jobId))==null?void 0:R.title:U.jobTitle||"",A={title:U.title.trim(),type:U.type,status:U.status,description:U.description.trim()||void 0,clientId:U.clientId||null,clientName:P||void 0,jobId:U.jobId||null,jobTitle:g||void 0,signedAt:U.signedAt||void 0,expiresAt:U.expiresAt||void 0,notes:U.notes.trim()||void 0};if(J){I&&(A.fileKey=C,A.fileName=H,A.fileSize=te,A.fileType=i);const D=await le(`/documents/${J}`,{method:"PUT",body:JSON.stringify(A)}),V=await D.json().catch(()=>null);if(!D.ok){k.fire("Erro",(V==null?void 0:V.error)||"No foi possvel atualizar documento.","error");return}o(X=>X.map(ne=>ne._id===J?V.data:ne)),k.fire("Sucesso","Documento atualizado com sucesso.","success")}else{A.fileKey=C,A.fileName=H,A.fileSize=te,A.fileType=i;const D=await le("/documents",{method:"POST",body:JSON.stringify(A)}),V=await D.json().catch(()=>null);if(!D.ok){k.fire("Erro",(V==null?void 0:V.error)||"No foi possvel criar documento.","error");return}o(X=>[V.data,...X]),k.fire("Sucesso","Documento criado com sucesso.","success")}v(),n("list")}catch(C){console.error(C),k.fire("Erro","Falha ao salvar documento.","error")}finally{u(!1)}}},v=()=>{E({title:"",type:"contrato",status:"pendente",description:"",clientId:"",clientName:"",jobId:"",jobTitle:"",signedAt:"",expiresAt:"",notes:""}),O(null),z(null)},q=w=>{E({title:w.title||"",type:w.type||"contrato",status:w.status||"pendente",description:w.description||"",clientId:w.clientId||"",clientName:w.clientName||"",jobId:w.jobId||"",jobTitle:w.jobTitle||"",signedAt:w.signedAt?new Date(w.signedAt).toISOString().split("T")[0]:"",expiresAt:w.expiresAt?new Date(w.expiresAt).toISOString().split("T")[0]:"",notes:w.notes||""}),z(w._id),O(null),n("form")},B=async w=>{if((await k.fire({title:"Confirmar excluso",text:"Deseja realmente excluir este documento?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sim, excluir",cancelButtonText:"Cancelar"})).isConfirmed)try{const R=await le(`/documents/${w}`,{method:"DELETE"});if(!R.ok){const C=await R.json().catch(()=>null);k.fire("Erro",(C==null?void 0:C.error)||"No foi possvel excluir documento.","error");return}o(C=>C.filter(H=>H._id!==w)),k.fire("Sucesso","Documento excludo com sucesso.","success")}catch(R){console.error(R),k.fire("Erro","Falha ao excluir documento.","error")}},b=async w=>{var F;try{k.fire({title:"Gerando link de download...",allowOutsideClick:!1,didOpen:()=>{k.showLoading()}});const R=await le(`/documents/${w._id}/download-url`,{cache:"no-store"}),C=await R.json().catch(()=>null);if(!R.ok||!((F=C==null?void 0:C.data)!=null&&F.url)){k.fire("Erro","No foi possvel gerar link de download.","error");return}k.close(),window.open(C.data.url,"_blank")}catch(R){console.error(R),k.fire("Erro","Falha ao gerar link de download.","error")}};return N?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando documentos..."})]})}):s?a==="form"?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:J?"Editar Documento":"Novo Documento"}),r.jsx("p",{className:"text-sm text-slate-300 mt-1",children:J?"Atualize as informaes do documento":"Adicione um novo documento ao sistema"})]}),r.jsx("button",{onClick:()=>{v(),n("list")},className:"px-4 py-2 rounded-lg border border-white/15 bg-white/5 text-sm font-semibold text-slate-200 hover:bg-white/10 transition",children:"Cancelar"})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Ttulo ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"text",value:U.title,onChange:w=>E(F=>({...F,title:w.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Ex: Contrato de Prestao de Servios"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Tipo ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("select",{value:U.type,onChange:w=>E(F=>({...F,type:w.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:Xl.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Status"}),r.jsx("select",{value:U.status,onChange:w=>E(F=>({...F,status:w.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:Zl.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Cliente"}),r.jsxs("select",{value:U.clientId,onChange:w=>{const F=c.find(R=>R._id===w.target.value);E(R=>({...R,clientId:w.target.value,clientName:(F==null?void 0:F.name)||""}))},className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[r.jsx("option",{value:"",children:"Selecione um cliente..."}),c.map(w=>r.jsx("option",{value:w._id,children:w.name},w._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ordem de Servio"}),r.jsxs("select",{value:U.jobId,onChange:w=>{const F=m.find(R=>R._id===w.target.value);E(R=>({...R,jobId:w.target.value,jobTitle:(F==null?void 0:F.title)||""}))},className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[r.jsx("option",{value:"",children:"Selecione uma OS..."}),m.map(w=>r.jsxs("option",{value:w._id,children:[w.title," ",w.seq?`(#${String(w.seq).padStart(6,"0")})`:""]},w._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Data de Assinatura"}),r.jsx("input",{type:"date",value:U.signedAt,onChange:w=>E(F=>({...F,signedAt:w.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Data de Expirao"}),r.jsx("input",{type:"date",value:U.expiresAt,onChange:w=>E(F=>({...F,expiresAt:w.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Descrio"}),r.jsx("textarea",{value:U.description,onChange:w=>E(F=>({...F,description:w.target.value})),rows:3,className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Descrio do documento..."})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Arquivo ",!J&&r.jsx("span",{className:"text-red-400",children:"*"})]}),J&&!I&&(()=>{const w=l.find(F=>F._id===J);return w?r.jsxs("div",{className:"mb-3 p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/10",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-emerald-300 truncate",children:w.fileName}),r.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[W(w.fileSize),"  ",w.fileType]})]}),r.jsx("button",{type:"button",onClick:()=>b(w),className:"ml-3 px-3 py-1.5 rounded-lg border border-emerald-500/50 bg-emerald-500/20 text-emerald-300 text-xs font-semibold hover:bg-emerald-500/30 transition",children:"Ver"})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Selecione um novo arquivo abaixo para substituir este arquivo."})]}):null})(),r.jsx("input",{type:"file",onChange:Z,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-500/20 file:text-emerald-300 hover:file:bg-emerald-500/30"}),I&&r.jsxs("p",{className:"mt-2 text-sm text-emerald-300",children:[" Novo arquivo selecionado: ",I.name," (",W(I.size),")"]}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Formatos aceitos: PDF, DOC, DOCX, JPG, PNG (mx. 50MB)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Observaes"}),r.jsx("textarea",{value:U.notes,onChange:w=>E(F=>({...F,notes:w.target.value})),rows:2,className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Observaes adicionais..."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:K,disabled:f,className:"px-6 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:f?"Salvando...":J?"Atualizar":"Criar Documento"}),r.jsx("button",{onClick:()=>{v(),n("list")},className:"px-6 py-2 rounded-lg border border-white/15 bg-white/5 text-slate-200 font-semibold hover:bg-white/10 transition",children:"Cancelar"})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Documentos e Contratos"}),r.jsx("p",{className:"text-sm text-slate-300 mt-1",children:"Gerencie contratos, propostas, notas fiscais e outros documentos"})]}),r.jsx("button",{onClick:()=>n("form"),className:"px-4 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition",children:"+ Novo Documento"})]}),r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",value:x,onChange:w=>y(w.target.value),placeholder:"Buscar por ttulo, cliente, OS ou arquivo...",className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})}),r.jsxs("select",{value:$,onChange:w=>Y(w.target.value),className:"px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[r.jsx("option",{value:"all",children:"Todos os tipos"}),Xl.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))]}),r.jsxs("select",{value:G,onChange:w=>M(w.target.value),className:"px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[r.jsx("option",{value:"all",children:"Todos os status"}),Zl.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))]})]})}),Q.length===0?r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-12 text-center",children:r.jsx("p",{className:"text-slate-300",children:x||$!=="all"||G!=="all"?"Nenhum documento encontrado com os filtros aplicados.":"Nenhum documento cadastrado. Clique em 'Novo Documento' para comear."})}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Q.map(w=>{const F=Zl.find(C=>C.value===w.status),R=Xl.find(C=>C.value===w.type);return r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:w.title}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:R==null?void 0:R.label})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold border ${(F==null?void 0:F.color)||""}`,children:F==null?void 0:F.label})]}),r.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[w.clientName&&r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Cliente:"})," ",w.clientName]}),w.jobTitle&&r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"OS:"})," ",w.jobTitle]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Arquivo:"})," ",w.fileName]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Tamanho:"})," ",W(w.fileSize)]}),w.signedAt&&r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Assinado em:"})," ",new Date(w.signedAt).toLocaleDateString("pt-BR")]}),w.expiresAt&&r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Expira em:"})," ",new Date(w.expiresAt).toLocaleDateString("pt-BR")]})]}),w.description&&r.jsx("p",{className:"text-sm text-slate-400 line-clamp-2",children:w.description}),r.jsxs("div",{className:"flex gap-2 pt-2 border-t border-white/10",children:[r.jsx("button",{onClick:()=>b(w),className:"flex-1 px-3 py-2 rounded-lg border border-emerald-500/50 bg-emerald-500/10 text-emerald-300 text-sm font-semibold hover:bg-emerald-500/20 transition",children:"Download"}),r.jsx("button",{onClick:()=>q(w),className:"px-3 py-2 rounded-lg border border-white/15 bg-white/5 text-slate-200 text-sm font-semibold hover:bg-white/10 transition",children:"Editar"}),r.jsx("button",{onClick:()=>B(w._id),className:"px-3 py-2 rounded-lg border border-red-500/50 bg-red-500/10 text-red-300 text-sm font-semibold hover:bg-red-500/20 transition",children:"Excluir"})]})]},w._id)})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Documentos e Contratos"}),r.jsx("p",{className:"text-sm text-slate-300 mt-1",children:"Acesso restrito a administradores"})]}),r.jsxs("div",{className:"rounded-2xl border border-red-500/20 bg-red-500/10 p-12 text-center",children:[r.jsx("div",{className:"text-red-300 font-semibold mb-2",children:"Acesso Negado"}),r.jsx("p",{className:"text-slate-300",children:"Voc no tem permisso para acessar esta pgina. Apenas administradores podem visualizar e gerenciar documentos."})]})]})}const Qc={create:"Criar",update:"Atualizar",delete:"Excluir",view:"Visualizar",download:"Download",login:"Login",logout:"Logout",upload:"Upload",other:"Outro"},Yc={document:"Documento",user:"Usurio",client:"Cliente",job:"Ordem de Servio",employee:"Funcionrio",team:"Equipe",machine:"Mquina",equipment:"Equipamento",transaction:"Transao",cashier:"Caixa",file:"Arquivo",other:"Outro"};function Sw(){const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,l]=p.useState({resource:"",action:"",userId:""});p.useEffect(()=>{o()},[n]);const o=async()=>{try{a(!0);const d=new URLSearchParams;n.resource&&d.append("resource",n.resource),n.action&&d.append("action",n.action),n.userId&&d.append("userId",n.userId);const m=await le(`/audit?${d.toString()}`),L=await m.json().catch(()=>null);m.ok&&(L!=null&&L.data)&&t(L.data)}catch(d){console.error(d)}finally{a(!1)}},c=d=>{if(!d)return"-";const m=new Date(d);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(m)};return s?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando logs de auditoria..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Auditoria"}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Registro de todas as aes realizadas no sistema"})]})}),r.jsx("div",{className:"rounded-xl border border-white/10 bg-slate-900/50 p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Recurso"}),r.jsxs("select",{value:n.resource,onChange:d=>l(m=>({...m,resource:d.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[r.jsx("option",{value:"",children:"Todos"}),Object.entries(Yc).map(([d,m])=>r.jsx("option",{value:d,children:m},d))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ao"}),r.jsxs("select",{value:n.action,onChange:d=>l(m=>({...m,action:d.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[r.jsx("option",{value:"",children:"Todas"}),Object.entries(Qc).map(([d,m])=>r.jsx("option",{value:d,children:m},d))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Usurio"}),r.jsx("input",{type:"text",value:n.userId,onChange:d=>l(m=>({...m,userId:d.target.value})),placeholder:"ID do usurio...",className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/50 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]})]})}),r.jsx("div",{className:"rounded-xl border border-white/10 bg-slate-900/50 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-800/50 border-b border-white/10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Data/Hora"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Usurio"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Ao"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Recurso"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Detalhes"})]})}),r.jsx("tbody",{className:"divide-y divide-white/10",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-400",children:"Nenhum log de auditoria encontrado"})}):e.map(d=>{var m;return r.jsxs("tr",{className:"hover:bg-slate-800/30 transition",children:[r.jsx("td",{className:"px-4 py-3 text-sm text-slate-300 whitespace-nowrap",children:c(d.createdAt)}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-300",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:d.userName||d.userEmail||"-"}),d.userEmail&&d.userName&&r.jsx("div",{className:"text-xs text-slate-400",children:d.userEmail})]})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${d.action==="create"?"bg-emerald-500/20 text-emerald-300":d.action==="update"?"bg-blue-500/20 text-blue-300":d.action==="delete"?"bg-red-500/20 text-red-300":d.action==="download"||d.action==="view"?"bg-purple-500/20 text-purple-300":"bg-slate-500/20 text-slate-300"}`,children:Qc[d.action]||d.action})}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-300",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:Yc[d.resource]||d.resource}),d.resourceName&&r.jsx("div",{className:"text-xs text-slate-400 truncate max-w-xs",children:d.resourceName})]})}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:r.jsx("div",{className:"max-w-md truncate",title:d.details,children:d.details||"-"})})]},(m=d._id)==null?void 0:m.toString())})})]})})})]})}function hd({onSave:e,initialSignature:t,width:s=400,height:a=200}){const n=p.useRef(null),[l,o]=p.useState(!1),[c,d]=p.useState(!!t),[m,L]=p.useState(s),x=()=>{const f=n.current;if(!f)return;const u=f.getContext("2d");if(!u)return;const N=f.parentElement,T=N?N.clientWidth-16:s,J=Math.max(T,s);L(J),f.style.width="100%",f.style.height=`${a}px`;const z=window.devicePixelRatio||1;if(f.width=J*z,f.height=a*z,u.scale(z,z),u.strokeStyle="#000000",u.fillStyle="#ffffff",u.lineWidth=2.5,u.lineCap="round",u.lineJoin="round",u.fillRect(0,0,J,a),t){const I=new Image;I.onload=()=>{u.drawImage(I,0,0,J,a),d(!0)},I.src=t}};p.useEffect(()=>{x();const f=()=>{x()};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[t,s,a]);const y=f=>{f.preventDefault(),o(!0);const u=n.current;if(!u)return;const N=u.getContext("2d");if(!N)return;const T=u.getBoundingClientRect(),J=("touches"in f?f.touches[0].clientX:f.clientX)-T.left,z=("touches"in f?f.touches[0].clientY:f.clientY)-T.top;N.beginPath(),N.moveTo(J,z),d(!0)},$=f=>{if(!l)return;f.preventDefault();const u=n.current;if(!u)return;const N=u.getContext("2d");if(!N)return;const T=u.getBoundingClientRect(),J=("touches"in f?f.touches[0].clientX:f.clientX)-T.left,z=("touches"in f?f.touches[0].clientY:f.clientY)-T.top;N.lineTo(J,z),N.stroke()},Y=()=>{o(!1)},G=()=>{const f=n.current;if(!f)return;const u=f.getContext("2d");u&&(u.clearRect(0,0,f.width,f.height),u.fillStyle="#ffffff",u.fillRect(0,0,m,a),u.strokeStyle="#000000",d(!1))},M=()=>{const f=n.current;if(!f)return;const u=f.toDataURL("image/png");e(u)};return r.jsxs("div",{className:"space-y-3 w-full",children:[r.jsx("div",{className:"rounded-lg border-2 border-slate-400/50 bg-white p-2 w-full",children:r.jsx("canvas",{ref:n,onMouseDown:y,onMouseMove:$,onMouseUp:Y,onMouseLeave:Y,onTouchStart:y,onTouchMove:$,onTouchEnd:Y,className:"cursor-crosshair touch-none rounded border border-slate-300 w-full",style:{width:"100%",height:`${a}px`,maxWidth:"100%",display:"block"}})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:G,className:"flex-1 rounded-lg border border-red-400/50 bg-red-500/20 px-3 py-2 text-xs font-semibold text-red-300 transition hover:border-red-400 hover:bg-red-500/30",children:"Limpar"}),r.jsx("button",{type:"button",onClick:M,disabled:!c,className:"flex-1 rounded-lg border border-emerald-400/50 bg-emerald-500/20 px-3 py-2 text-xs font-semibold text-emerald-300 transition hover:border-emerald-400 hover:bg-emerald-500/30 disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar Assinatura"})]})]})}const kw=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];function Ew(){const{user:e}=zr(),s=((e==null?void 0:e.role)||"user")==="admin",[a,n]=p.useState(!0),[l,o]=p.useState(!1),[c,d]=p.useState([]),[m,L]=p.useState(!1),[x,y]=p.useState("list"),[$,Y]=p.useState(null),[G,M]=p.useState({name:"",email:"",password:"",role:"user",active:!0}),[f,u]=p.useState([]),[N,T]=p.useState("list"),[J,z]=p.useState(null),[I,O]=p.useState({upToKm:"",pricePerKm:"",fixedPrice:"",type:"per_km",description:"",roundTrip:!0,order:0}),[U,E]=p.useState({companyName:"",headquartersAddress:"",headquartersStreet:"",headquartersNumber:"",headquartersNeighborhood:"",headquartersCity:"",headquartersState:"",headquartersZip:"",phone:"",email:"",companySignature:""});p.useEffect(()=>{(async()=>{try{const H=await le("/settings",{cache:"no-store"}),te=await H.json().catch(()=>null);H.ok&&(te!=null&&te.data)&&E({companyName:te.data.companyName||"",headquartersAddress:te.data.headquartersAddress||"",headquartersStreet:te.data.headquartersStreet||"",headquartersNumber:te.data.headquartersNumber||"",headquartersNeighborhood:te.data.headquartersNeighborhood||"",headquartersCity:te.data.headquartersCity||"",headquartersState:te.data.headquartersState||"",headquartersZip:te.data.headquartersZip||"",phone:te.data.phone||"",email:te.data.email||"",companySignature:te.data.companySignature||""})}catch(H){console.error(H)}finally{n(!1)}})()},[]),p.useEffect(()=>{s&&(Q(),B())},[s]);const Q=async()=>{try{L(!0);const C=await le("/users",{cache:"no-store"}),H=await C.json().catch(()=>null);C.ok&&(H!=null&&H.data)?d(Array.isArray(H.data)?H.data:[]):C.ok||(console.warn("Failed to load users:",(H==null?void 0:H.error)||"Backend not available"),d([]))}catch(C){console.error("Error loading users:",C),d([])}finally{L(!1)}},W=async()=>{if(!l){if(!U.headquartersAddress&&!U.headquartersStreet){k.fire("Ateno","Informe pelo menos o endereo da sede.","warning");return}try{o(!0);const C=await le("/settings",{method:"PUT",body:JSON.stringify(U)}),H=await C.json().catch(()=>null);if(!C.ok){k.fire("Erro",(H==null?void 0:H.error)||"No foi possvel salvar as configuraes.","error");return}k.fire("Sucesso","Configuraes salvas com sucesso.","success")}catch(C){console.error(C),k.fire("Erro","Falha ao salvar configuraes.","error")}finally{o(!1)}}},Z=async()=>{if(!l){if(!G.name.trim()||!G.email.trim()){k.fire("Ateno","Preencha nome e email.","warning");return}if(!$&&!G.password){k.fire("Ateno","Informe uma senha para o novo usurio.","warning");return}try{o(!0);const C={name:G.name.trim(),email:G.email.trim(),role:G.role,active:G.active};G.password&&(C.password=G.password);const H=$?await le(`/users/${$}`,{method:"PUT",body:JSON.stringify(C)}):await le("/users",{method:"POST",body:JSON.stringify(C)}),te=await H.json().catch(()=>null);if(!H.ok){k.fire("Erro",(te==null?void 0:te.error)||"No foi possvel salvar usurio.","error");return}k.fire("Sucesso",$?"Usurio atualizado com sucesso.":"Usurio criado com sucesso.","success"),K(),Q()}catch(C){console.error(C),k.fire("Erro","Falha ao salvar usurio.","error")}finally{o(!1)}}},K=()=>{M({name:"",email:"",password:"",role:"user",active:!0}),Y(null),y("list")},v=C=>{M({name:C.name||"",email:C.email||"",password:"",role:C.role||"user",active:C.active!==void 0?C.active:!0}),Y(C._id),y("form")},q=async C=>{if((await k.fire({title:"Confirmar excluso",text:"Deseja realmente excluir este usurio?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sim, excluir",cancelButtonText:"Cancelar"})).isConfirmed)try{const te=await le(`/users/${C}`,{method:"DELETE"});if(!te.ok){const i=await te.json().catch(()=>null);k.fire("Erro",(i==null?void 0:i.error)||"No foi possvel excluir usurio.","error");return}d(i=>i.filter(P=>P._id!==C)),k.fire("Sucesso","Usurio excludo com sucesso.","success")}catch(te){console.error(te),k.fire("Erro","Falha ao excluir usurio.","error")}},B=async()=>{try{const C=await le("/travel-pricing",{cache:"no-store"}),H=await C.json().catch(()=>null);C.ok&&(H!=null&&H.data)&&u(Array.isArray(H.data)?H.data:[])}catch(C){console.error("Error loading travel pricings:",C),u([])}},b=async()=>{if(!l){if(!I.description.trim()){k.fire("Ateno","Informe uma descrio.","warning");return}if(I.type==="per_km"&&!I.pricePerKm){k.fire("Ateno","Informe o preo por km.","warning");return}if(I.type==="fixed"&&!I.fixedPrice){k.fire("Ateno","Informe o preo fixo.","warning");return}try{o(!0);const C={description:I.description.trim(),type:I.type,roundTrip:I.roundTrip,order:I.order};I.upToKm&&I.upToKm.trim()!==""?C.upToKm=parseFloat(I.upToKm):C.upToKm=null,I.type==="per_km"&&I.pricePerKm&&(C.pricePerKm=parseFloat(I.pricePerKm)),I.type==="fixed"&&I.fixedPrice&&(C.fixedPrice=parseFloat(I.fixedPrice));const H=J?await le(`/travel-pricing/${J}`,{method:"PUT",body:JSON.stringify(C)}):await le("/travel-pricing",{method:"POST",body:JSON.stringify(C)}),te=await H.json().catch(()=>null);if(!H.ok){k.fire("Erro",(te==null?void 0:te.error)||"No foi possvel salvar preo.","error");return}k.fire("Sucesso",J?"Preo atualizado com sucesso.":"Preo criado com sucesso.","success"),w(),B()}catch(C){console.error(C),k.fire("Erro","Falha ao salvar preo.","error")}finally{o(!1)}}},w=()=>{O({upToKm:"",pricePerKm:"",fixedPrice:"",type:"per_km",description:"",roundTrip:!0,order:0}),z(null),T("list")},F=C=>{O({upToKm:C.upToKm?C.upToKm.toString():"",pricePerKm:C.pricePerKm?C.pricePerKm.toString():"",fixedPrice:C.fixedPrice?C.fixedPrice.toString():"",type:C.type||"per_km",description:C.description||"",roundTrip:C.roundTrip!==void 0?C.roundTrip:!0,order:C.order||0}),z(C._id),T("form")},R=async C=>{if((await k.fire({title:"Confirmar excluso",text:"Deseja realmente excluir este preo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Sim, excluir",cancelButtonText:"Cancelar"})).isConfirmed)try{const te=await le(`/travel-pricing/${C}`,{method:"DELETE"});if(!te.ok){const i=await te.json().catch(()=>null);k.fire("Erro",(i==null?void 0:i.error)||"No foi possvel excluir preo.","error");return}u(i=>i.filter(P=>P._id!==C)),k.fire("Sucesso","Preo excludo com sucesso.","success")}catch(te){console.error(te),k.fire("Erro","Falha ao excluir preo.","error")}};return a?r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando configuraes..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Configuraes"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Configure as informaes da empresa e gerencie usurios do sistema."})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Informaes da Empresa"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Configure os dados da empresa Reis Fundaes."})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Nome da Empresa"}),r.jsx("input",{value:U.companyName,onChange:C=>E(H=>({...H,companyName:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Reis Fundaes"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Telefone"}),r.jsx("input",{value:U.phone,onChange:C=>E(H=>({...H,phone:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"(XX) XXXXX-XXXX"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"E-mail"}),r.jsx("input",{type:"email",value:U.email,onChange:C=>E(H=>({...H,email:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"contato@reisfundacoes.com"})]})]})]}),r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Endereo da Sede"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Configure o endereo completo da sede. Este endereo ser usado como ponto de partida para clculo de rotas."})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Endereo Completo *"}),r.jsx("input",{value:U.headquartersAddress,onChange:C=>E(H=>({...H,headquartersAddress:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: Avenida Principal, 123 - Centro, Cidade - UF, CEP"}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Endereo completo da sede (ser usado para clculo de rotas)"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Rua"}),r.jsx("input",{value:U.headquartersStreet,onChange:C=>E(H=>({...H,headquartersStreet:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Nome da rua"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Nmero"}),r.jsx("input",{value:U.headquartersNumber,onChange:C=>E(H=>({...H,headquartersNumber:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"123"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Bairro"}),r.jsx("input",{value:U.headquartersNeighborhood,onChange:C=>E(H=>({...H,headquartersNeighborhood:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Centro"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Cidade"}),r.jsx("input",{value:U.headquartersCity,onChange:C=>E(H=>({...H,headquartersCity:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Nome da cidade"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Estado"}),r.jsxs("select",{value:U.headquartersState,onChange:C=>E(H=>({...H,headquartersState:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"",children:"Selecione"}),kw.map(C=>r.jsx("option",{value:C,children:C},C))]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"CEP"}),r.jsx("input",{value:U.headquartersZip,onChange:C=>E(H=>({...H,headquartersZip:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"00000-000"})]})]}),r.jsxs("div",{className:"mt-6 space-y-3 md:col-span-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-slate-200 text-sm font-semibold",children:"Assinatura da Empresa"}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Esta assinatura ser usada em PDFs de Ordens de Servio, Contratos e outros documentos."})]}),U.companySignature?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 p-3",children:[r.jsx("div",{className:"text-xs text-emerald-300 mb-2",children:" Assinatura da empresa configurada"}),r.jsx("img",{src:U.companySignature,alt:"Assinatura da empresa",className:"w-full max-w-md mx-auto border border-white/20 rounded bg-white"})]}),r.jsx("button",{type:"button",onClick:()=>E(C=>({...C,companySignature:""})),className:"w-full rounded-lg border border-yellow-400/50 bg-yellow-500/20 px-3 py-2 text-xs font-semibold text-yellow-300 transition hover:border-yellow-400 hover:bg-yellow-500/30",children:"Alterar Assinatura"})]}):r.jsx("div",{className:"w-full",children:r.jsx(hd,{onSave:C=>E(H=>({...H,companySignature:C})),width:400,height:200})})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:W,disabled:l,className:"rounded-lg bg-gradient-to-r from-blue-500 to-emerald-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-blue-600 hover:to-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:l?"Salvando...":"Salvar Configuraes"})}),s&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Gerenciar Usurios"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Crie e gerencie usurios do sistema. Apenas administradores podem acessar documentos."})]}),x==="list"&&r.jsx("button",{onClick:()=>y("form"),className:"px-4 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition",children:"+ Novo Usurio"})]}),x==="form"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Nome ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"text",value:G.name,onChange:C=>M(H=>({...H,name:C.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/60 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Nome completo"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Email ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"email",value:G.email,onChange:C=>M(H=>({...H,email:C.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/60 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"usuario@exemplo.com"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[$?"Nova Senha (deixe em branco para manter)":"Senha"," ",!$&&r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"password",value:G.password,onChange:C=>M(H=>({...H,password:C.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/60 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",placeholder:"Mnimo 6 caracteres"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Funo"}),r.jsxs("select",{value:G.role,onChange:C=>M(H=>({...H,role:C.target.value})),className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-slate-900/60 text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[r.jsx("option",{value:"user",children:"Usurio"}),r.jsx("option",{value:"admin",children:"Administrador"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"user-active",checked:G.active,onChange:C=>M(H=>({...H,active:C.target.checked})),className:"w-4 h-4 rounded border-white/10 bg-slate-900/60 text-emerald-500 focus:ring-emerald-500/50"}),r.jsx("label",{htmlFor:"user-active",className:"text-sm text-slate-300",children:"Usurio ativo"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:Z,disabled:l,className:"px-6 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 disabled:opacity-50 transition",children:l?"Salvando...":$?"Atualizar":"Criar Usurio"}),r.jsx("button",{onClick:K,className:"px-6 py-2 rounded-lg border border-white/15 bg-white/5 text-slate-200 font-semibold hover:bg-white/10 transition",children:"Cancelar"})]})]}):r.jsx("div",{className:"space-y-3",children:m?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando usurios..."})]}):c.length===0?r.jsx("p",{className:"text-slate-300 text-center py-8",children:"Nenhum usurio cadastrado."}):r.jsx("div",{className:"space-y-2",children:c.map(C=>{const H=C._id===(e==null?void 0:e.id);return r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-white/10 bg-slate-900/30",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-semibold text-white",children:C.name}),H&&r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/50",children:"Voc"}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C.role==="admin"?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/50":"bg-slate-500/20 text-slate-300 border border-slate-500/50"}`,children:C.role==="admin"?"Admin":"Usurio"}),!C.active&&r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-red-500/20 text-red-300 border border-red-500/50",children:"Inativo"})]}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:C.email})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>v(C),className:"px-3 py-1.5 rounded-lg border border-white/15 bg-white/5 text-slate-200 text-sm font-semibold hover:bg-white/10 transition",children:"Editar"}),H?r.jsx("button",{disabled:!0,className:"px-3 py-1.5 rounded-lg border border-slate-500/30 bg-slate-500/10 text-slate-500 text-sm font-semibold cursor-not-allowed opacity-50",title:"Voc no pode excluir seu prprio usurio",children:"Excluir"}):r.jsx("button",{onClick:()=>q(C._id),className:"px-3 py-1.5 rounded-lg border border-red-500/50 bg-red-500/10 text-red-300 text-sm font-semibold hover:bg-red-500/20 transition",children:"Excluir"})]})]},C._id)})})})]}),s&&r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:" Preos de Deslocamento"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Configure os preos de deslocamento padro com base na distncia."})]}),N==="list"&&r.jsx("button",{onClick:()=>T("form"),className:"px-4 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition",children:"+ Novo Preo"})]}),N==="form"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsx("label",{className:"text-slate-200",children:"Descrio *"}),r.jsx("input",{value:I.description,onChange:C=>O(H=>({...H,description:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: At 50km, Acima de 100km, Deslocamento padro, etc."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Tipo de Preo *"}),r.jsxs("select",{value:I.type,onChange:C=>O(H=>({...H,type:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",children:[r.jsx("option",{value:"per_km",children:"Por Km"}),r.jsx("option",{value:"fixed",children:"Preo Fixo"})]})]}),r.jsxs("div",{className:"space-y-1 text-sm md:col-span-2",children:[r.jsxs("label",{className:"text-slate-200 flex items-center gap-2",children:["At (Km)",I.type==="fixed"&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-500/20 text-blue-300 border border-blue-500/50",children:"Opcional"})]}),r.jsx("input",{type:"number",value:I.upToKm,onChange:C=>O(H=>({...H,upToKm:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:I.type==="fixed"?"Deixe vazio para aplicar a qualquer distncia":"Ex: 50, 100, etc.",min:"0"}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:I.type==="fixed"?" Deixe vazio para criar um preo fixo vlido para qualquer quilometragem":"Ex: 50 (at 50km), 100 (at 100km), ou deixe vazio para acima de X km"})]}),I.type==="per_km"&&r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Preo por Km (R$) *"}),r.jsx("input",{type:"number",value:I.pricePerKm,onChange:C=>O(H=>({...H,pricePerKm:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 3.50",step:"0.01",min:"0"})]}),I.type==="fixed"&&r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Preo Fixo (R$) *"}),r.jsx("input",{type:"number",value:I.fixedPrice,onChange:C=>O(H=>({...H,fixedPrice:C.target.value})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Ex: 350.00",step:"0.01",min:"0"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"text-slate-200",children:"Ordem"}),r.jsx("input",{type:"number",value:I.order,onChange:C=>O(H=>({...H,order:parseInt(C.target.value)||0})),className:"w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"0",min:"0"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",id:"roundTrip",checked:I.roundTrip,onChange:C=>O(H=>({...H,roundTrip:C.target.checked})),className:"w-4 h-4 rounded border border-white/10 bg-slate-900/60"}),r.jsx("label",{htmlFor:"roundTrip",className:"text-slate-200 cursor-pointer",children:"Ida e Volta"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[r.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 rounded-lg border border-white/10 bg-slate-900/60 text-slate-200 font-semibold hover:bg-slate-800/60 transition",disabled:l,children:"Cancelar"}),r.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 rounded-lg bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition disabled:opacity-50",disabled:l,children:l?"Salvando...":J?"Atualizar":"Salvar"})]})]}):r.jsx("div",{children:f.length===0?r.jsx("p",{className:"text-slate-300 text-center py-8",children:"Nenhum preo de deslocamento cadastrado."}):r.jsx("div",{className:"space-y-2",children:f.map(C=>{var H,te;return r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-white/10 bg-slate-900/30",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-white",children:C.description}),C.roundTrip&&r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/50",children:"Ida e Volta"})]}),r.jsx("div",{className:"text-sm text-slate-400",children:C.type==="per_km"?r.jsxs(r.Fragment,{children:[C.upToKm?`At ${C.upToKm}km`:"Acima de X km"," ",r.jsxs("span",{className:"text-emerald-300 font-semibold ml-1",children:["R$ ",(H=C.pricePerKm)==null?void 0:H.toFixed(2),"/km"]})]}):r.jsxs(r.Fragment,{children:[C.upToKm?`At ${C.upToKm}km`:r.jsx("span",{className:"text-blue-300 font-medium",children:"Qualquer distncia"})," ",r.jsxs("span",{className:"text-emerald-300 font-semibold ml-1",children:["R$ ",(te=C.fixedPrice)==null?void 0:te.toFixed(2)," (fixo)"]})]})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>F(C),className:"px-3 py-1 rounded text-xs font-semibold border border-yellow-500/50 bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/30 transition",children:"Editar"}),r.jsx("button",{onClick:()=>R(C._id),className:"px-3 py-1 rounded text-xs font-semibold border border-red-500/50 bg-red-500/20 text-red-300 hover:bg-red-500/30 transition",children:"Excluir"})]})]},C._id)})})})]})]})}function Tw({origin:e,destination:t,jobTitle:s}){var B;const a=p.useRef(null),n=p.useRef(null),l=p.useRef(null),o=p.useRef(null),c=p.useRef([]),[d,m]=p.useState(!0),[L,x]=p.useState(null),[y,$]=p.useState([]),[Y,G]=p.useState(""),[M,f]=p.useState(""),[u,N]=p.useState(0),[T,J]=p.useState(""),[z,I]=p.useState(""),[O,U]=p.useState(!1),[E,Q]=p.useState(0),W=p.useRef(null),Z=p.useRef([]),K="AIzaSyAUoyCSevBWa4CkeDcBuYd-R0mbR2NtpIs",v=()=>{if(!a.current||!window.google||!window.google.maps){console.error("Mapa ou Google Maps no disponvel");return}try{const b=new window.google.maps.Map(a.current,{zoom:8,center:{lat:-15.7942,lng:-47.8822},mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});n.current=b;const w=new window.google.maps.DirectionsService,F=new window.google.maps.DirectionsRenderer({map:b,suppressMarkers:!0,polylineOptions:{strokeColor:"#10b981",strokeWeight:6,strokeOpacity:.9},preserveViewport:!1});l.current=w,o.current=F,q(w,F,b)}catch(b){console.error("Erro ao inicializar mapa:",b),x(`Erro ao inicializar mapa: ${b.message}`),m(!1)}},q=(b,w,F)=>{if(!e||!t){x("Origem ou destino no informado"),m(!1);return}b.route({origin:e,destination:t,travelMode:window.google.maps.TravelMode.DRIVING},(R,C)=>{if(C==="OK"){w.setDirections(R);const te=R.routes[0].legs[0],i=[];te.steps.forEach(j=>{j.path.forEach(S=>{i.push({lat:S.lat(),lng:S.lng()})})}),Z.current=i,G(te.distance.text),f(te.duration.text),c.current=te.steps.map(j=>({distance:j.distance.value,duration:j.duration.value}));let P=0,g=0;c.current.forEach(j=>{P+=j.distance,g+=j.duration});const A=P/1e3,D=A>=1?`${A.toFixed(1)} km`:`${Math.round(P)} m`,V=Math.floor(g/3600),X=Math.floor(g%3600/60),ne=V>0?`${V}h ${X}min`:`${X}min`;J(D),I(ne);const h=te.steps.map(j=>({instruction:j.instructions.replace(/<[^>]*>/g,""),distance:j.distance.text,duration:j.duration.text,maneuver:j.maneuver||""}));$(h);const _=new window.google.maps.LatLngBounds;R.routes[0].legs.forEach(j=>{_.extend(j.start_location),_.extend(j.end_location)}),F.fitBounds(_);const ee=window.google.maps.event.addListener(F,"bounds_changed",()=>{F.getZoom()&&F.getZoom()>15&&F.setZoom(15),window.google.maps.event.removeListener(ee)});m(!1)}else console.error("Erro ao traar rota:",C),x(`No foi possvel traar a rota: ${C}`),m(!1)})};return p.useEffect(()=>{(F=>{let R=0;const C=50,H=setInterval(()=>{R++,a.current?(clearInterval(H),F()):R>=C&&(clearInterval(H),x("Elemento do mapa no foi encontrado."),m(!1))},100)})(()=>{if(window.google&&window.google.maps&&typeof window.google.maps.Map=="function"){v();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){let C=0;const H=100,te=setInterval(()=>{C++,window.google&&window.google.maps&&typeof window.google.maps.Map=="function"?(clearInterval(te),v()):C>=H&&(clearInterval(te),x("Timeout ao carregar Google Maps."),m(!1))},100);return()=>clearInterval(te)}const R=document.createElement("script");R.src=`https://maps.googleapis.com/maps/api/js?key=${K}&libraries=places,geometry`,R.async=!0,R.defer=!0,R.onload=()=>{setTimeout(()=>{v()},500)},R.onerror=()=>{x("Falha ao carregar Google Maps. Verifique sua conexo."),m(!1)},document.head.appendChild(R)})},[]),p.useEffect(()=>{l.current&&o.current&&n.current&&e&&t&&q(l.current,o.current,n.current)},[e,t]),p.useEffect(()=>{if(c.current.length>0&&u<c.current.length){let b=0,w=0;for(let i=u;i<c.current.length;i++)b+=c.current[i].distance,w+=c.current[i].duration;const F=b/1e3,R=F>=1?`${F.toFixed(1)} km`:`${Math.round(b)} m`,C=Math.floor(w/3600),H=Math.floor(w%3600/60),te=C>0?`${C}h ${H}min`:`${H}min`;J(R),I(te)}},[u]),r.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[!d&&!L&&y.length>0&&O&&r.jsxs("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-white/10 px-4 py-3 z-30",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-300 mb-1",children:"Prxima Manobra"}),r.jsx("div",{className:"text-lg sm:text-xl font-bold text-white leading-tight",children:((B=y[u])==null?void 0:B.instruction)||"Siga em frente"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-emerald-500/20 border border-emerald-400/30 rounded-lg px-3 py-2",children:[r.jsx("div",{className:"text-xs text-emerald-300 mb-1",children:"Distncia Restante"}),r.jsx("div",{className:"text-xl font-bold text-white",children:T})]}),r.jsxs("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg px-3 py-2",children:[r.jsx("div",{className:"text-xs text-blue-300 mb-1",children:"Tempo Restante"}),r.jsx("div",{className:"text-xl font-bold text-white",children:z})]})]}),r.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-slate-400",children:[r.jsxs("span",{children:["Total: ",Y,"  ",M]}),r.jsxs("span",{children:["Passo ",u+1," de ",y.length]})]})]}),r.jsxs("div",{className:"relative flex-1 min-h-0 rounded-lg border border-white/10 overflow-hidden bg-slate-800",children:[r.jsx("div",{ref:a,className:"w-full h-full"}),!d&&!L&&y.length>0&&O&&r.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 z-20 flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>{const b=Math.max(0,u-1);if(N(b),W.current&&Z.current.length>0){const w=Math.floor(b/y.length*Z.current.length),F=Z.current[Math.min(w,Z.current.length-1)];W.current.setPosition(F),n.current&&(n.current.setCenter(F),n.current.setZoom(16))}},disabled:u===0,className:"rounded-full bg-white/90 hover:bg-white shadow-lg p-2 disabled:opacity-40 disabled:cursor-not-allowed transition",title:"Instruo anterior",children:r.jsx("svg",{className:"w-5 h-5 text-slate-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),r.jsx("button",{onClick:()=>{const b=Math.min(y.length-1,u+1);if(N(b),W.current&&Z.current.length>0){const w=Math.floor(b/y.length*Z.current.length),F=Z.current[Math.min(w,Z.current.length-1)];W.current.setPosition(F),n.current&&(n.current.setCenter(F),n.current.setZoom(16))}},disabled:u===y.length-1,className:"rounded-full bg-white/90 hover:bg-white shadow-lg p-2 disabled:opacity-40 disabled:cursor-not-allowed transition",title:"Prxima instruo",children:r.jsx("svg",{className:"w-5 h-5 text-slate-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),d&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando rota..."})]})}),L&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-10",children:r.jsxs("div",{className:"text-center text-slate-300 px-4",children:[r.jsx("p",{className:"text-sm mb-4",children:L}),r.jsx("button",{onClick:()=>window.location.reload(),className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-600",children:"Recarregar"})]})})]}),!d&&!L&&y.length>0&&!O&&r.jsx("div",{className:"mt-3 px-4 py-3 bg-slate-900/95 border-t border-white/10",children:r.jsxs("button",{onClick:()=>{if(U(!0),Z.current.length>0&&n.current&&!W.current){const b={path:window.google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:6,fillColor:"#3b82f6",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2,rotation:0};W.current=new window.google.maps.Marker({position:Z.current[0],map:n.current,icon:b,zIndex:1e3,title:"Seu veculo"}),n.current.setCenter(Z.current[0]),n.current.setZoom(16)}},className:"w-full rounded-lg bg-gradient-to-r from-emerald-500 to-blue-500 px-4 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-500/40 transition hover:from-emerald-600 hover:to-blue-600 flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Iniciar Rota"]})})]})}const Pw=[{value:"dinheiro",label:"Dinheiro"},{value:"pix",label:"PIX"},{value:"transferencia",label:"Transferncia"},{value:"cartao",label:"Carto"},{value:"cheque",label:"Cheque"},{value:"outro",label:"Outro"}],Hr={pin:r.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M12 21s-6-5.3-6-10a6 6 0 1 1 12 0c0 4.7-6 10-6 10Z"}),r.jsx("circle",{cx:"12",cy:"11",r:"2"})]}),clock:r.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]}),check:r.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"m5 13 4 4L19 7"})}),home:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"m3 11 9-8 9 8"}),r.jsx("path",{d:"M4 10v10h5v-6h6v6h5V10"})]}),ops:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"14",rx:"2"}),r.jsx("path",{d:"M3 10h18"}),r.jsx("path",{d:"M8 16h.01M12 16h.01M16 16h.01"})]}),exit:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M15 3h4v18h-4"}),r.jsx("path",{d:"M10 17 15 12 10 7"}),r.jsx("path",{d:"M15 12H3"})]})};function Aw(){var V,X,ne;const{token:e}=Zi();if(!e)return r.jsx("div",{children:"Token no encontrado"});const[t,s]=p.useState(""),[a,n]=p.useState(!0),[l,o]=p.useState(null),[c,d]=p.useState("disponiveis"),[m,L]=p.useState(null),[x,y]=p.useState(null),[$,Y]=p.useState(!1),[G,M]=p.useState("ops"),[f,u]=p.useState(!0),[N,T]=p.useState(!1),[J,z]=p.useState(null),[I,O]=p.useState(""),[U,E]=p.useState([]),[Q,W]=p.useState("all"),Z=`ops-auth-${e}`,K=async(h,_)=>{const ee=_==null?void 0:_.silent;if(!h.trim()){ee||k.fire("Ateno","Informe a senha de acesso.","warning"),u(!1),n(!1);return}try{n(!0);const j=await le(`/operations/${e}`,{method:"POST",body:JSON.stringify({password:h})}),S=await j.json().catch(()=>null);if(!j.ok){localStorage.removeItem(Z),u(!1),ee||k.fire("Erro",(S==null?void 0:S.error)||"Link ou senha invlidos.","error");return}s(h),o(S.data),localStorage.setItem(Z,JSON.stringify({pass:h})),u(!1);try{const ae=await(await le("/cash",{cache:"no-store"})).json().catch(()=>null);ae!=null&&ae.data&&E(ae.data)}catch(re){console.error("Erro ao carregar transaes",re)}ee||k.fire("Liberado","Painel carregado.","success")}catch(j){console.error(j),u(!1),ee||k.fire("Erro","Falha ao autenticar.","error")}finally{n(!1)}},v=async()=>{await K(t)},q=p.useMemo(()=>(l==null?void 0:l.jobs)||[],[l]),B=p.useMemo(()=>{if(!l)return[];if(Q==="all")return q;const h=_=>{if(!_)return!0;try{const ee=new Date(_);if(isNaN(ee.getTime()))return!0;const j=new Date;j.setHours(0,0,0,0);const S=new Date(j);S.setDate(S.getDate()+1);const re=new Date(j);re.setDate(re.getDate()+7);const ae=new Date(j);ae.setMonth(ae.getMonth()+1);const oe=new Date(ee);switch(oe.setHours(0,0,0,0),Q){case"today":return oe.getTime()===j.getTime();case"tomorrow":return oe.getTime()===S.getTime();case"week":return oe>=j&&oe<=re;case"month":return oe>=j&&oe<=ae;default:return!0}}catch{return!0}};return q.filter(_=>h(_.plannedDate))},[q,Q,l]),b=p.useCallback(h=>{if(!h)return!0;try{const _=new Date(h);if(isNaN(_.getTime()))return!0;const ee=new Date;ee.setHours(0,0,0,0);const j=new Date(ee);j.setDate(j.getDate()+1);const S=new Date(ee);S.setDate(S.getDate()+7);const re=new Date(ee);re.setMonth(re.getMonth()+1);const ae=new Date(_);switch(ae.setHours(0,0,0,0),Q){case"today":return ae.getTime()===ee.getTime();case"tomorrow":return ae.getTime()===j.getTime();case"week":return ae>=ee&&ae<=S;case"month":return ae>=ee&&ae<=re;default:return!0}}catch{return!0}},[Q]),w=p.useMemo(()=>{if(!l)return[];let h=q;return c==="disponiveis"?h=h.filter(_=>_.status==="pendente"):c==="execucao"?h=h.filter(_=>_.status==="em_execucao"):c==="concluidas"&&(h=h.filter(_=>_.status==="concluida")),Q!=="all"&&(h=h.filter(_=>b(_.plannedDate))),h},[q,c,l,Q,b]),F=p.useMemo(()=>{const h={};return w.forEach(ee=>{let j="Sem data";if(ee.plannedDate)try{const S=new Date(ee.plannedDate);isNaN(S.getTime())||(j=S.toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),j=j.charAt(0).toUpperCase()+j.slice(1))}catch{}h[j]||(h[j]=[]),h[j].push(ee)}),Object.keys(h).sort((ee,j)=>{var S,re;if(ee==="Sem data")return 1;if(j==="Sem data")return-1;try{const ae=new Date(((S=ee.split(",")[1])==null?void 0:S.trim())||ee),oe=new Date(((re=j.split(",")[1])==null?void 0:re.trim())||j);return ae.getTime()-oe.getTime()}catch{return ee.localeCompare(j)}}).map(ee=>({date:ee,jobs:h[ee]}))},[w]),R=h=>h==="pendente"?"Pendente":h==="em_execucao"?"Em execuo":h==="concluida"?"Concluda":"Cancelada",C=async(h,_)=>{(await k.fire({title:`<div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center">
          <svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <span class="text-xl font-bold text-slate-800">Iniciar Servio</span>
      </div>`,html:`
        <div class="text-left space-y-4 mt-4">
          <p class="text-base text-slate-600 font-medium">Deseja iniciar este servio?</p>
          
          <div class="bg-gradient-to-br from-blue-50 to-indigo-50 border-l-4 border-blue-500 rounded-lg p-4 shadow-sm">
            <div class="flex items-start gap-3">
              <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-bold text-slate-900 mb-1 break-words">${_}</p>
                <p class="text-xs text-slate-600 leading-relaxed">O servio ser marcado como <span class="font-semibold text-blue-600">"Em execuo"</span> e o horrio de incio ser registrado automaticamente.</p>
              </div>
            </div>
          </div>

          <div class="flex items-center gap-2 text-xs text-slate-500 bg-slate-50 rounded-lg p-3">
            <svg class="w-4 h-4 flex-shrink-0 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>Voc poder marcar como concludo quando finalizar o trabalho.</span>
          </div>
        </div>
      `,showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#94a3b8",confirmButtonText:'<span class="px-2"> Sim, iniciar agora</span>',cancelButtonText:"Cancelar",customClass:{popup:"rounded-2xl shadow-2xl",title:"text-left pb-0",htmlContainer:"text-left",confirmButton:"rounded-lg font-semibold px-6 py-3 shadow-lg hover:shadow-xl transition-all",cancelButton:"rounded-lg font-semibold px-6 py-3 hover:bg-slate-200 transition-all"},buttonsStyling:!0})).isConfirmed&&await H(h,"em_execucao")},H=async(h,_)=>{if(!l)return;const ee=l.jobs.find(j=>j._id===h);ee==null||ee.status;try{L(h);const j={token:e,password:t,status:_},S=new Date().toISOString();_==="em_execucao"&&(j.startedAt=S),_==="concluida"&&(j.finishedAt=S);const re=await fetch(`/api/operations/jobs/${h}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),ae=await re.json().catch(()=>null);if(!re.ok){k.fire("Erro",(ae==null?void 0:ae.error)||"No foi possvel atualizar.","error");return}const oe=ae.data;o(ue=>ue&&{...ue,jobs:ue.jobs.map(pe=>pe._id===h?oe:pe)});let de;_==="pendente"?de="disponiveis":_==="em_execucao"?de="execucao":_==="concluida"?de="concluidas":de=c,d(de),y(oe),k.fire("Sucesso","Status atualizado.","success")}catch(j){console.error(j),k.fire("Erro","Falha ao atualizar.","error")}finally{L(null)}},te=h=>U.some(_=>_.jobId===h||_.jobId&&_.jobId.toString()===h.toString()),i=async h=>{var ee;if(h.status!=="concluida"){k.fire("Ateno","Apenas OS concludas podem ser marcadas como recebidas.","warning");return}if(te(h._id)){k.fire("Ateno","Esta OS j possui uma transao registrada.","info");return}if(h.received){k.fire("Ateno","Esta OS j foi marcada como recebida.","info");return}const _=await k.fire({title:"Confirmar Recebimento",html:`
        <div class="text-left" style="max-width: 500px;">
          <div class="mb-4 p-4 rounded-lg bg-emerald-50 border border-emerald-200">
            <div class="text-xs text-emerald-600 mb-1">Valor a Receber</div>
            <div class="text-2xl font-bold text-emerald-700">
              ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.finalValue||h.value||0)}
            </div>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Forma de Pagamento <span class="text-red-500">*</span>
            </label>
            <select 
              id="swal-payment-method" 
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"
              required
            >
              <option value="">Selecione a forma de pagamento...</option>
              ${Pw.map(j=>`<option value="${j.value}">${j.label}</option>`).join("")}
            </select>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Nmero do Recibo/Comprovante
              <span class="text-gray-400 text-xs font-normal">(opcional)</span>
            </label>
            <input 
              id="swal-receipt" 
              type="text" 
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"
              placeholder="Ex: 001234, COMP-2024-001, etc."
            >
          </div>
          
          <div class="mb-2">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Comprovante/Recibo (PDF, Foto, etc.)
              <span class="text-gray-400 text-xs font-normal">(opcional)</span>
            </label>
            <input 
              id="swal-receipt-file" 
              type="file" 
              accept=".pdf,.jpg,.jpeg,.png,.heic,.heif"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100"
            >
            <p class="mt-1 text-xs text-gray-500">Formatos aceitos: PDF, JPG, PNG, HEIC (mx. 50MB)</p>
          </div>
        </div>
      `,width:"600px",showCancelButton:!0,confirmButtonText:"Confirmar Recebimento",cancelButtonText:"Cancelar",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",title:"text-gray-800 text-xl font-semibold mb-4",htmlContainer:"text-gray-600",confirmButton:"px-6 py-2.5 rounded-lg font-medium",cancelButton:"px-6 py-2.5 rounded-lg font-medium"},preConfirm:async()=>{var oe;const j=document.getElementById("swal-payment-method"),S=document.getElementById("swal-receipt"),re=document.getElementById("swal-receipt-file");if(!(j!=null&&j.value))return k.showValidationMessage("Por favor, selecione a forma de pagamento"),j==null||j.focus(),!1;let ae;if(re!=null&&re.files&&re.files.length>0){const de=re.files[0];if(de.size>50*1024*1024)return k.showValidationMessage("O arquivo  muito grande. Tamanho mximo: 50MB"),!1;if(!["application/pdf","image/jpeg","image/jpg","image/png","image/heic","image/heif"].includes(de.type))return k.showValidationMessage("Tipo de arquivo no permitido. Use PDF, JPG, PNG ou HEIC"),!1;try{k.showLoading();const pe=new FormData;pe.append("file",de),pe.append("category","receipts"),pe.append("id",h._id);const Ge=await le("/files/upload",{method:"POST",headers:{},body:pe}),Fe=await Ge.json().catch(()=>null);if(!Ge.ok||!((oe=Fe==null?void 0:Fe.data)!=null&&oe.key))return k.showValidationMessage("Falha ao fazer upload do arquivo. Tente novamente."),!1;ae=Fe.data.key}catch(pe){return console.error("File upload error:",pe),k.showValidationMessage("Erro ao fazer upload do arquivo. Tente novamente."),!1}}return{paymentMethod:j.value,receipt:(S==null?void 0:S.value.trim())||void 0,receiptFileKey:ae}}});if(!(!_.isConfirmed||!_.value))try{L(h._id);const j=await le(`/jobs/${h._id}/received`,{method:"POST",body:JSON.stringify(_.value)}),S=await j.json().catch(()=>null);if(!j.ok){k.fire("Erro",(S==null?void 0:S.error)||"No foi possvel marcar como recebido.","error");return}const ae=await(await le("/cash",{cache:"no-store"})).json().catch(()=>null);ae!=null&&ae.data&&E(ae.data);const oe=(ee=ae==null?void 0:ae.data)==null?void 0:ee.some(de=>de.jobId===h._id||de.jobId&&de.jobId.toString()===h._id.toString());!oe&&(S!=null&&S.transaction)&&E(de=>[...de,S.transaction]),oe||S!=null&&S.transaction?(o(de=>de&&{...de,jobs:de.jobs.map(ue=>ue._id===h._id?{...ue,received:!0,receivedAt:new Date,receipt:_.value.receipt,receiptFileKey:_.value.receiptFileKey}:ue)}),x&&x._id===h._id&&y({...x,received:!0,receivedAt:new Date,receipt:_.value.receipt,receiptFileKey:_.value.receiptFileKey}),k.fire("Sucesso","OS marcada como recebida e transao criada no caixa.","success")):k.fire("Erro","Transao no foi criada. Job no foi marcado como recebido.","error")}catch(j){console.error(j),k.fire("Erro","Falha ao marcar como recebido.","error")}finally{L(null)}},P=async(h,_)=>{try{L(h);const ee=await le(`/jobs/${h}/signature`,{method:"POST",body:JSON.stringify({signature:_})});if(!ee.ok){const S=await ee.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(S.error||"Falha ao salvar assinatura")}const j=await ee.json();x&&x._id===h&&y({...x,clientSignature:_,clientSignedAt:new Date}),l&&o({...l,jobs:l.jobs.map(S=>S._id===h?{...S,clientSignature:_,clientSignedAt:new Date}:S)}),k.fire("Sucesso","Assinatura salva com sucesso.","success")}catch(ee){console.error(ee),k.fire("Erro",ee.message||"Falha ao salvar assinatura.","error")}finally{L(null)}},g=async h=>{try{const j=`${"https://gruporeis.cloud/api".replace("/api","")}/api/jobs/${h}/pdf`;window.open(j,"_blank")}catch(_){console.error(_),k.fire("Erro","Falha ao gerar PDF.","error")}},A=()=>{localStorage.removeItem(Z),o(null),s(""),y(null),M("ops")},D=async h=>{const _=h.site;if(!_&&(!h.siteLatitude||!h.siteLongitude)){k.fire("Erro","Endereo do servio no disponvel.","error");return}let ee;if(h.siteLatitude&&h.siteLongitude?ee=`${h.siteLatitude},${h.siteLongitude}`:ee=_.replace(/\s*\|\s*/g,", "),!navigator.geolocation){window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ee)}`,"_blank");return}k.fire({title:"Obtendo localizao...",html:`
        <p class="text-sm text-slate-600 mb-3">Aguarde enquanto obtemos sua localizao atual</p>
        <button
          id="skipLocationBtn"
          class="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm"
        >
          Pular e abrir Google Maps
        </button>
      `,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{k.showLoading();const S=document.getElementById("skipLocationBtn");S&&(S.onclick=()=>{k.close(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ee)}`,"_blank")})}});const j=(S,re,ae=0)=>new Promise((oe,de)=>{navigator.geolocation.getCurrentPosition(oe,de,{enableHighAccuracy:S,timeout:re,maximumAge:ae})});try{let S;try{console.log("Tentando obter localizao com alta preciso..."),S=await j(!0,15e3,0),console.log("Localizao obtida com alta preciso")}catch{console.log("Alta preciso falhou, tentando com preciso moderada...");try{S=await j(!1,1e4,0),console.log("Localizao obtida com preciso moderada")}catch{console.log("Preciso moderada falhou, usando localizao em cache..."),S=await j(!1,5e3,3e5),console.log("Localizao obtida do cache")}}const{latitude:re,longitude:ae}=S.coords,oe=`${re},${ae}`;k.close();const de=`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(oe)}&destination=${encodeURIComponent(ee)}&travelmode=driving`;window.open(de,"_blank")}catch(S){k.close();let re="No foi possvel obter sua localizao.",ae="";if(S.code)switch(S.code){case S.PERMISSION_DENIED:re="Permisso negada",ae="Por favor, permita o acesso  localizao nas configuraes do navegador.";break;case S.POSITION_UNAVAILABLE:re="Localizao indisponvel",ae="Verifique se o GPS est ativado e voc est em um local com boa recepo.";break;case S.TIMEOUT:re="Tempo esgotado",ae="No foi possvel obter sua localizao em tempo hbil. Tente novamente ou use o boto abaixo.";break}k.fire({title:"Erro ao obter localizao",html:`
          <div class="text-left space-y-3">
            <div class="p-3 bg-red-50 border border-red-200 rounded">
              <p class="text-sm font-semibold text-red-900 mb-1">${re}</p>
              <p class="text-xs text-red-700">${ae}</p>
            </div>
            
            <div class="mt-4 pt-3 border-t border-gray-200">
              <p class="text-xs text-gray-500 mb-3">
                Voc ainda pode abrir o destino no Google Maps:
              </p>
              <button
                onclick="window.open('https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ee)}', '_blank'); Swal.close();"
                class="w-full flex items-center justify-center gap-2 p-3 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition text-sm font-semibold"
              >
                <span class="text-xl"></span>
                <span>Abrir no Google Maps</span>
              </button>
            </div>
          </div>
        `,icon:"warning",width:500,showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"Pular",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-gray-600"}})}};return p.useEffect(()=>{o(null),y(null),s(""),u(!0),n(!0);try{const h=localStorage.getItem(Z);if(h){const _=JSON.parse(h);if(_!=null&&_.pass){K(_.pass,{silent:!0});return}}}catch(h){console.error(h)}u(!1),n(!1)},[e]),p.useEffect(()=>{(async()=>{var _;try{const ee=await le("/settings",{cache:"no-store"}),j=await ee.json().catch(()=>null);ee.ok&&((_=j==null?void 0:j.data)!=null&&_.headquartersAddress)&&O(j.data.headquartersAddress)}catch(ee){console.error(ee)}})()},[]),f||a?r.jsx("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-12 text-slate-100 flex items-center justify-center",style:{background:"radial-gradient(circle at 20% 20%, rgba(16,185,129,0.07), transparent 35%), radial-gradient(circle at 80% 0%, rgba(59,130,246,0.06), transparent 30%), #020617"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando..."})]})}):l?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-8 text-slate-100",style:{background:"radial-gradient(circle at 15% 10%, rgba(16,185,129,0.08), transparent 35%), radial-gradient(circle at 85% 15%, rgba(59,130,246,0.08), transparent 30%), #020617"},children:[r.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-6",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-200",children:"Equipe"}),r.jsx("div",{className:"text-2xl font-semibold text-white",children:(V=l.team)==null?void 0:V.name}),r.jsx("div",{className:"text-sm text-slate-300",children:"Painel pblico protegido. Atualize incio e concluso das OS atribudas."})]}),G==="home"?r.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:[{label:"Disponveis",value:B.filter(h=>h.status==="pendente").length},{label:"Em execuo",value:B.filter(h=>h.status==="em_execucao").length},{label:"Concludos",value:B.filter(h=>h.status==="concluida").length}].map(h=>r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-300",children:h.label}),r.jsx("div",{className:"mt-1 text-2xl font-semibold text-white",children:h.value})]},h.label))}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"Todas"},{key:"today",label:"Hoje"},{key:"tomorrow",label:"Amanh"},{key:"week",label:"Esta Semana"},{key:"month",label:"Este Ms"}].map(h=>r.jsx("button",{onClick:()=>W(h.key),className:`rounded-lg border px-3 py-2 text-xs font-semibold transition ${Q===h.key?"border-emerald-400/50 bg-emerald-500/20 text-emerald-300":"border-white/10 bg-white/5 text-slate-200 hover:border-emerald-300/30 hover:bg-white/10"}`,children:h.label},h.key))}),r.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:[{key:"disponiveis",label:"Disponveis",desc:"Prontos para iniciar",icon:Hr.pin},{key:"execucao",label:"Em execuo",desc:"Andamento em campo",icon:Hr.clock},{key:"concluidas",label:"Concludos",desc:"Finalizados",icon:Hr.check}].map(h=>{const _=h.key==="disponiveis"?B.filter(ee=>ee.status==="pendente").length:h.key==="execucao"?B.filter(ee=>ee.status==="em_execucao").length:B.filter(ee=>ee.status==="concluida").length;return r.jsxs("button",{onClick:()=>d(h.key),className:`flex w-full items-center gap-3 rounded-2xl border px-4 py-4 text-left transition ${c===h.key?"border-emerald-400/50 bg-emerald-500/10":"border-white/10 bg-white/5 hover:border-emerald-300/30 hover:bg-white/10"}`,children:[r.jsx("div",{className:"text-xl text-emerald-200",children:h.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:h.label}),r.jsx("div",{className:"text-xs text-slate-300",children:h.desc})]}),r.jsx("div",{className:"rounded-full bg-white/10 px-3 py-1 text-xs font-semibold text-white",children:_})]},h.key)})})]}),w.length===0?r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-sm text-slate-200 shadow-inner shadow-black/30",children:"Nenhum servio nesta aba."}):r.jsx("div",{className:"space-y-6 pb-20 sm:pb-0",children:F.map(h=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),r.jsx("div",{className:"text-sm font-semibold text-emerald-300 uppercase tracking-wide",children:h.date}),r.jsx("div",{className:"rounded-full bg-emerald-500/20 px-2 py-1 text-xs font-semibold text-emerald-300",children:h.jobs.length}),r.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:h.jobs.map(_=>{var ee,j;return r.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-200",children:R(_.status)}),r.jsx("div",{className:"text-lg font-semibold text-white leading-tight",children:_.title}),r.jsxs("div",{className:"text-xs text-slate-300",children:[_.plannedDate||"sem data","  ",_.site||"Endereo no informado"]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Cliente: ",_.clientName||""]})]}),r.jsx("div",{className:"rounded-full bg-white/10 px-3 py-1 text-[11px] font-semibold text-white",children:"OS"})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200",children:[r.jsxs("div",{className:"font-semibold text-white",children:["Servios (",((ee=_.services)==null?void 0:ee.length)||0,")"]}),r.jsxs("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-300",children:[(_.services||[]).slice(0,3).map((S,re)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"mt-[6px] h-1.5 w-1.5 rounded-full bg-emerald-300/70"}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("div",{className:"text-white",children:S.serviceType||S.service||"Servio"}),r.jsxs("div",{className:"text-[11px] text-slate-400",children:["Local: ",S.siteType||S.localType||"","  Solo: ",S.soilType||"","  Acesso: ",S.access||""]})]})]},re)),((j=_.services)==null?void 0:j.length)>3&&r.jsxs("li",{className:"text-[11px] text-slate-400",children:["+",_.services.length-3," mais"]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-slate-200",children:[r.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Incio: ",_.startedAt?new Date(_.startedAt).toLocaleString("pt-BR"):""]}),r.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Trmino:"," ",_.finishedAt?new Date(_.finishedAt).toLocaleString("pt-BR"):""]})]}),r.jsxs("div",{className:"mt-auto flex flex-col sm:flex-row flex-wrap gap-2",children:[_.status==="pendente"&&r.jsx("button",{type:"button",disabled:m===_._id,onClick:()=>C(_._id,_.title),className:"w-full sm:flex-1 rounded-md border border-blue-400/40 bg-blue-500/10 px-3 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20 disabled:opacity-60",children:"Iniciar"}),(_.status==="em_execucao"||_.status!=="concluida"&&_.startedAt)&&r.jsx("button",{type:"button",disabled:m===_._id,onClick:()=>H(_._id,"concluida"),className:"w-full sm:flex-1 rounded-md border border-emerald-400/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:"Concluir"}),_.status==="concluida"&&!_.received&&!te(_._id)&&_.finalValue&&_.finalValue>0&&r.jsx("button",{type:"button",disabled:m===_._id,onClick:()=>i(_),className:"w-full sm:flex-1 rounded-md border border-emerald-400/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:m===_._id?"Processando...":"Receber"}),(_.received||te(_._id))&&r.jsx("div",{className:"w-full sm:flex-1 rounded-md border border-emerald-400/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-100 text-center",children:" Recebido"}),_.status==="pendente"&&_.site&&r.jsx("button",{type:"button",onClick:()=>D(_),className:"w-full sm:flex-1 rounded-md border border-purple-400/40 bg-purple-500/10 px-3 py-2 text-xs font-semibold text-purple-100 transition hover:border-purple-300/60 hover:bg-purple-500/20",children:"Rota"}),r.jsx("button",{type:"button",onClick:()=>y(_),className:"w-full rounded-md border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:bg-white/10",children:"Ver detalhes"})]})]},_._id)})})]},h.date))}),x&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-2 sm:px-4 py-4 pb-20 sm:pb-4 overflow-y-auto",children:r.jsxs("div",{className:"w-full max-w-4xl max-h-[85vh] sm:max-h-[95vh] rounded-2xl border border-white/10 bg-slate-900 p-4 sm:p-6 shadow-2xl overflow-y-auto my-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:R(x.status)}),r.jsx("div",{className:"text-lg sm:text-xl font-semibold text-white break-words",children:x.title}),r.jsxs("div",{className:"text-xs sm:text-sm text-slate-300 break-words",children:[x.clientName||"Cliente no informado"," "," ",x.site||"Endereo no informado"]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Data agendada: ",x.plannedDate||""]})]}),r.jsx("button",{onClick:()=>y(null),className:"rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-slate-200 hover:border-emerald-300/40 hover:text-white shrink-0",children:"Fechar"})]}),r.jsxs("div",{className:"mt-4 grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-3",children:[r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Horrios"}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs sm:text-sm",children:[r.jsxs("div",{children:["Incio:"," ",x.startedAt?new Date(x.startedAt).toLocaleString("pt-BR"):""]}),r.jsxs("div",{children:["Trmino:"," ",x.finishedAt?new Date(x.finishedAt).toLocaleString("pt-BR"):""]})]})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Equipe"}),r.jsx("div",{className:"mt-2 text-xs sm:text-sm",children:x.team||((X=l.team)==null?void 0:X.name)}),r.jsxs("div",{className:"text-xs text-slate-400",children:["OS #",x._id]})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Observaes"}),r.jsx("div",{className:"mt-2 text-xs sm:text-sm break-words",children:x.notes||"Sem observaes."})]})]}),r.jsxs("div",{className:"mt-4 rounded-xl border border-white/10 bg-white/5 p-3",children:[r.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-white",children:["Servios (",((ne=x.services)==null?void 0:ne.length)||0,")"]}),r.jsx("div",{className:"mt-2 grid gap-2 grid-cols-1 md:grid-cols-2",children:(x.services||[]).map((h,_)=>r.jsxs("div",{className:"rounded-lg border border-white/10 bg-slate-800/60 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"font-semibold text-white",children:h.serviceType||h.service||"Servio"}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Local: ",h.siteType||h.localType||"","  Solo: ",h.soilType||"","  Acesso: ",h.access||""]}),h.categories&&h.categories.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1 text-[11px] text-emerald-200",children:h.categories.map(ee=>r.jsx("span",{className:"rounded-full bg-emerald-500/10 px-2 py-1",children:ee},ee))}),(h.stakeDiameter||h.diametro)&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Estacas: ",(h.stakeDiameter||h.diametro||"").toString(),"cm "," ",(h.stakeDepth||h.profundidade||"").toString(),"m "," ",(h.stakeQuantity||h.quantidade||"").toString()," un"]}),(h.sptInfo||h.sptFileName)&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["SPT/Diagnstico: ",h.sptInfo||h.sptFileName]}),h.observacoes&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Obs.: ",h.observacoes]})]},_))})]}),r.jsxs("div",{className:"mt-4 rounded-xl border border-white/10 bg-white/5 p-3 sm:p-4",children:[r.jsx("div",{className:"text-xs sm:text-sm font-semibold text-white mb-3",children:"Assinatura do Cliente"}),x.clientSignature?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 p-3",children:[r.jsx("div",{className:"text-xs text-emerald-300 mb-2",children:" Assinatura coletada"}),r.jsx("img",{src:x.clientSignature,alt:"Assinatura do cliente",className:"w-full max-w-md mx-auto border border-white/20 rounded bg-white"}),x.clientSignedAt&&r.jsxs("div",{className:"text-xs text-emerald-200/70 mt-2 text-center",children:["Assinado em: ",new Date(x.clientSignedAt).toLocaleString("pt-BR")]})]}),r.jsx("button",{type:"button",onClick:()=>{const h={...x,clientSignature:void 0,clientSignedAt:void 0};y(h)},className:"w-full rounded-lg border border-yellow-400/50 bg-yellow-500/20 px-3 py-2 text-xs font-semibold text-yellow-300 transition hover:border-yellow-400 hover:bg-yellow-500/30",children:"Reassinar"})]}):r.jsx("div",{className:"w-full",children:r.jsx(hd,{onSave:h=>P(x._id,h),width:400,height:200})})]}),N&&x.site&&I&&r.jsxs("div",{className:"mt-4 rounded-xl border border-white/10 bg-white/5 p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-xs sm:text-sm font-semibold text-white",children:"Rota da Sede at o Local"}),r.jsx("button",{type:"button",onClick:()=>T(!1),className:"rounded-md border border-white/10 px-2 py-1 text-xs font-semibold text-slate-200 hover:border-emerald-300/40 hover:text-white",children:"Fechar mapa"})]}),r.jsx("div",{className:"w-full h-64 rounded-lg overflow-hidden bg-slate-800",children:r.jsx("iframe",{width:"100%",height:"100%",style:{border:0},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/directions?key=AIzaSyAUoyCSevBWa4CkeDcBuYd-R0mbR2NtpIs&origin=${encodeURIComponent(I)}&destination=${encodeURIComponent(x.site)}&mode=driving`})})]}),r.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row flex-wrap gap-2",children:[x.status==="pendente"&&r.jsx("button",{type:"button",disabled:m===x._id,onClick:()=>C(x._id,x.title),className:"w-full sm:w-auto rounded-md border border-blue-400/40 bg-blue-500/10 px-4 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20 disabled:opacity-60",children:"Iniciar servio"}),(x.status==="em_execucao"||x.status!=="concluida"&&x.startedAt)&&r.jsx("button",{type:"button",disabled:m===x._id,onClick:()=>H(x._id,"concluida"),className:"w-full sm:w-auto rounded-md border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:"Concluir servio"}),x.status==="concluida"&&!x.received&&!te(x._id)&&x.finalValue&&x.finalValue>0&&r.jsx("button",{type:"button",disabled:m===x._id,onClick:()=>i(x),className:"w-full sm:w-auto rounded-md border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:m===x._id?"Processando...":"Receber"}),(x.received||te(x._id))&&r.jsx("div",{className:"w-full sm:w-auto rounded-md border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-xs font-semibold text-emerald-100 text-center",children:" Recebido"}),x.site&&r.jsx("button",{type:"button",onClick:()=>D(x),className:"w-full sm:w-auto rounded-md border border-purple-400/40 bg-purple-500/10 px-4 py-2 text-xs font-semibold text-purple-100 transition hover:border-purple-300/60 hover:bg-purple-500/20",children:" Rota"}),r.jsx("button",{type:"button",onClick:()=>g(x._id),className:"w-full sm:w-auto rounded-md border border-blue-400/40 bg-blue-500/10 px-4 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20",children:" Baixar PDF"}),r.jsx("button",{type:"button",onClick:()=>{y(null),T(!1)},className:"w-full sm:w-auto rounded-md border border-white/15 bg-white/5 px-4 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:bg-white/10",children:"Fechar"})]})]})}),J&&I&&(()=>{const h=w.find(_=>_._id===J);return!h||!h.site?null:r.jsxs("div",{className:"fixed inset-0 z-[60] flex flex-col bg-slate-950",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 bg-slate-900 px-4 py-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Rota de Navegao"}),r.jsx("div",{className:"text-sm font-semibold text-white truncate",children:h.title}),r.jsx("div",{className:"text-xs text-slate-400 truncate",children:h.site})]}),r.jsx("button",{onClick:()=>z(null),className:"ml-3 rounded-lg border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-slate-200 hover:border-emerald-300/40 hover:text-white shrink-0",children:"Fechar"})]}),r.jsx("div",{className:"flex-1 relative min-h-0 overflow-hidden",children:r.jsx(Tw,{origin:I,destination:h.site,jobTitle:h.title})}),r.jsx("div",{className:"border-t border-white/10 bg-slate-900 px-4 py-3",children:r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-slate-400 mb-1",children:"Origem"}),r.jsx("div",{className:"text-white font-medium truncate",children:I})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-slate-400 mb-1",children:"Destino"}),r.jsx("div",{className:"text-white font-medium truncate",children:h.site})]})]})})]})})()]}),l&&r.jsx("div",{className:"fixed inset-x-0 bottom-0 z-50 border-t border-white/10 bg-slate-900/90 px-3 py-2 text-xs text-slate-200 backdrop-blur",children:r.jsxs("div",{className:"mx-auto flex max-w-3xl items-center justify-between gap-2",children:[r.jsxs("button",{onClick:()=>M("home"),className:`flex flex-1 flex-col items-center gap-1 rounded-lg px-2 py-1 ${G==="home"?"text-white":"text-slate-300"}`,children:[r.jsx("span",{className:"text-base text-emerald-200",children:Hr.home}),r.jsx("span",{className:"text-[11px] font-semibold",children:"Incio"})]}),r.jsxs("button",{onClick:()=>M("ops"),className:`flex flex-1 flex-col items-center gap-1 rounded-lg px-2 py-1 ${G==="ops"?"text-white":"text-slate-300"}`,children:[r.jsx("span",{className:"text-base text-emerald-200",children:Hr.ops}),r.jsx("span",{className:"text-[11px] font-semibold",children:"Operao"})]}),r.jsxs("button",{onClick:A,className:"flex flex-1 flex-col items-center gap-1 rounded-lg px-2 py-1 text-red-200 hover:text-red-100",children:[r.jsx("span",{className:"text-base",children:Hr.exit}),r.jsx("span",{className:"text-[11px] font-semibold",children:"Sair"})]})]})})]}):r.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-12 text-slate-100",style:{background:"radial-gradient(circle at 20% 20%, rgba(16,185,129,0.07), transparent 35%), radial-gradient(circle at 80% 0%, rgba(59,130,246,0.06), transparent 30%), #020617"},children:[r.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[r.jsx("div",{className:"absolute -left-40 -top-40 h-72 w-72 rounded-full bg-emerald-500/20 blur-[110px]"}),r.jsx("div",{className:"absolute bottom-10 right-0 h-72 w-72 rounded-full bg-blue-500/15 blur-[120px]"})]}),r.jsxs("div",{className:"relative mx-auto flex max-w-lg flex-col gap-6 rounded-3xl border border-white/10 bg-slate-900/70 p-8 shadow-2xl shadow-emerald-500/10 backdrop-blur",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-emerald-500/15 ring-1 ring-emerald-400/40",children:r.jsx("img",{src:"/logoreis.png",alt:"Reis Fundaes",className:"h-[42px] w-[42px] rounded-lg object-contain"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-[0.18em] text-emerald-200",children:"Painel da equipe"}),r.jsx("div",{className:"text-2xl font-semibold text-white",children:"Acessar operao"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Digite a senha fornecida pelo administrador para abrir as ordens de servio desta equipe."})]})]}),r.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/40",children:[r.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Senha de acesso"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:$?"text":"password",value:t,onChange:h=>s(h.target.value),className:"w-full rounded-xl border border-white/10 bg-slate-900/80 px-3 py-3 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Informe a senha"}),r.jsx("button",{type:"button",onClick:()=>Y(h=>!h),className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-[11px] font-semibold text-slate-100 transition hover:border-emerald-300/50 hover:text-white",children:$?"Ocultar":"Mostrar"})]}),r.jsx("button",{onClick:v,disabled:a,className:"mt-1 w-full rounded-xl bg-gradient-to-r from-emerald-500 to-blue-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-emerald-600 hover:to-blue-600 disabled:opacity-60",children:a?"Verificando...":"Entrar"}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"O link permanece vlido at que um novo link seja gerado pelo administrador. No compartilhe com terceiros."})]})]})]})}const Iw=[{value:"dinheiro",label:"Dinheiro"},{value:"pix",label:"PIX"},{value:"transferencia",label:"Transferncia"},{value:"cartao",label:"Carto"},{value:"cheque",label:"Cheque"},{value:"outro",label:"Outro"}],xs={pin:r.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M12 21s-6-5.3-6-10a6 6 0 1 1 12 0c0 4.7-6 10-6 10Z"}),r.jsx("circle",{cx:"12",cy:"11",r:"2"})]}),clock:r.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]}),check:r.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"m5 13 4 4L19 7"})}),home:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"m3 11 9-8 9 8"}),r.jsx("path",{d:"M4 10v10h5v-6h6v6h5V10"})]}),ops:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"14",rx:"2"}),r.jsx("path",{d:"M3 10h18"}),r.jsx("path",{d:"M8 16h.01M12 16h.01M16 16h.01"})]}),exit:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M15 3h4v18h-4"}),r.jsx("path",{d:"M10 17 15 12 10 7"}),r.jsx("path",{d:"M15 12H3"})]})},Lw=[{key:"all",label:"Todas"},{key:"today",label:"Hoje"},{key:"tomorrow",label:"Amanh"},{key:"week",label:"Esta Semana"},{key:"month",label:"Este Ms"}];function _w(e){return btoa(e)}function Dw(e){try{return atob(e)}catch{return""}}function bp(e){return e==="pendente"?"Pendente":e==="em_execucao"?"Em execuo":e==="concluida"?"Concluda":"Cancelada"}function Xc(e,t){if(!e)return t==="all";try{const s=new Date(e);if(isNaN(s.getTime()))return t==="all";const a=new Date;a.setHours(0,0,0,0);const n=new Date(a);n.setDate(n.getDate()+1);const l=new Date(a);l.setDate(l.getDate()+7);const o=new Date(a);o.setMonth(o.getMonth()+1);const c=new Date(s);switch(c.setHours(0,0,0,0),t){case"today":return c.getTime()===a.getTime();case"tomorrow":return c.getTime()===n.getTime();case"week":return c>=a&&c<=l;case"month":return c>=a&&c<=o;default:return!0}}catch{return t==="all"}}function Mw(e){const t={};return e.forEach(a=>{let n="Sem data";if(a.plannedDate)try{const l=new Date(a.plannedDate);isNaN(l.getTime())||(n=l.toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),n=n.charAt(0).toUpperCase()+n.slice(1))}catch{}t[n]||(t[n]=[]),t[n].push(a)}),Object.keys(t).sort((a,n)=>{var l,o;if(a==="Sem data")return 1;if(n==="Sem data")return-1;try{const c=new Date(((l=a.split(",")[1])==null?void 0:l.trim())||a),d=new Date(((o=n.split(",")[1])==null?void 0:o.trim())||n);return c.getTime()-d.getTime()}catch{return a.localeCompare(n)}}).map(a=>({date:a,jobs:t[a]}))}var Ow={};function Fw(e){const[t,s]=p.useState(""),[a,n]=p.useState(!0),[l,o]=p.useState(null),[c,d]=p.useState("disponiveis"),[m,L]=p.useState(null),[x,y]=p.useState(null),[$,Y]=p.useState(!1),[G,M]=p.useState(!0),[f,u]=p.useState(""),[N,T]=p.useState([]),[J,z]=p.useState("all"),I=`ops-auth-team-${e}`,O=async(R,C)=>{const H=C==null?void 0:C.silent;if(!R.trim()){H||k.fire("Ateno","Informe a senha de acesso.","warning"),M(!1),n(!1);return}try{n(!0);const te=await le(`/operations/team/${e}`,{method:"POST",body:JSON.stringify({password:R})}),i=await te.json().catch(()=>null);if(!te.ok){localStorage.removeItem(I),M(!1),H||k.fire("Erro",(i==null?void 0:i.error)||"Link ou senha invlidos.","error");return}s(R),o(i.data);const P=Date.now(),g=_w(R);localStorage.setItem(I,JSON.stringify({pass:g,timestamp:P})),M(!1);try{const D=await(await le("/cash",{cache:"no-store"})).json().catch(()=>null);D!=null&&D.data&&T(D.data)}catch(A){console.error("Erro ao carregar transaes",A)}H||k.fire("Liberado","Painel carregado.","success")}catch(te){console.error(te),M(!1),H||k.fire("Erro","Falha ao autenticar.","error")}finally{n(!1)}},U=async(R,C)=>{(await k.fire({title:`<div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center">
          <svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <span class="text-xl font-bold text-slate-800">Iniciar Servio</span>
      </div>`,html:`
        <div class="text-left space-y-4 mt-4">
          <p class="text-base text-slate-600 font-medium">Deseja iniciar este servio?</p>
          
          <div class="bg-gradient-to-br from-blue-50 to-indigo-50 border-l-4 border-blue-500 rounded-lg p-4 shadow-sm">
            <div class="flex items-start gap-3">
              <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-bold text-slate-900 mb-1 break-words">${C}</p>
                <p class="text-xs text-slate-600 leading-relaxed">O servio ser marcado como <span class="font-semibold text-blue-600">"Em execuo"</span> e o horrio de incio ser registrado automaticamente.</p>
              </div>
            </div>
          </div>

          <div class="flex items-center gap-2 text-xs text-slate-500 bg-slate-50 rounded-lg p-3">
            <svg class="w-4 h-4 flex-shrink-0 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>Voc poder marcar como concludo quando finalizar o trabalho.</span>
          </div>
        </div>
      `,showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#94a3b8",confirmButtonText:'<span class="px-2"> Sim, iniciar agora</span>',cancelButtonText:"Cancelar",customClass:{popup:"rounded-2xl shadow-2xl",title:"text-left pb-0",htmlContainer:"text-left",confirmButton:"rounded-lg font-semibold px-6 py-3 shadow-lg hover:shadow-xl transition-all",cancelButton:"rounded-lg font-semibold px-6 py-3 hover:bg-slate-200 transition-all"},buttonsStyling:!0})).isConfirmed&&await E(R,"em_execucao")},E=async(R,C)=>{if(l)try{L(R);const H={teamId:e,password:t,status:C},te=new Date().toISOString();C==="em_execucao"&&(H.startedAt=te),C==="concluida"&&(H.finishedAt=te);const i=await fetch(`/api/operations/jobs/${R}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)}),P=await i.json().catch(()=>null);if(!i.ok){k.fire("Erro",(P==null?void 0:P.error)||"No foi possvel atualizar.","error");return}const g=P.data;o(D=>D&&{...D,jobs:D.jobs.map(V=>V._id===R?g:V)});let A;C==="pendente"?A="disponiveis":C==="em_execucao"?A="execucao":C==="concluida"?A="concluidas":A=c,d(A),y(g),k.fire("Sucesso","Status atualizado.","success")}catch(H){console.error(H),k.fire("Erro","Falha ao atualizar.","error")}finally{L(null)}},Q=R=>N.some(C=>C.jobId===R||C.jobId&&C.jobId.toString()===R.toString()),W=async R=>{var H;if(R.status!=="concluida"){k.fire("Ateno","Apenas OS concludas podem ser marcadas como recebidas.","warning");return}if(Q(R._id)){k.fire("Ateno","Esta OS j possui uma transao registrada.","info");return}if(R.received){k.fire("Ateno","Esta OS j foi marcada como recebida.","info");return}const C=await k.fire({title:"Confirmar Recebimento",html:`
        <div class="text-left" style="max-width: 500px;">
          <div class="mb-4 p-4 rounded-lg bg-emerald-50 border border-emerald-200">
            <div class="text-xs text-emerald-600 mb-1">Valor a Receber</div>
            <div class="text-2xl font-bold text-emerald-700">
              ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(R.finalValue||R.value||0)}
            </div>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Forma de Pagamento <span class="text-red-500">*</span>
            </label>
            <select 
              id="swal-payment-method" 
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"
              required
            >
              <option value="">Selecione a forma de pagamento...</option>
              ${Iw.map(te=>`<option value="${te.value}">${te.label}</option>`).join("")}
            </select>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Nmero do Recibo/Comprovante
              <span class="text-gray-400 text-xs font-normal">(opcional)</span>
            </label>
            <input 
              id="swal-receipt" 
              type="text" 
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"
              placeholder="Ex: 001234, COMP-2024-001, etc."
            >
          </div>
          
          <div class="mb-2">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Comprovante/Recibo (PDF, Foto, etc.)
              <span class="text-gray-400 text-xs font-normal">(opcional)</span>
            </label>
            <input 
              id="swal-receipt-file" 
              type="file" 
              accept=".pdf,.jpg,.jpeg,.png,.heic,.heif"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100"
            >
            <p class="mt-1 text-xs text-gray-500">Formatos aceitos: PDF, JPG, PNG, HEIC (mx. 50MB)</p>
          </div>
        </div>
      `,width:"600px",showCancelButton:!0,confirmButtonText:"Confirmar Recebimento",cancelButtonText:"Cancelar",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",preConfirm:async()=>{var A;const te=document.getElementById("swal-payment-method"),i=document.getElementById("swal-receipt"),P=document.getElementById("swal-receipt-file");if(!(te!=null&&te.value))return k.showValidationMessage("Por favor, selecione a forma de pagamento"),te==null||te.focus(),!1;let g;if(P!=null&&P.files&&P.files.length>0){const D=P.files[0];if(D.size>50*1024*1024)return k.showValidationMessage("O arquivo  muito grande. Tamanho mximo: 50MB"),!1;if(!["application/pdf","image/jpeg","image/jpg","image/png","image/heic","image/heif"].includes(D.type))return k.showValidationMessage("Tipo de arquivo no permitido. Use PDF, JPG, PNG ou HEIC"),!1;try{k.showLoading();const X=new FormData;X.append("file",D),X.append("category","receipts"),X.append("id",R._id);const ne=await le("/files/upload",{method:"POST",headers:{},body:X}),h=await ne.json().catch(()=>null);if(!ne.ok||!((A=h==null?void 0:h.data)!=null&&A.key))return k.showValidationMessage("Falha ao fazer upload do arquivo. Tente novamente."),!1;g=h.data.key}catch(X){return console.error("File upload error:",X),k.showValidationMessage("Erro ao fazer upload do arquivo. Tente novamente."),!1}}return{paymentMethod:te.value,receipt:(i==null?void 0:i.value.trim())||void 0,receiptFileKey:g}}});if(!(!C.isConfirmed||!C.value))try{L(R._id);const te=await le(`/jobs/${R._id}/received`,{method:"POST",body:JSON.stringify(C.value)}),i=await te.json().catch(()=>null);if(!te.ok){k.fire("Erro",(i==null?void 0:i.error)||"No foi possvel marcar como recebido.","error");return}const g=await(await le("/cash",{cache:"no-store"})).json().catch(()=>null);g!=null&&g.data&&T(g.data);const A=(H=g==null?void 0:g.data)==null?void 0:H.some(D=>D.jobId===R._id||D.jobId&&D.jobId.toString()===R._id.toString());!A&&(i!=null&&i.transaction)&&T(D=>[...D,i.transaction]),A||i!=null&&i.transaction?(o(D=>D&&{...D,jobs:D.jobs.map(V=>V._id===R._id?{...V,received:!0,receivedAt:new Date,receipt:C.value.receipt,receiptFileKey:C.value.receiptFileKey}:V)}),x&&x._id===R._id&&y({...x,received:!0,receivedAt:new Date,receipt:C.value.receipt,receiptFileKey:C.value.receiptFileKey}),k.fire("Sucesso","OS marcada como recebida e transao criada no caixa.","success")):k.fire("Erro","Transao no foi criada. Job no foi marcado como recebido.","error")}catch(te){console.error(te),k.fire("Erro","Falha ao marcar como recebido.","error")}finally{L(null)}},Z=async(R,C)=>{try{L(R);const H=await le(`/jobs/${R}/signature`,{method:"POST",body:JSON.stringify({signature:C})});if(!H.ok){const te=await H.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(te.error||"Falha ao salvar assinatura")}x&&x._id===R&&y({...x,clientSignature:C,clientSignedAt:new Date}),l&&o({...l,jobs:l.jobs.map(te=>te._id===R?{...te,clientSignature:C,clientSignedAt:new Date}:te)}),k.fire("Sucesso","Assinatura salva com sucesso.","success")}catch(H){console.error(H),k.fire("Erro",H.message||"Falha ao salvar assinatura.","error")}finally{L(null)}},K=async R=>{try{let C=Ow.NEXT_PUBLIC_API_URL||"http://localhost:4000";C.endsWith("/api")&&(C=C.slice(0,-4));const H=`${C}/api/jobs/${R}/pdf`;window.open(H,"_blank")}catch(C){console.error(C),k.fire("Erro","Falha ao gerar PDF.","error")}},v=()=>{localStorage.removeItem(I),o(null),s(""),y(null)},q=async R=>{const C=R.site;if(!C&&(!R.siteLatitude||!R.siteLongitude)){k.fire("Erro","Endereo do servio no disponvel.","error");return}let H;if(R.siteLatitude&&R.siteLongitude?H=`${R.siteLatitude},${R.siteLongitude}`:H=C.replace(/\s*\|\s*/g,", "),!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){k.fire({title:"GPS Necessrio",html:`
          <div class="text-left space-y-3">
            <p class="text-sm text-gray-600">
              Para usar a navegao com rota a partir da sua localizao atual,  necessrio um dispositivo com GPS (celular ou tablet).
            </p>
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
              <p class="text-xs font-semibold text-blue-900 mb-2"> Opes:</p>
              <ul class="text-xs text-blue-800 space-y-1 list-disc list-inside">
                <li>Use um celular ou tablet para acessar esta pgina</li>
                <li>Ou abra apenas o destino no Google Maps (sem rota)</li>
              </ul>
            </div>
          </div>
        `,icon:"info",showCancelButton:!0,confirmButtonText:"Abrir destino",cancelButtonText:"Cancelar",confirmButtonColor:"#3b82f6"}).then(g=>{g.isConfirmed&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(H)}`,"_blank")});return}if(!navigator.geolocation){k.fire({title:"Geolocalizao no suportada",text:"Seu navegador no suporta geolocalizao. Abrindo apenas o destino...",icon:"info"}).then(()=>{window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(H)}`,"_blank")});return}let i=null,P=!1;k.fire({title:"Obtendo localizao...",html:`
        <p class="text-sm text-slate-600 mb-3">Aguarde enquanto obtemos sua localizao atual via GPS</p>
        <button
          id="skipLocationBtn"
          class="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm"
        >
          Pular e abrir Google Maps
        </button>
      `,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{k.showLoading();const g=document.getElementById("skipLocationBtn");g&&(g.onclick=()=>{i!==null&&navigator.geolocation.clearWatch(i),k.close(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(H)}`,"_blank")}),i=navigator.geolocation.watchPosition(A=>{if(P)return;P=!0;const{latitude:D,longitude:V}=A.coords;i!==null&&navigator.geolocation.clearWatch(i),k.close();const X=`${D},${V}`,ne=`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(X)}&destination=${encodeURIComponent(H)}&travelmode=driving`;window.open(ne,"_blank")},A=>{if(P)return;let D="No foi possvel obter sua localizao.",V="";if(A.code)switch(A.code){case 1:D="Permisso negada",V="Por favor, permita o acesso  localizao nas configuraes do navegador.";break;case 2:D="Localizao indisponvel",V="Verifique se o GPS est ativado e voc est em um local com boa recepo.";break;case 3:D="Tempo esgotado",V="No foi possvel obter sua localizao em tempo hbil. Verifique se o GPS est ativado.";break}i!==null&&navigator.geolocation.clearWatch(i),k.close(),k.fire({title:"Erro ao obter localizao",html:`
                <div class="text-left space-y-3">
                  <div class="p-3 bg-red-50 border border-red-200 rounded">
                    <p class="text-sm font-semibold text-red-900 mb-1">${D}</p>
                    <p class="text-xs text-red-700">${V}</p>
                  </div>
                  
                  <div class="mt-4 pt-3 border-t border-gray-200">
                    <p class="text-xs text-gray-500 mb-3">
                      Voc ainda pode abrir o destino no Google Maps:
                    </p>
                    <button
                      onclick="window.open('https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(H)}', '_blank'); Swal.close();"
                      class="w-full flex items-center justify-center gap-2 p-3 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition text-sm font-semibold"
                    >
                      <span class="text-xl"></span>
                      <span>Abrir no Google Maps</span>
                    </button>
                  </div>
                </div>
              `,icon:"warning",width:500,showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"Fechar",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-gray-600"}})},{enableHighAccuracy:!0,timeout:2e4,maximumAge:0})},willClose:()=>{i!==null&&(navigator.geolocation.clearWatch(i),i=null)}})};p.useEffect(()=>{o(null),y(null),s(""),M(!0),n(!0);try{const R=localStorage.getItem(I);if(R){const C=JSON.parse(R);if(C!=null&&C.pass){const H=C.timestamp||0;if((Date.now()-H)/(1e3*60*60)<24){const P=Dw(C.pass);if(P){O(P,{silent:!0});return}}else localStorage.removeItem(I)}}}catch(R){console.error(R),localStorage.removeItem(I)}M(!1),n(!1)},[e]),p.useEffect(()=>{(async()=>{var C;try{const H=await le("/settings",{cache:"no-store"}),te=await H.json().catch(()=>null);H.ok&&((C=te==null?void 0:te.data)!=null&&C.headquartersAddress)&&u(te.data.headquartersAddress)}catch(H){console.error(H)}})()},[]);const B=p.useMemo(()=>(l==null?void 0:l.jobs)||[],[l]),b=p.useMemo(()=>l?J==="all"?B:B.filter(R=>Xc(R.plannedDate,J)):[],[B,J,l]),w=p.useMemo(()=>{if(!l)return[];let R=B;return c==="disponiveis"?R=R.filter(C=>C.status==="pendente"):c==="execucao"?R=R.filter(C=>C.status==="em_execucao"):c==="concluidas"&&(R=R.filter(C=>C.status==="concluida")),J!=="all"&&(R=R.filter(C=>Xc(C.plannedDate,J))),R},[B,c,l,J]),F=p.useMemo(()=>Mw(w),[w]);return{password:t,setPassword:s,authLoading:a,data:l,tab:c,setTab:d,updating:m,selectedJob:x,setSelectedJob:y,showPass:$,setShowPass:Y,checkingAuth:G,headquartersAddress:f,dateFilter:J,setDateFilter:z,assignedJobs:B,dateFilteredJobs:b,filteredJobs:w,groupedJobsByDate:F,authWithPassword:O,handleStartJob:U,updateJobStatus:E,hasTransactionForJob:Q,markAsReceived:W,handleSaveSignature:Z,handleDownloadPDF:K,handleLogout:v,handleNavigateToJob:q}}function Rw(){return r.jsx("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-12 text-slate-100 flex items-center justify-center",style:{background:"radial-gradient(circle at 20% 20%, rgba(16,185,129,0.07), transparent 35%), radial-gradient(circle at 80% 0%, rgba(59,130,246,0.06), transparent 30%), #020617"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Carregando..."})]})})}function Bw({password:e,setPassword:t,showPass:s,setShowPass:a,authLoading:n,onLogin:l}){return r.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-12 text-slate-100",style:{background:"radial-gradient(circle at 20% 20%, rgba(16,185,129,0.07), transparent 35%), radial-gradient(circle at 80% 0%, rgba(59,130,246,0.06), transparent 30%), #020617"},children:[r.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[r.jsx("div",{className:"absolute -left-40 -top-40 h-72 w-72 rounded-full bg-emerald-500/20 blur-[110px]"}),r.jsx("div",{className:"absolute bottom-10 right-0 h-72 w-72 rounded-full bg-blue-500/15 blur-[120px]"})]}),r.jsxs("div",{className:"relative mx-auto flex max-w-lg flex-col gap-6 rounded-3xl border border-white/10 bg-slate-900/70 p-8 shadow-2xl shadow-emerald-500/10 backdrop-blur",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-emerald-500/15 ring-1 ring-emerald-400/40",children:r.jsx("img",{src:"/logoreis.png",alt:"Reis Fundaes",className:"h-[42px] w-[42px] rounded-lg object-contain"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-[0.18em] text-emerald-200",children:"Painel da equipe"}),r.jsx("div",{className:"text-2xl font-semibold text-white",children:"Acessar operao"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Digite a senha fornecida pelo administrador para abrir as ordens de servio desta equipe."})]})]}),r.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-black/40",children:[r.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Senha de acesso"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:s?"text":"password",value:e,onChange:o=>t(o.target.value),onKeyDown:o=>o.key==="Enter"&&l(),className:"w-full rounded-xl border border-white/10 bg-slate-900/80 px-3 py-3 text-sm text-white outline-none ring-1 ring-transparent transition focus:border-emerald-400/60 focus:ring-emerald-500/40",placeholder:"Informe a senha"}),r.jsx("button",{type:"button",onClick:()=>a(o=>!o),className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-[11px] font-semibold text-slate-100 transition hover:border-emerald-300/50 hover:text-white",children:s?"Ocultar":"Mostrar"})]}),r.jsx("button",{onClick:l,disabled:n,className:"mt-1 w-full rounded-xl bg-gradient-to-r from-emerald-500 to-blue-500 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition hover:from-emerald-600 hover:to-blue-600 disabled:opacity-60",children:n?"Verificando...":"Entrar"}),r.jsx("div",{className:"text-[11px] text-slate-400",children:"Este link  permanente e exclusivo para a equipe. A sesso expira aps 24 horas."})]})]})]})}function $w({job:e,onStart:t,onComplete:s,onReceive:a,onNavigate:n,onViewDetails:l,updating:o,hasTransaction:c}){var d;return r.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-5 shadow-inner shadow-black/30",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-200",children:bp(e.status)}),r.jsx("div",{className:"text-lg font-semibold text-white leading-tight",children:e.title}),r.jsxs("div",{className:"text-xs text-slate-300",children:[e.plannedDate||"sem data","  ",e.site||"Endereo no informado"]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Cliente: ",e.clientName||""]})]}),r.jsx("div",{className:"rounded-full bg-white/10 px-3 py-1 text-[11px] font-semibold text-white",children:"OS"})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200",children:[r.jsxs("div",{className:"font-semibold text-white",children:["Servios (",((d=e.services)==null?void 0:d.length)||0,")"]}),r.jsxs("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-300",children:[(e.services||[]).slice(0,3).map((m,L)=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"mt-[6px] h-1.5 w-1.5 rounded-full bg-emerald-300/70"}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("div",{className:"text-white",children:m.serviceType||m.service||"Servio"}),r.jsxs("div",{className:"text-[11px] text-slate-400",children:["Local: ",m.siteType||m.localType||"","  Solo: ",m.soilType||"","  Acesso: ",m.access||""]})]})]},L)),e.services&&e.services.length>3&&r.jsxs("li",{className:"text-[11px] text-slate-400",children:["+",e.services.length-3," mais"]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-slate-200",children:[r.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Incio: ",e.startedAt?new Date(e.startedAt).toLocaleString("pt-BR"):""]}),r.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-1",children:["Trmino: ",e.finishedAt?new Date(e.finishedAt).toLocaleString("pt-BR"):""]})]}),r.jsxs("div",{className:"mt-auto flex flex-col sm:flex-row flex-wrap gap-2",children:[e.status==="pendente"&&r.jsx("button",{type:"button",disabled:o===e._id,onClick:()=>t(e._id,e.title),className:"w-full sm:flex-1 rounded-md border border-blue-400/40 bg-blue-500/10 px-3 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20 disabled:opacity-60",children:"Iniciar"}),(e.status==="em_execucao"||e.status!=="concluida"&&e.startedAt)&&r.jsx("button",{type:"button",disabled:o===e._id,onClick:()=>s(e._id),className:"w-full sm:flex-1 rounded-md border border-emerald-400/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:"Concluir"}),e.status==="concluida"&&!e.received&&!c(e._id)&&e.finalValue&&e.finalValue>0&&r.jsx("button",{type:"button",disabled:o===e._id,onClick:()=>a(e),className:"w-full sm:flex-1 rounded-md border border-emerald-400/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:o===e._id?"Processando...":"Receber"}),(e.received||c(e._id))&&r.jsx("div",{className:"w-full sm:flex-1 rounded-md border border-emerald-400/40 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-100 text-center",children:" Recebido"}),e.status==="pendente"&&e.site&&r.jsx("button",{type:"button",onClick:()=>n(e),className:"w-full sm:flex-1 rounded-md border border-purple-400/40 bg-purple-500/10 px-3 py-2 text-xs font-semibold text-purple-100 transition hover:border-purple-300/60 hover:bg-purple-500/20",children:"Rota"}),r.jsx("button",{type:"button",onClick:()=>l(e),className:"w-full rounded-md border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:bg-white/10",children:"Ver detalhes"})]})]})}function zw({view:e,setView:t,onLogout:s}){return r.jsx("div",{className:"fixed inset-x-0 bottom-0 z-50 border-t border-white/10 bg-slate-900/90 px-3 py-2 text-xs text-slate-200 backdrop-blur",children:r.jsxs("div",{className:"mx-auto flex max-w-3xl items-center justify-between gap-2",children:[r.jsxs("button",{onClick:()=>t("home"),className:`flex flex-1 flex-col items-center gap-1 rounded-lg px-2 py-1 ${e==="home"?"text-white":"text-slate-300"}`,children:[r.jsx("span",{className:"text-base text-emerald-200",children:xs.home}),r.jsx("span",{className:"text-[11px] font-semibold",children:"Incio"})]}),r.jsxs("button",{onClick:()=>t("ops"),className:`flex flex-1 flex-col items-center gap-1 rounded-lg px-2 py-1 ${e==="ops"?"text-white":"text-slate-300"}`,children:[r.jsx("span",{className:"text-base text-emerald-200",children:xs.ops}),r.jsx("span",{className:"text-[11px] font-semibold",children:"Operao"})]}),r.jsxs("button",{onClick:s,className:"flex flex-1 flex-col items-center gap-1 rounded-lg px-2 py-1 text-red-200 hover:text-red-100",children:[r.jsx("span",{className:"text-base",children:xs.exit}),r.jsx("span",{className:"text-[11px] font-semibold",children:"Sair"})]})]})})}function Vw({params:e}){var v,q,B;const t=e.id,[s,a]=p.useState("ops"),{password:n,setPassword:l,authLoading:o,data:c,tab:d,setTab:m,updating:L,selectedJob:x,setSelectedJob:y,showPass:$,setShowPass:Y,checkingAuth:G,dateFilter:M,setDateFilter:f,dateFilteredJobs:u,filteredJobs:N,groupedJobsByDate:T,authWithPassword:J,handleStartJob:z,updateJobStatus:I,hasTransactionForJob:O,markAsReceived:U,handleSaveSignature:E,handleDownloadPDF:Q,handleLogout:W,handleNavigateToJob:Z}=Fw(t),K=async()=>{await J(n)};return G||o?r.jsx(Rw,{}):c?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-8 text-slate-100",style:{background:"radial-gradient(circle at 15% 10%, rgba(16,185,129,0.08), transparent 35%), radial-gradient(circle at 85% 15%, rgba(59,130,246,0.08), transparent 30%), #020617"},children:[r.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-6",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-200",children:"Equipe"}),r.jsx("div",{className:"text-2xl font-semibold text-white",children:(v=c.team)==null?void 0:v.name}),r.jsx("div",{className:"text-sm text-slate-300",children:"Painel pblico protegido. Atualize incio e concluso das OS atribudas."})]}),s==="home"?r.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:[{label:"Disponveis",value:u.filter(b=>b.status==="pendente").length},{label:"Em execuo",value:u.filter(b=>b.status==="em_execucao").length},{label:"Concludos",value:u.filter(b=>b.status==="concluida").length}].map(b=>r.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-300",children:b.label}),r.jsx("div",{className:"mt-1 text-2xl font-semibold text-white",children:b.value})]},b.label))}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-wrap gap-2",children:Lw.map(b=>r.jsx("button",{onClick:()=>f(b.key),className:`rounded-lg border px-3 py-2 text-xs font-semibold transition ${M===b.key?"border-emerald-400/50 bg-emerald-500/20 text-emerald-300":"border-white/10 bg-white/5 text-slate-200 hover:border-emerald-300/30 hover:bg-white/10"}`,children:b.label},b.key))}),r.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:[{key:"disponiveis",label:"Disponveis",desc:"Prontos para iniciar",icon:xs.pin},{key:"execucao",label:"Em execuo",desc:"Andamento em campo",icon:xs.clock},{key:"concluidas",label:"Concludos",desc:"Finalizados",icon:xs.check}].map(b=>{const w=b.key==="disponiveis"?u.filter(F=>F.status==="pendente").length:b.key==="execucao"?u.filter(F=>F.status==="em_execucao").length:u.filter(F=>F.status==="concluida").length;return r.jsxs("button",{onClick:()=>m(b.key),className:`flex w-full items-center gap-3 rounded-2xl border px-4 py-4 text-left transition ${d===b.key?"border-emerald-400/50 bg-emerald-500/10":"border-white/10 bg-white/5 hover:border-emerald-300/30 hover:bg-white/10"}`,children:[r.jsx("div",{className:"text-xl text-emerald-200",children:b.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-semibold text-white",children:b.label}),r.jsx("div",{className:"text-xs text-slate-300",children:b.desc})]}),r.jsx("div",{className:"rounded-full bg-white/10 px-3 py-1 text-xs font-semibold text-white",children:w})]},b.key)})})]}),N.length===0?r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-sm text-slate-200 shadow-inner shadow-black/30",children:"Nenhum servio nesta aba."}):r.jsx("div",{className:"space-y-6 pb-20 sm:pb-0",children:T.map(b=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),r.jsx("div",{className:"text-sm font-semibold text-emerald-300 uppercase tracking-wide",children:b.date}),r.jsx("div",{className:"rounded-full bg-emerald-500/20 px-2 py-1 text-xs font-semibold text-emerald-300",children:b.jobs.length}),r.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:b.jobs.map(w=>r.jsx($w,{job:w,onStart:z,onComplete:F=>I(F,"concluida"),onReceive:U,onNavigate:Z,onViewDetails:y,updating:L,hasTransaction:O},w._id))})]},b.date))}),x&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-2 sm:px-4 py-4 pb-20 sm:pb-4 overflow-y-auto",children:r.jsxs("div",{className:"w-full max-w-4xl max-h-[85vh] sm:max-h-[95vh] rounded-2xl border border-white/10 bg-slate-900 p-4 sm:p-6 shadow-2xl overflow-y-auto my-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:bp(x.status)}),r.jsx("div",{className:"text-lg sm:text-xl font-semibold text-white break-words",children:x.title}),r.jsxs("div",{className:"text-xs sm:text-sm text-slate-300 break-words",children:[x.clientName||"Cliente no informado"," "," ",x.site||"Endereo no informado"]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Data agendada: ",x.plannedDate||""]})]}),r.jsx("button",{onClick:()=>y(null),className:"rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-slate-200 hover:border-emerald-300/40 hover:text-white shrink-0",children:"Fechar"})]}),r.jsxs("div",{className:"mt-4 grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-3",children:[r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Horrios"}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs sm:text-sm",children:[r.jsxs("div",{children:["Incio:"," ",x.startedAt?new Date(x.startedAt).toLocaleString("pt-BR"):""]}),r.jsxs("div",{children:["Trmino:"," ",x.finishedAt?new Date(x.finishedAt).toLocaleString("pt-BR"):""]})]})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Equipe"}),r.jsx("div",{className:"mt-2 text-xs sm:text-sm",children:x.team||((q=c.team)==null?void 0:q.name)}),r.jsxs("div",{className:"text-xs text-slate-400",children:["OS #",x._id]})]}),r.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"text-xs uppercase text-slate-400",children:"Observaes"}),r.jsx("div",{className:"mt-2 text-xs sm:text-sm break-words",children:x.notes||"Sem observaes."})]})]}),r.jsxs("div",{className:"mt-4 rounded-xl border border-white/10 bg-white/5 p-3",children:[r.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-white",children:["Servios (",((B=x.services)==null?void 0:B.length)||0,")"]}),r.jsx("div",{className:"mt-2 grid gap-2 grid-cols-1 md:grid-cols-2",children:(x.services||[]).map((b,w)=>r.jsxs("div",{className:"rounded-lg border border-white/10 bg-slate-800/60 p-3 text-sm text-slate-200",children:[r.jsx("div",{className:"font-semibold text-white",children:b.serviceType||b.service||"Servio"}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Local: ",b.siteType||b.localType||"","  Solo: ",b.soilType||"","  Acesso: ",b.access||""]}),b.categories&&b.categories.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1 text-[11px] text-emerald-200",children:b.categories.map(F=>r.jsx("span",{className:"rounded-full bg-emerald-500/10 px-2 py-1",children:F},F))}),(b.stakeDiameter||b.diametro)&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Estacas: ",(b.stakeDiameter||b.diametro||"").toString(),"cm "," ",(b.stakeDepth||b.profundidade||"").toString(),"m "," ",(b.stakeQuantity||b.quantidade||"").toString()," un"]}),(b.sptInfo||b.sptFileName)&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["SPT/Diagnstico: ",b.sptInfo||b.sptFileName]}),b.observacoes&&r.jsxs("div",{className:"mt-1 text-xs text-slate-300",children:["Obs.: ",b.observacoes]})]},w))})]}),r.jsxs("div",{className:"mt-4 rounded-xl border border-white/10 bg-white/5 p-3 sm:p-4",children:[r.jsx("div",{className:"text-xs sm:text-sm font-semibold text-white mb-3",children:"Assinatura do Cliente"}),x.clientSignature?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 p-3",children:[r.jsx("div",{className:"text-xs text-emerald-300 mb-2",children:" Assinatura coletada"}),r.jsx("img",{src:x.clientSignature,alt:"Assinatura do cliente",className:"w-full max-w-md mx-auto border border-white/20 rounded bg-white"}),x.clientSignedAt&&r.jsxs("div",{className:"text-xs text-emerald-200/70 mt-2 text-center",children:["Assinado em: ",new Date(x.clientSignedAt).toLocaleString("pt-BR")]})]}),r.jsx("button",{type:"button",onClick:()=>{const b={...x,clientSignature:void 0,clientSignedAt:void 0};y(b)},className:"w-full rounded-lg border border-yellow-400/50 bg-yellow-500/20 px-3 py-2 text-xs font-semibold text-yellow-300 transition hover:border-yellow-400 hover:bg-yellow-500/30",children:"Reassinar"})]}):r.jsx("div",{className:"w-full",children:r.jsx(hd,{onSave:b=>E(x._id,b),width:400,height:200})})]}),r.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row flex-wrap gap-2",children:[x.status==="pendente"&&r.jsx("button",{type:"button",disabled:L===x._id,onClick:()=>z(x._id,x.title),className:"w-full sm:w-auto rounded-md border border-blue-400/40 bg-blue-500/10 px-4 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20 disabled:opacity-60",children:"Iniciar servio"}),(x.status==="em_execucao"||x.status!=="concluida"&&x.startedAt)&&r.jsx("button",{type:"button",disabled:L===x._id,onClick:()=>I(x._id,"concluida"),className:"w-full sm:w-auto rounded-md border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:"Concluir servio"}),x.status==="concluida"&&!x.received&&!O(x._id)&&x.finalValue&&x.finalValue>0&&r.jsx("button",{type:"button",disabled:L===x._id,onClick:()=>U(x),className:"w-full sm:w-auto rounded-md border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-xs font-semibold text-emerald-100 transition hover:border-emerald-300/60 hover:bg-emerald-500/20 disabled:opacity-60",children:L===x._id?"Processando...":"Receber"}),(x.received||O(x._id))&&r.jsx("div",{className:"w-full sm:w-auto rounded-md border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-xs font-semibold text-emerald-100 text-center",children:" Recebido"}),x.site&&r.jsx("button",{type:"button",onClick:()=>Z(x),className:"w-full sm:w-auto rounded-md border border-purple-400/40 bg-purple-500/10 px-4 py-2 text-xs font-semibold text-purple-100 transition hover:border-purple-300/60 hover:bg-purple-500/20",children:" Rota"}),r.jsx("button",{type:"button",onClick:()=>Q(x._id),className:"w-full sm:w-auto rounded-md border border-blue-400/40 bg-blue-500/10 px-4 py-2 text-xs font-semibold text-blue-100 transition hover:border-blue-300/60 hover:bg-blue-500/20",children:" Baixar PDF"}),r.jsx("button",{type:"button",onClick:()=>y(null),className:"w-full sm:w-auto rounded-md border border-white/15 bg-white/5 px-4 py-2 text-xs font-semibold text-slate-100 transition hover:border-emerald-300/40 hover:bg-white/10",children:"Fechar"})]})]})})]}),c&&r.jsx(zw,{view:s,setView:a,onLogout:W})]}):r.jsx(Bw,{password:n,setPassword:l,showPass:$,setShowPass:Y,authLoading:o,onLogin:K})}const qw="AIzaSyAUoyCSevBWa4CkeDcBuYd-R0mbR2NtpIs";function Uw(){const{token:e}=Zi();if(!e)return r.jsx("div",{children:"Token no encontrado"});const[t,s]=p.useState(!0),[a,n]=p.useState(!1),[l,o]=p.useState(!1),[c,d]=p.useState(!1),[m,L]=p.useState("valid"),[x,y]=p.useState(null),[$,Y]=p.useState(null),G=p.useRef(null),M=p.useRef(null),f=p.useRef(null);p.useEffect(()=>{const O=()=>window.google&&window.google.maps&&window.google.maps.Map?(console.log("Google Maps already loaded and ready"),d(!0),!0):!1;if(O())return;if(document.querySelector('script[src*="maps.googleapis.com/maps/api/js"]')){console.log("Google Maps script already in DOM, waiting for load...");let Q=0;const W=50,Z=setInterval(()=>{Q++,O()?(console.log("Google Maps loaded from existing script"),clearInterval(Z)):Q>=W&&(clearInterval(Z),console.error("Timeout waiting for Google Maps to load"),k.fire("Erro","Tempo esgotado ao carregar o Google Maps. Recarregue a pgina.","error"))},100);return()=>clearInterval(Z)}console.log("Loading Google Maps script...");const E=document.createElement("script");E.src=`https://maps.googleapis.com/maps/api/js?key=${qw}&libraries=places&loading=async`,E.async=!0,E.defer=!0,E.onload=()=>{console.log("Google Maps script loaded, waiting for API to be ready...");let Q=0;const W=50,Z=setInterval(()=>{Q++,O()?(console.log(" Google Maps API fully ready"),clearInterval(Z)):Q>=W&&(clearInterval(Z),console.error("Google Maps API not ready after script load"),k.fire("Erro","Google Maps no est pronto. Recarregue a pgina.","error"))},100)},E.onerror=()=>{console.error("Failed to load Google Maps script"),k.fire("Erro","Falha ao carregar o Google Maps. Verifique sua conexo.","error")},document.head.appendChild(E)},[]),p.useEffect(()=>{u()},[e]),p.useEffect(()=>{c&&G.current&&!M.current&&N()},[c]);const u=async()=>{try{s(!0);const O=await le(`/location-capture/${e}`),U=await O.json();if(!O.ok){console.error("Token validation error:",U),U.status==="expired"||U.status==="captured"?L(U.status==="captured"?"used":"invalid"):L("invalid"),y(null);return}if(U.data.status!=="pending"){L(U.data.status==="captured"?"used":"invalid"),y(null);return}y(U.data),L("valid")}catch(O){console.error("Error validating token:",O),L("invalid"),y(null)}finally{s(!1)}},N=()=>{if(!G.current){console.log("Map ref not ready");return}if(!window.google||!window.google.maps||!window.google.maps.Map){console.error("Google Maps API not fully loaded");return}try{console.log("Initializing Google Map...");const O={lat:-15.7801,lng:-47.9292},U=new window.google.maps.Map(G.current,{center:O,zoom:15,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0});M.current=U,U.addListener("click",E=>{E.latLng&&T(E.latLng.lat(),E.latLng.lng())}),console.log(" Map initialized successfully")}catch(O){console.error("Failed to initialize map:",O),k.fire("Erro","Falha ao inicializar o mapa. Recarregue a pgina.","error")}},T=async(O,U)=>{if(!M.current||!window.google||!window.google.maps)return;f.current&&f.current.setMap(null);const E=new window.google.maps.Marker({position:{lat:O,lng:U},map:M.current,draggable:!0,animation:window.google.maps.Animation.DROP,title:"Arraste para ajustar a posio"});E.addListener("dragend",W=>{W.latLng&&T(W.latLng.lat(),W.latLng.lng())}),f.current=E,M.current.panTo({lat:O,lng:U});const Q=await J(O,U);Y({lat:O,lng:U,...Q})},J=async(O,U)=>{try{console.log("Reverse geocoding:",O,U);const E=await le("/distance/geocode",{method:"POST",body:JSON.stringify({lat:O,lng:U})}),Q=await E.json();return E.ok&&Q.data?(console.log("Geocoding result:",Q.data),{address:Q.data.formattedAddress,addressStreet:Q.data.street,addressNumber:Q.data.number,addressNeighborhood:Q.data.neighborhood,addressCity:Q.data.city,addressState:Q.data.state,addressZip:Q.data.zip}):{address:"Endereo no encontrado"}}catch(E){return console.error("Geocoding error:",E),{address:"Erro ao obter endereo"}}},z=()=>{if(!navigator.geolocation){k.fire("Erro","Geolocalizao no  suportada pelo seu navegador","error");return}o(!0),navigator.geolocation.getCurrentPosition(O=>{const U=O.coords.latitude,E=O.coords.longitude;T(U,E),o(!1)},O=>{console.error("Geolocation error:",O);let U="No foi possvel obter sua localizao";switch(O.code){case O.PERMISSION_DENIED:U="Permisso de localizao negada. Por favor, habilite no seu navegador.";break;case O.POSITION_UNAVAILABLE:U="Informao de localizao indisponvel.";break;case O.TIMEOUT:U="Timeout ao obter localizao.";break}k.fire("Erro",U,"error"),o(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},I=async()=>{if(!$){k.fire("Ateno","Por favor, selecione uma localizao no mapa primeiro","warning");return}try{n(!0);const O=await le(`/location-capture/${e}/capture`,{method:"POST",body:JSON.stringify({latitude:$.lat,longitude:$.lng,address:$.address||"",addressStreet:$.addressStreet||"",addressNumber:$.addressNumber||"",addressNeighborhood:$.addressNeighborhood||"",addressCity:$.addressCity||"",addressState:$.addressState||"",addressZip:$.addressZip||""})}),U=await O.json();if(!O.ok){k.fire("Erro",U.error||"Falha ao salvar localizao","error");return}k.fire({icon:"success",title:" Localizao Salva!",html:`
          <div class="text-left space-y-2">
            <p class="text-gray-600">Sua localizao foi registrada com sucesso!</p>
            <div class="bg-green-50 p-3 rounded border border-green-200">
              <p class="text-sm font-semibold text-green-800 mb-1"> Endereo:</p>
              <p class="text-sm text-gray-700">${$.address}</p>
            </div>
            <p class="text-xs text-gray-500 mt-2">Voc pode fechar esta pgina agora.</p>
          </div>
        `,confirmButtonText:"Fechar",allowOutsideClick:!1,confirmButtonColor:"#10b981"}).then(()=>{L("used"),y(null)})}catch(O){console.error("Error saving location:",O),k.fire("Erro","Falha ao salvar localizao. Verifique sua conexo e tente novamente.","error")}finally{n(!1)}};return t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-slate-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-md p-8 rounded-2xl shadow-2xl",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-400 mx-auto mb-4"}),r.jsx("p",{className:"text-white text-lg font-semibold",children:"Carregando..."})]})}):m==="used"?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-green-800 to-slate-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full text-center bg-white/10 backdrop-blur-md p-8 rounded-2xl shadow-2xl",children:[r.jsx("div",{className:"text-7xl mb-4",children:""}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-3",children:"Localizao Salva!"}),r.jsx("p",{className:"text-green-200 text-lg mb-2",children:"Este link j foi usado com sucesso."}),r.jsx("p",{className:"text-green-300/70 text-sm",children:"Voc pode fechar esta pgina."})]})}):m==="invalid"||!x?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-slate-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full text-center bg-white/10 backdrop-blur-md p-8 rounded-2xl shadow-2xl",children:[r.jsx("div",{className:"text-7xl mb-4",children:""}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-3",children:"Link Invlido"}),r.jsx("p",{className:"text-red-200 text-lg mb-2",children:"Este link  invlido ou expirou."}),r.jsx("p",{className:"text-red-300/70 text-sm",children:"Entre em contato para obter um novo link."})]})}):r.jsxs("div",{className:"h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-slate-900 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"bg-white/10 backdrop-blur-md border-b border-white/20 shadow-xl p-3 sm:p-4 flex-shrink-0",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-white flex items-center gap-2",children:[r.jsx("span",{className:"text-3xl",children:""}),"Captura de Localizao"]}),r.jsx("p",{className:"text-xs sm:text-sm text-blue-100 mt-1",children:x.description||"Marque sua localizao no mapa"})]})}),r.jsxs("div",{className:"flex-1 flex flex-col gap-3 p-2 sm:p-4 max-w-7xl mx-auto w-full overflow-hidden",children:[r.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-2 sm:p-3 shadow-xl flex-shrink-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx("button",{onClick:z,disabled:l||!c,className:"flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg text-sm sm:text-base",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),r.jsx("span",{children:"Obtendo..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{children:"Usar Minha Localizao"})]})}),r.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 text-white bg-white/5 border border-white/20 rounded-lg py-3 px-4 text-sm sm:text-base",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{className:"hidden sm:inline",children:"Ou clique no mapa"}),r.jsx("span",{className:"sm:hidden",children:"Clique no mapa"})]})]})}),$&&r.jsx("div",{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-2 border-green-400/50 rounded-xl p-3 sm:p-4 shadow-xl animate-in fade-in slide-in-from-top-2 duration-300 flex-shrink-0",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-2xl sm:text-3xl",children:""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-white text-sm sm:text-base mb-1",children:"Localizao Selecionada"}),r.jsx("p",{className:"text-xs sm:text-sm text-green-100 mb-1 leading-tight line-clamp-2",children:$.address}),r.jsxs("p",{className:"text-xs text-green-200/70",children:[" ",$.lat.toFixed(6),", ",$.lng.toFixed(6)]})]})]})}),r.jsx("div",{className:"flex-1 bg-white/10 backdrop-blur-md border-2 border-white/20 rounded-xl overflow-hidden shadow-2xl min-h-0",children:c?r.jsx("div",{ref:G,className:"w-full h-full"}):r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-t-4 border-b-4 border-blue-400 mx-auto mb-4"}),r.jsx("p",{className:"text-white text-base sm:text-lg font-semibold",children:"Carregando mapa..."}),r.jsx("p",{className:"text-blue-200 text-xs sm:text-sm mt-2",children:"Por favor, aguarde..."})]})})}),$&&r.jsx("button",{onClick:I,disabled:a,className:"w-full bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-600 hover:via-emerald-600 hover:to-green-700 text-white font-bold py-3 sm:py-4 px-6 rounded-xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-base sm:text-lg shadow-2xl animate-in fade-in slide-in-from-bottom-2 duration-300 flex-shrink-0",children:a?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),r.jsx("span",{children:"Salvando..."})]}):r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-xl sm:text-2xl",children:""}),r.jsx("span",{children:"Salvar Localizao"})]})})]}),r.jsx("div",{className:"bg-white/10 backdrop-blur-md border-t border-white/20 p-2 sm:p-3 shadow-xl flex-shrink-0",children:r.jsx("div",{className:"max-w-7xl mx-auto text-center",children:r.jsxs("p",{className:"text-white text-xs sm:text-sm font-semibold flex items-center justify-center gap-2 flex-wrap",children:[r.jsx("span",{className:"text-lg sm:text-xl",children:""}),r.jsx("span",{className:"hidden sm:inline",children:"Dica: Voc pode arrastar o marcador no mapa para ajustar a posio"}),r.jsx("span",{className:"sm:hidden",children:"Arraste o marcador para ajustar"})]})})})]})}function Hw({children:e}){return r.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-50 antialiased",children:[r.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(59,130,246,0.15),transparent_25%),radial-gradient(circle_at_80%_0%,rgba(14,165,233,0.12),transparent_25%),radial-gradient(circle_at_60%_70%,rgba(34,197,94,0.12),transparent_25%)]"}),r.jsx("main",{className:"relative",children:e})]})}function Kw(){return r.jsx(Xf,{children:r.jsx(eg,{children:r.jsxs(Ic,{children:[r.jsx(Ce,{path:"/login",element:r.jsx(tg,{})}),r.jsx(Ce,{path:"/operations/:token",element:r.jsx(Aw,{})}),r.jsx(Ce,{path:"/operations/team/:id",element:r.jsx(Vw,{})}),r.jsx(Ce,{path:"/location-capture",element:r.jsx(Hw,{}),children:r.jsx(Ce,{path:":token",element:r.jsx(Uw,{})})}),r.jsx(Ce,{path:"/*",element:r.jsx(Zf,{children:r.jsx(ig,{children:r.jsxs(Ic,{children:[r.jsx(Ce,{path:"/",element:r.jsx(dg,{})}),r.jsx(Ce,{path:"/clients",element:r.jsx(tw,{})}),r.jsx(Ce,{path:"/clients/new",element:r.jsx(rw,{})}),r.jsx(Ce,{path:"/jobs",element:r.jsx(mw,{})}),r.jsx(Ce,{path:"/jobs/new",element:r.jsx(pw,{})}),r.jsx(Ce,{path:"/employees",element:r.jsx(xw,{})}),r.jsx(Ce,{path:"/teams",element:r.jsx(hw,{})}),r.jsx(Ce,{path:"/teams/:id/jobs",element:r.jsx(fw,{})}),r.jsx(Ce,{path:"/machines",element:r.jsx(gw,{})}),r.jsx(Ce,{path:"/equipment",element:r.jsx(bw,{})}),r.jsx(Ce,{path:"/cash",element:r.jsx(ww,{})}),r.jsx(Ce,{path:"/catalog",element:r.jsx(Nw,{})}),r.jsx(Ce,{path:"/documents",element:r.jsx(Cw,{})}),r.jsx(Ce,{path:"/audit",element:r.jsx(Sw,{})}),r.jsx(Ce,{path:"/settings",element:r.jsx(Ew,{})}),r.jsx(Ce,{path:"*",element:r.jsx(j0,{to:"/",replace:!0})})]})})})})]})})})}eo.createRoot(document.getElementById("root")).render(r.jsx(iu.StrictMode,{children:r.jsx(Kf,{children:r.jsx(Kw,{})})}));
